# Common ID Unit Types
# Semantic types for identifiers to prevent mixing different ID domains

# User identifier
unit UserId: i64 as uid

# Session identifier
unit SessionId: i64 as sid

# Request/transaction identifier
unit RequestId: str as rid

# Generic entity identifier
unit EntityId: i64 as eid

# Database row identifier
unit RowId: i64 as rowid

# UUID string representation
unit Uuid: str as uuid

# Implementation for UserId
impl UserId:
    fn from_int(n: i64) -> UserId:
        return n_uid

    fn to_int(self) -> i64:
        return self as i64

    fn is_valid(self) -> bool:
        return (self as i64) > 0

# Implementation for SessionId
impl SessionId:
    fn from_int(n: i64) -> SessionId:
        return n_sid

    fn to_int(self) -> i64:
        return self as i64

    fn is_valid(self) -> bool:
        return (self as i64) > 0

# Implementation for Uuid
impl Uuid:
    fn from_str(s: str) -> Result<Uuid, UuidError>:
        # Basic UUID validation: 8-4-4-4-12 format
        if s.len() != 36:
            return Err(UuidError::InvalidLength)
        return Ok(s_uuid)

    fn as_str(self) -> &str:
        return &(self as str)

    fn is_nil(self) -> bool:
        return (self as str) == "00000000-0000-0000-0000-000000000000"

# UUID error type
enum UuidError:
    InvalidLength
    InvalidFormat
    InvalidCharacter
