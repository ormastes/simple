use app.io.mod.{process_run_with_limits}

fn main():
    print "Testing infinite loop with 2s timeout, 30s CPU..."
    val result = process_run_with_limits(
        "bash",
        ["-c", "while true; do :; done"],
        2000,
        100000000,
        30,
        100,
        10
    )
    print "Exit code: {result.exit_code}"
    print "Limit exceeded: {result.limit_exceeded}"
    print "Limit type: {result.limit_type}"
    print "Stderr: {result.stderr}"

    print ""
    print "Testing CPU intensive with 30s timeout, 2s CPU..."
    val result2 = process_run_with_limits(
        "bash",
        ["-c", "yes > /dev/null"],
        30000,
        100000000,
        2,
        100,
        10
    )
    print "Exit code: {result2.exit_code}"
    print "Limit exceeded: {result2.limit_exceeded}"
    print "Limit type: {result2.limit_type}"
    print "Stderr: {result2.stderr}"
