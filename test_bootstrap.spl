# Test Bootstrap Module
# Validation test for bootstrap pipeline structure

use app.build.bootstrap (
    Bootstrap,
    BootstrapConfig,
    BootstrapStage,
    default_bootstrap_config,
    stage_name
)
use app.build.types (BuildProfile)

fn main():
    print "Testing Simple Bootstrap Pipeline"
    print "=================================="
    print ""

    # Test 1: Create default configuration
    print "Test 1: Default configuration"
    val config = default_bootstrap_config()
    print "  profile: {config.profile}"
    print "  verify: {config.verify}"
    print "  keep_artifacts: {config.keep_artifacts}"
    print "  workspace_root: '{config.workspace_root}'"
    print "  output_dir: '{config.output_dir}'"
    print "  ✓ Default config created"

    # Test 2: Configuration customization
    print "\nTest 2: Configuration customization"
    var custom_config = BootstrapConfig(
        profile: BuildProfile.Bootstrap,
        verify: true,
        keep_artifacts: true,
        workspace_root: "rust",
        output_dir: "bootstrap_test"
    )
    print "  custom_config.keep_artifacts: {custom_config.keep_artifacts}"
    print "  custom_config.output_dir: '{custom_config.output_dir}'"
    print "  ✓ Config customization working"

    # Test 3: Stage names
    print "\nTest 3: Stage names"
    print "  Stage1: '{stage_name(BootstrapStage.Stage1)}'"
    print "  Stage2: '{stage_name(BootstrapStage.Stage2)}'"
    print "  Stage3: '{stage_name(BootstrapStage.Stage3)}'"
    print "  ✓ Stage names working"

    print "\n✓ Bootstrap pipeline structure validated!"
    print "\nTo run actual bootstrap:"
    print "  - Bootstrap.quick() for default 3-stage bootstrap"
    print "  - Bootstrap.run(config) for custom configuration"
    print ""
    print "Note: Full bootstrap takes 2-5 minutes (3 complete builds)"

    return 0
