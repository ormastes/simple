# Type System
#
# Hindley-Milner type inference, effect system, and Lean 4 verification model.
# Port of rust/type/ crate.

from types import {
    Type, TypeScheme, Substitution, TypeError, ConstKeyValidation,
    FunctionType, MixinInfo, RequiredMethodSig,
    validate_dict_keys_against_const_set
}

from checker import {TypeChecker}

from lean_types import {LeanTy, LeanExpr, lean_infer, infer_deterministic}

from effects import {
    Effect, EffectEnv, CallGraph, SccResult,
    contains_suspension, contains_suspension_node, contains_suspension_expr,
    infer_function_effect, calls_async_function,
    build_effect_env, infer_mutual_effects,
    validate_sync_constraint,
    needs_promise_wrapping, ReturnWrapMode, PromiseTypeInfo,
    AwaitMode, needs_await, needs_await_typed, TypedAwaitMode,
    statement_needs_await, validate_suspension_context,
    build_call_graph, tarjan_scc, propagate_effects_transitive
}

# Core types
export Type, TypeScheme, Substitution, TypeError, ConstKeyValidation
export FunctionType, MixinInfo, RequiredMethodSig
export validate_dict_keys_against_const_set

# Type checker
export TypeChecker

# Lean verification model
export LeanTy, LeanExpr, lean_infer, infer_deterministic

# Effect system
export Effect, EffectEnv, CallGraph, SccResult
export contains_suspension, contains_suspension_node, contains_suspension_expr
export infer_function_effect, calls_async_function
export build_effect_env, infer_mutual_effects
export validate_sync_constraint
export needs_promise_wrapping, ReturnWrapMode, PromiseTypeInfo
export AwaitMode, needs_await, needs_await_typed, TypedAwaitMode
export statement_needs_await, validate_suspension_context
export build_call_graph, tarjan_scc, propagate_effects_transitive
