# Coverage Module - FFI Spec
#
# Coverage tracking operations for the Simple runtime.
# Generates build/rust/ffi_gen/src/coverage.rs
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/coverage.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn coverage_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Coverage Control
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_coverage_enabled", category: "coverage",
        params: [],
        return_type: "bool", runtime_fn: "rt_coverage_enabled",
        doc: "Check if coverage tracking is enabled"
    ))

    specs.push(InternFnSpec(
        name: "rt_coverage_clear", category: "coverage",
        params: [],
        return_type: "void", runtime_fn: "rt_coverage_clear",
        doc: "Clear all coverage data"
    ))

    # =========================================================================
    # Coverage Output
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_coverage_dump_sdn", category: "coverage",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "bool", runtime_fn: "rt_coverage_dump_sdn",
        doc: "Dump coverage data to SDN file, returns success"
    ))

    specs
