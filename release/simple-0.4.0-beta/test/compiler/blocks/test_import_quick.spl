use compiler.blocks.modes.{TextSpan, PreLexInfo, Span}

# TextSpan direct - BROKEN
val ts1 = TextSpan(start: 5, end: 10)
print("ts1 direct: start={ts1.start}, end={ts1.end}")

# TextSpan.new - WORKS
val ts2 = TextSpan.new(5, 10)
print("ts2 factory: start={ts2.start}, end={ts2.end}")

# Span.empty - check
val s1 = Span.empty()
print("s1 empty: start={s1.start}, end={s1.end}")

# Span.new
val s2 = Span.new(1, 2, 3, 4)
print("s2 factory: start={s2.start}, end={s2.end}")

# PreLexInfo.empty
val p1 = PreLexInfo.empty()
print("p1 empty: string_spans.len={p1.string_spans.len()}")

# PreLexInfo direct with TextSpan.new inside
val p2 = PreLexInfo(
    string_spans: [TextSpan.new(5, 10)],
    comment_spans: [],
    escape_positions: [3],
    brace_pairs: [(1, 5)]
)
print("p2 direct: string_spans.len={p2.string_spans.len()}")
print("p2 is_in_string(7): {p2.is_in_string(7)}")
print("p2 is_in_string(3): {p2.is_in_string(3)}")
print("p2 is_escaped(4): {p2.is_escaped(4)}")
print("p2 is_protected(7): {p2.is_protected(7)}")
