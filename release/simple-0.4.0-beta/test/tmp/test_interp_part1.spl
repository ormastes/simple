# Test first two describe blocks
describe "Interpreter Bug Regressions":
    context "BDD Scoping Issue":
        it "allows function definition in it block":
            fn square(x: i32) -> i32:
                return x * x
            val result = square(5)
            expect result == 25

        it "allows nested function calls":
            fn double(x: i32) -> i32:
                return x * 2
            fn quadruple(x: i32) -> i32:
                return double(double(x))
            expect quadruple(3) == 12

    context "BDD Mutable Variable Issue":
        it "supports mutable array append":
            var arr = [1, 2]
            arr.append(3)
            expect arr.len() == 3

        it "supports functional update operator":
            var list = [1, 2]
            list->append(3)
            expect list.len() == 3

    context "Import Alias Issue":
        it "import alias contains module exports":
            use std.spec as sp
            sp.expect(1 == 1)

    context "Static Method new Recursion":
        it "static method new works without recursion":
            class Counter:
                count: i32
                fn new(c: i32) -> Counter:
                    return Counter(c)
            val c = Counter.new(42)
            expect c.count == 42

    context "Module Global Access":
        it "functions can access module globals":
            expect true == true

describe "Module System Bug Regressions":
    context "Alias Class Access":
        it "accesses class through module alias":
            use std.spec as sp
            val mode = sp.ExecutionMode.Normal
            expect mode != nil
