# FFI - Package Management
# Centralized package operations and Cargo FFI wrappers

# ============================================================================
# Package File Operations
# ============================================================================

extern fn rt_package_exists(path: text) -> i32

fn package_exists(path: text) -> i32:
    rt_package_exists(path)

extern fn rt_package_is_dir(path: text) -> i32

fn package_is_dir(path: text) -> i32:
    rt_package_is_dir(path)

extern fn rt_package_file_size(path: text) -> i64

fn package_file_size(path: text) -> i64:
    rt_package_file_size(path)

extern fn rt_package_copy_file(src_path: text, dst_path: text) -> i32

fn package_copy_file(src_path: text, dst_path: text) -> i32:
    rt_package_copy_file(src_path, dst_path)

extern fn rt_package_chmod(file_path: text, mode: i32) -> i32

fn package_chmod(file_path: text, mode: i32) -> i32:
    rt_package_chmod(file_path, mode)

extern fn rt_package_mkdir_all(dir_path: text) -> i32

fn package_mkdir_all(dir_path: text) -> i32:
    rt_package_mkdir_all(dir_path)

extern fn rt_package_remove_dir_all(path: text) -> i32

fn package_remove_dir_all(path: text) -> i32:
    rt_package_remove_dir_all(path)

extern fn rt_package_create_symlink(target: text, link_path: text) -> i32

fn package_create_symlink(target: text, link_path: text) -> i32:
    rt_package_create_symlink(target, link_path)

# ============================================================================
# Package Compression
# ============================================================================

extern fn rt_package_create_tarball(source_dir: text, output_path: text) -> i32

fn package_create_tarball(source_dir: text, output_path: text) -> i32:
    rt_package_create_tarball(source_dir, output_path)

extern fn rt_package_extract_tarball(tarball_path: text, dest_dir: text) -> i32

fn package_extract_tarball(tarball_path: text, dest_dir: text) -> i32:
    rt_package_extract_tarball(tarball_path, dest_dir)

# ============================================================================
# Package Hashing and Verification
# ============================================================================

extern fn rt_package_sha256(path: text) -> text

fn package_sha256(path: text) -> text:
    rt_package_sha256(path)

# ============================================================================
# Package Memory Management
# ============================================================================

extern fn rt_package_free_string(ptr: text) -> ()

fn package_free_string(ptr: text):
    rt_package_free_string(ptr)

# ============================================================================
# Cargo Operations
# ============================================================================

extern fn rt_cargo_build(profile: text, features: [text], feature_count: i64) -> dict

fn cargo_build(profile: text, features: [text], feature_count: i64) -> dict:
    rt_cargo_build(profile, features, feature_count)

extern fn rt_cargo_check() -> dict

fn cargo_check() -> dict:
    rt_cargo_check()

extern fn rt_cargo_test(package: text, filter: text) -> dict

fn cargo_test(package: text, filter: text) -> dict:
    rt_cargo_test(package, filter)

extern fn rt_cargo_test_doc(package: text) -> dict

fn cargo_test_doc(package: text) -> dict:
    rt_cargo_test_doc(package, text)

extern fn rt_cargo_clean() -> i64

fn cargo_clean() -> i64:
    rt_cargo_clean()

extern fn rt_cargo_fmt(check_only: i64) -> dict

fn cargo_fmt(check_only: i64) -> dict:
    rt_cargo_fmt(check_only)

extern fn rt_cargo_lint(fix: i64) -> dict

fn cargo_lint(fix: i64) -> dict:
    rt_cargo_lint(fix)
