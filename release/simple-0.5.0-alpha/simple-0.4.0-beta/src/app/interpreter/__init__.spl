# Simple Interpreter
#
# Self-hosted interpreter with Erlang-inspired performance optimizations.
#
# Modules:
# - core: Environment, symbol interning, evaluation
# - collections: Persistent data structures (HAMT, RRB-tree)
# - async_runtime: Actors, heaps, mailboxes, scheduler
# - memory: Reference-counted binaries, message transfer
# - lazy: Lazy values, infinite sequences
# - perf: Configuration, statistics, benchmarking
#
# Performance Features (Erlang-inspired):
# - Symbol interning: O(1) string comparison
# - Persistent collections: Structural sharing, O(log32 n) updates
# - Per-actor heaps: Isolated GC, no global pauses
# - Off-heap messages: GC skips unread messages
# - Reference-counted binaries: Zero-copy for large values
# - Reductions-based scheduling: Fair preemption
# - Lazy evaluation: Deferred computation, infinite sequences

# Core
from core import {
    Environment,
    Scope,
    Binding,
    Value,
    SymbolId,
    SymbolInterner,
    intern,
    resolve
}

# Collections (TODO: Incomplete - commented out to allow tests to run)
# from collections import {
#     PersistentDict,
#     PersistentVec,
#     PersistentSymbolTable,
#     PersistentScope,
#     SymbolEntry,
#     SymbolKind,
#     ScopeKind
# }

# Async Runtime (TODO: Incomplete - commented out to allow tests to run)
# from async_runtime import {
#     # Futures
#     Future,
#     eval_async,
#     eval_await,
#
#     # Actors
#     Actor,
#     eval_spawn,
#     eval_send,
#     eval_receive,
#
#     # Generators
#     Generator,
#     eval_yield,
#     eval_generator_next,
#
#     # Actor Heap
#     ActorHeap,
#     HeapConfig,
#     HeapStats,
#
#     # Mailbox
#     Mailbox,
#     MailboxConfig,
#     MailboxStats,
#     MessageRef,
#     MessagePriority,
#
#     # Scheduler
#     ActorScheduler,
#     SchedulerConfig,
#     SchedulerStats,
#     ActorContext,
#     ActorPriority,
#     ActorState,
#     RunQueue
# }

# Memory (TODO: Incomplete - commented out to allow tests to run)
# from memory import {
#     RefcBinary,
#     BinaryRef,
#     SharedHeap,
#     SharedHeapConfig,
#     SharedHeapStats,
#     MessageTransfer,
#     TransferStats,
#     ValueWrapper,
#     SMALL_BINARY_THRESHOLD
# }

# Lazy (TODO: Incomplete - commented out to allow tests to run)
# from lazy import {
#     Lazy,
#     LazyState,
#     LazyStats,
#     Memo,
#     LazySeq,
#     LazySeqNode,
#     naturals,
#     naturals_from,
#     fibonacci,
#     primes,
#     repeat,
#     cycle,
#     range_lazy
# }

# Performance (TODO: Incomplete - commented out to allow tests to run)
# from perf import {
#     PerfConfig,
#     PerfProfile,
#     OptimizationLevel,
#     PerfStats,
#     ComponentStats,
#     Benchmark,
#     BenchmarkResult,
#     BenchmarkSuite,
#     collect_stats,
#     run_benchmark
# }

# Re-export core
export Environment, Scope, Binding, Value
export SymbolId, SymbolInterner, intern, resolve

# Re-export collections (TODO: Uncomment when implemented)
# export PersistentDict, PersistentVec
# export PersistentSymbolTable, PersistentScope
# export SymbolEntry, SymbolKind, ScopeKind

# Re-export async runtime (TODO: Uncomment when implemented)
# export Future, eval_async, eval_await
# export Actor, eval_spawn, eval_send, eval_receive
# export Generator, eval_yield, eval_generator_next
# export ActorHeap, HeapConfig, HeapStats
# export Mailbox, MailboxConfig, MailboxStats, MessageRef, MessagePriority
# export ActorScheduler, SchedulerConfig, SchedulerStats
# export ActorContext, ActorPriority, ActorState, RunQueue

# Re-export memory (TODO: Uncomment when implemented)
# export RefcBinary, BinaryRef, SharedHeap, SharedHeapConfig
# export MessageTransfer, TransferStats, ValueWrapper
# export SMALL_BINARY_THRESHOLD

# Re-export lazy (TODO: Uncomment when implemented)
# export Lazy, LazyState, LazyStats, Memo
# export LazySeq, LazySeqNode
# export naturals, naturals_from, fibonacci, primes
# export repeat, cycle, range_lazy

# Re-export perf (TODO: Uncomment when implemented)
# export PerfConfig, PerfProfile, OptimizationLevel
# export PerfStats, ComponentStats
# export Benchmark, BenchmarkResult, BenchmarkSuite
# export collect_stats, run_benchmark
