# System Full Module - FFI Spec
#
# Complete system operations for the Simple runtime.
# Generates build/rust/ffi_gen/src/system.rs
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/system_full.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn system_full_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # System Info
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_getpid", category: "system",
        params: [],
        return_type: "i64", runtime_fn: "rt_getpid",
        doc: "Get current process ID"
    ))

    specs.push(InternFnSpec(
        name: "rt_hostname", category: "system",
        params: [],
        return_type: "String", runtime_fn: "rt_hostname",
        doc: "Get system hostname"
    ))

    specs.push(InternFnSpec(
        name: "rt_system_cpu_count", category: "system",
        params: [],
        return_type: "i64", runtime_fn: "rt_system_cpu_count",
        doc: "Get number of CPU cores"
    ))

    # =========================================================================
    # Path Operations
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_path_basename", category: "system",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "String", runtime_fn: "rt_path_basename",
        doc: "Get basename of path"
    ))

    # =========================================================================
    # CLI Arguments
    # =========================================================================

    specs.push(InternFnSpec(
        name: "sys_get_args", category: "system",
        params: [],
        return_type: "Value", runtime_fn: "sys_get_args",
        doc: "Get command line arguments as array"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_get_args", category: "system",
        params: [],
        return_type: "Value", runtime_fn: "rt_cli_get_args",
        doc: "Get CLI arguments as array"
    ))

    # =========================================================================
    # Exit
    # =========================================================================

    specs.push(InternFnSpec(
        name: "sys_exit", category: "system",
        params: [InternParamSpec(name: "code", value_type: "i64")],
        return_type: "void", runtime_fn: "sys_exit",
        doc: "Exit process with code"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_exit", category: "system",
        params: [InternParamSpec(name: "code", value_type: "i64")],
        return_type: "void", runtime_fn: "rt_cli_exit",
        doc: "Exit CLI with code"
    ))

    # =========================================================================
    # CLI File Operations
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_file_exists", category: "system",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "bool", runtime_fn: "rt_cli_file_exists",
        doc: "Check if file exists (CLI variant)"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_read_file", category: "system",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "String", runtime_fn: "rt_cli_read_file",
        doc: "Read file (CLI variant)"
    ))

    specs
