# Time Module - Intern FFI Spec
#
# Declares time-related extern functions for auto-generation of
# interpreter_extern/time.rs boilerplate.
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/time.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn time_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Current Time
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_time_now", category: "time",
        params: [],
        return_type: "i64", runtime_fn: "rt_time_now",
        doc: "Get current Unix timestamp in seconds"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_now_millis", category: "time",
        params: [],
        return_type: "i64", runtime_fn: "rt_time_now_millis",
        doc: "Get current Unix timestamp in milliseconds"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_now_nanos", category: "time",
        params: [],
        return_type: "i64", runtime_fn: "rt_time_now_nanos",
        doc: "Get current Unix timestamp in nanoseconds"
    ))

    # =========================================================================
    # Monotonic Clock (for measuring elapsed time)
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_time_monotonic_nanos", category: "time",
        params: [],
        return_type: "i64", runtime_fn: "rt_time_monotonic_nanos",
        doc: "Get monotonic clock value in nanoseconds (for measuring elapsed time)"
    ))

    # =========================================================================
    # Sleep/Delay
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_sleep_secs", category: "time",
        params: [InternParamSpec(name: "seconds", value_type: "i64")],
        return_type: "void", runtime_fn: "rt_sleep_secs",
        doc: "Sleep for specified number of seconds"
    ))

    specs.push(InternFnSpec(
        name: "rt_sleep_millis", category: "time",
        params: [InternParamSpec(name: "millis", value_type: "i64")],
        return_type: "void", runtime_fn: "rt_sleep_millis",
        doc: "Sleep for specified number of milliseconds"
    ))

    specs.push(InternFnSpec(
        name: "rt_sleep_nanos", category: "time",
        params: [InternParamSpec(name: "nanos", value_type: "i64")],
        return_type: "void", runtime_fn: "rt_sleep_nanos",
        doc: "Sleep for specified number of nanoseconds"
    ))

    # =========================================================================
    # Date/Time Formatting
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_time_format", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64"),
                 InternParamSpec(name: "format", value_type: "String")],
        return_type: "String", runtime_fn: "rt_time_format",
        doc: "Format timestamp with strftime-style format string"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_format_iso", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "String", runtime_fn: "rt_time_format_iso",
        doc: "Format timestamp as ISO 8601 string"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_format_rfc3339", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "String", runtime_fn: "rt_time_format_rfc3339",
        doc: "Format timestamp as RFC 3339 string"
    ))

    # =========================================================================
    # Date/Time Parsing
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_time_parse", category: "time",
        params: [InternParamSpec(name: "s", value_type: "String"),
                 InternParamSpec(name: "format", value_type: "String")],
        return_type: "i64", runtime_fn: "rt_time_parse",
        doc: "Parse timestamp from string with format (returns -1 on error)"
    ))

    # =========================================================================
    # Date/Time Components
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_time_year", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_year",
        doc: "Get year component from timestamp"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_month", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_month",
        doc: "Get month component (1-12) from timestamp"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_day", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_day",
        doc: "Get day of month (1-31) from timestamp"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_hour", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_hour",
        doc: "Get hour component (0-23) from timestamp"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_minute", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_minute",
        doc: "Get minute component (0-59) from timestamp"
    ))

    specs.push(InternFnSpec(
        name: "rt_time_second", category: "time",
        params: [InternParamSpec(name: "timestamp", value_type: "i64")],
        return_type: "i64", runtime_fn: "rt_time_second",
        doc: "Get second component (0-59) from timestamp"
    ))

    specs
