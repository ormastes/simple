# @pending
"""
Inline Statement Specification

Tests that control flow statements (return, break, continue) work correctly
in single-line if statements. This enables concise guard clauses and early
exit patterns without requiring block syntax.
"""

# Inline Statement Support for If
# Tests that return/break/continue work in single-line if statements
# NOTE: No imports needed - describe/it/expect are built-in

describe "Inline statement in if":
    """
    Validates inline statement support for single-line if expressions
    including return statements, break/continue in loops, and combined
    patterns with elif/else blocks.
    """
    describe "return statement":
        it "supports inline return in function":
            fn get_value(x: i64) -> i64:
                if x < 0: return -1
                if x == 0: return 0
                return 1

            expect get_value(-5) == -1
            expect get_value(0) == 0
            expect get_value(5) == 1

        it "supports inline return with expression":
            fn abs_value(x: i64) -> i64:
                if x < 0: return -x
                return x

            expect abs_value(-10) == 10
            expect abs_value(10) == 10
            expect abs_value(0) == 0

        it "supports inline return in multiple conditions":
            fn classify(x: i64) -> text:
                if x < 0: return "negative"
                if x == 0: return "zero"
                if x > 100: return "large"
                return "positive"

            expect classify(-5) == "negative"
            expect classify(0) == "zero"
            expect classify(50) == "positive"
            expect classify(200) == "large"

    describe "break statement":
        it "supports inline break in loop":
            var sum = 0
            var i = 0
            while i < 100:
                if i >= 5: break
                sum = sum + i
                i = i + 1

            expect sum == 10  # 0+1+2+3+4 = 10
            expect i == 5

        it "supports inline break in for loop":
            var count = 0
            for x in [1, 2, 3, 4, 5]:
                if x > 3: break
                count = count + 1

            expect count == 3

    describe "continue statement":
        it "supports inline continue in loop":
            var sum = 0
            for x in [1, 2, 3, 4, 5]:
                if x == 3: continue
                sum = sum + x

            expect sum == 12  # 1+2+4+5 = 12

        it "supports inline continue skipping multiple values":
            var result = []
            for x in [1, 2, 3, 4, 5, 6]:
                if x % 2 == 0: continue
                result = result.push(x)

            expect result == [1, 3, 5]

    describe "combined with regular if":
        it "works with elif and else blocks":
            fn categorize(x: i64) -> text:
                if x < 0: return "negative"
                elif x == 0:
                    return "zero"
                else:
                    return "positive"

            expect categorize(-1) == "negative"
            expect categorize(0) == "zero"
            expect categorize(1) == "positive"

        it "allows inline if without else when using statement":
            fn early_return(x: i64) -> i64:
                if x < 0: return 0
                # This line is reached only for non-negative x
                return x * 2

            expect early_return(-5) == 0
            expect early_return(5) == 10
