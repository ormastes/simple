# Test Runtime Value Implementation
#
# Tests the pure Simple RuntimeValue implementation

import std.runtime.value (RuntimeValue)

fn main():
    print "=== RuntimeValue Test (Pure Simple) ===\n"

    # Test 1: Integer operations
    print "Test 1: Integer Arithmetic"
    val a = RuntimeValue.int(10)
    val b = RuntimeValue.int(5)

    val sum = a.add(b)
    print "  10 + 5 = {sum.as_int()}"

    val diff = a.sub(b)
    print "  10 - 5 = {diff.as_int()}"

    val prod = a.mul(b)
    print "  10 * 5 = {prod.as_int()}"

    val quot = a.div(b)
    print "  10 / 5 = {quot.as_int()}"
    print ""

    # Test 2: Type checking
    print "Test 2: Type Checking"
    print "  is_int(10): {a.is_int()}"
    print "  is_float(10): {a.is_float()}"
    print "  is_string(10): {a.is_string()}"
    print ""

    # Test 3: Type conversions
    print "Test 3: Type Conversions"
    print "  as_int(10): {a.as_int()}"
    print "  as_float(10): {a.as_float()}"
    print "  as_bool(10): {a.as_bool()}"
    print ""

    # Test 4: Comparison
    print "Test 4: Comparison"
    print "  10 == 5: {a.eq(b)}"
    print "  10 == 10: {a.eq(RuntimeValue.int(10))}"
    print "  5 < 10: {b.lt(a)}"
    print "  10 < 5: {a.lt(b)}"
    print ""

    # Test 5: Float operations
    print "Test 5: Float Operations"
    val x = RuntimeValue.float(3.14)
    val y = RuntimeValue.float(2.0)

    val sum_f = x.add(y)
    print "  3.14 + 2.0 = {sum_f.as_float()}"

    val prod_f = x.mul(y)
    print "  3.14 * 2.0 = {prod_f.as_float()}"
    print ""

    # Test 6: Mixed int/float
    print "Test 6: Mixed Int/Float"
    val int_val = RuntimeValue.int(5)
    val float_val = RuntimeValue.float(2.5)

    val mixed_sum = int_val.add(float_val)
    print "  5 + 2.5 = {mixed_sum.as_float()}"

    val mixed_prod = int_val.mul(float_val)
    print "  5 * 2.5 = {mixed_prod.as_float()}"
    print ""

    # Test 7: String operations
    print "Test 7: String Operations"
    val str1 = RuntimeValue.string("Hello")
    val str2 = RuntimeValue.string("World")

    val concat = str1.add(str2)
    print "  \"Hello\" + \"World\" = {concat.as_string()}"
    print ""

    # Test 8: Boolean values
    print "Test 8: Boolean Values"
    val t = RuntimeValue.bool(true)
    val f = RuntimeValue.bool(false)

    print "  true: {t.as_bool()}"
    print "  false: {f.as_bool()}"
    print "  as_int(true): {t.as_int()}"
    print "  as_int(false): {f.as_int()}"
    print ""

    # Test 9: Nil value
    print "Test 9: Nil Value"
    val nil = RuntimeValue.nil()
    print "  is_nil: {nil.is_nil()}"
    print "  as_bool(nil): {nil.as_bool()}"
    print "  as_string(nil): {nil.as_string()}"
    print ""

    print "=== All Tests Complete! ==="
