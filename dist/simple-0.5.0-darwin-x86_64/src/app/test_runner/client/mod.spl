# Test Runner Client Module
#
# Embedded test client for running tests on target hardware.
# Sends results to host via serial/semihosting protocol.
#
# Submodules:
#   - output: Protocol message sending
#   - harness: Test execution harness
#   - assert: Assertion functions

# =========================================================================
# Quick Reference
# =========================================================================
#
# Output (from output.spl):
#   OutputBackend - Serial/memory output backend
#   MessageSender - Protocol message sender
#   MessageSender_serial() - Create serial sender
#   MessageSender_memory() - Create memory sender (for testing)
#
# Harness (from harness.spl):
#   TestHarness - Test execution state
#   TestHarness_create(sender, count) - Create harness
#   harness.init() - Send ready message
#   harness.begin_test(id) - Start a test
#   harness.pass_test() - Mark test passed
#   harness.fail_test(msg, file, line) - Mark test failed
#   harness.complete() - Send completion message
#
# Assert (from assert.spl):
#   AssertResult - Assertion outcome
#   assert_true(cond, msg, file, line) - Assert condition
#   assert_eq_i32(actual, expected, ...) - Assert equality
#   check_assert(harness, result) - Check and report
#   require_assert(harness, result) - Check and fail if needed

# =========================================================================
# Example Usage
# =========================================================================
#
# # Create sender and harness
# var sender = MessageSender_serial()
# var harness = TestHarness_create(sender, 3)  # 3 tests
# harness.init()
#
# # Test 1
# harness.begin_test(1)
# val result = assert_eq_i32(2 + 2, 4, 0, 0, 10)
# if result.passed:
#     harness.pass_test()
# else:
#     harness.fail_test(result.msg_handle, result.file_handle, result.line)
#
# # Test 2
# harness.begin_test(2)
# harness.skip_test()  # Skip this one
#
# # Test 3
# harness.begin_test(3)
# var collector = AssertCollector_create()
# collector.add(assert_true(true, 0, 0, 20))
# collector.add(assert_eq_i32(1, 1, 0, 0, 21))
# if collector.is_passed():
#     harness.pass_test()
# else:
#     collector.report_to_harness(harness)
#     harness.fail_test(0, 0, 0)
#
# # Complete
# harness.complete()
# exit_with_results(harness)
