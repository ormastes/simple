use app.io.mod (file_read, get_args, exit, shell, cwd)

fn get_current_dir() -> text:
    cwd()

fn get_clean_args(all_args: [text]) -> [text]:
    var args = []
    var i = 1
    while i < all_args.len():
        args = args + [all_args[i]]
        i = i + 1
    args

fn main():
    val raw_args = get_args()
    val args = get_clean_args(raw_args)
    
    if args.len() < 1:
        print "Usage: simple mcp server"
        exit(1)
    
    val command = args[0]
    
    if command == "server":
        print "Server mode - starting..."
        val project_root = get_current_dir()
        print "Project root: " + project_root
        exit(0)
    else:
        print "Unknown command: " + command
        exit(1)

main()
