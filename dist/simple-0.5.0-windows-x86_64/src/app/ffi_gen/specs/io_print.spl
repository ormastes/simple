# I/O Print Module - Intern FFI Spec
#
# Declares print/input extern functions for auto-generation of
# interpreter_extern/io_print.rs boilerplate.
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/io_print.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn io_print_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Basic Print Functions
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_print", category: "io_print",
        params: [InternParamSpec(name: "s", value_type: "String")],
        return_type: "void", runtime_fn: "rt_print",
        doc: "Print string to stdout (no newline)"
    ))

    specs.push(InternFnSpec(
        name: "rt_println", category: "io_print",
        params: [InternParamSpec(name: "s", value_type: "String")],
        return_type: "void", runtime_fn: "rt_println",
        doc: "Print string to stdout with newline"
    ))

    specs.push(InternFnSpec(
        name: "rt_eprint", category: "io_print",
        params: [InternParamSpec(name: "s", value_type: "String")],
        return_type: "void", runtime_fn: "rt_eprint",
        doc: "Print string to stderr (no newline)"
    ))

    specs.push(InternFnSpec(
        name: "rt_eprintln", category: "io_print",
        params: [InternParamSpec(name: "s", value_type: "String")],
        return_type: "void", runtime_fn: "rt_eprintln",
        doc: "Print string to stderr with newline"
    ))

    # =========================================================================
    # Input Functions
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_input", category: "io_print",
        params: [],
        return_type: "String", runtime_fn: "rt_input",
        doc: "Read a line from stdin"
    ))

    specs.push(InternFnSpec(
        name: "rt_input_prompt", category: "io_print",
        params: [InternParamSpec(name: "prompt", value_type: "String")],
        return_type: "String", runtime_fn: "rt_input_prompt",
        doc: "Print prompt and read a line from stdin"
    ))

    # =========================================================================
    # Formatting Functions
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_format_int", category: "io_print",
        params: [InternParamSpec(name: "value", value_type: "i64")],
        return_type: "String", runtime_fn: "rt_format_int",
        doc: "Format integer as string"
    ))

    specs.push(InternFnSpec(
        name: "rt_format_float", category: "io_print",
        params: [InternParamSpec(name: "value", value_type: "f64")],
        return_type: "String", runtime_fn: "rt_format_float",
        doc: "Format float as string"
    ))

    specs.push(InternFnSpec(
        name: "rt_format_float_precision", category: "io_print",
        params: [InternParamSpec(name: "value", value_type: "f64"),
                 InternParamSpec(name: "precision", value_type: "i64")],
        return_type: "String", runtime_fn: "rt_format_float_precision",
        doc: "Format float with specified precision"
    ))

    specs.push(InternFnSpec(
        name: "rt_format_bool", category: "io_print",
        params: [InternParamSpec(name: "value", value_type: "bool")],
        return_type: "String", runtime_fn: "rt_format_bool",
        doc: "Format boolean as string (true/false)"
    ))

    # =========================================================================
    # Debug Functions
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_debug_print", category: "io_print",
        params: [InternParamSpec(name: "value", value_type: "Value")],
        return_type: "void", runtime_fn: "rt_debug_print",
        doc: "Print debug representation of value"
    ))

    specs.push(InternFnSpec(
        name: "rt_flush_stdout", category: "io_print",
        params: [],
        return_type: "void", runtime_fn: "rt_flush_stdout",
        doc: "Flush stdout buffer"
    ))

    specs.push(InternFnSpec(
        name: "rt_flush_stderr", category: "io_print",
        params: [],
        return_type: "void", runtime_fn: "rt_flush_stderr",
        doc: "Flush stderr buffer"
    ))

    specs
