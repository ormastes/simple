import core.regex

fn test_literals():
    println("Testing literals...")
    val p1 = Pattern.new("a")
    assert(p1.matches("a"), "Single char should match")
    assert(p1.matches("b") == false, "Single char should not match different char")

    val p2 = Pattern.new("hello")
    assert(p2.matches("hello"), "Multi-char should match")
    assert(p2.matches("world") == false, "Multi-char should not match different string")
    println("  Literals: PASS")

fn test_char_classes():
    println("Testing character classes...")
    val p1 = Pattern.new("[abc]")
    assert(p1.matches("a"), "[abc] should match a")
    assert(p1.matches("b"), "[abc] should match b")
    assert(p1.matches("c"), "[abc] should match c")
    assert(p1.matches("d") == false, "[abc] should not match d")

    val p2 = Pattern.new("[0-9]")
    assert(p2.matches("5"), "[0-9] should match 5")
    assert(p2.matches("a") == false, "[0-9] should not match a")
    println("  Character classes: PASS")

fn test_alternation():
    println("Testing alternation...")
    val p = Pattern.new("cat|dog")
    assert(p.matches("cat"), "cat|dog should match cat")
    assert(p.matches("dog"), "cat|dog should match dog")
    assert(p.matches("bird") == false, "cat|dog should not match bird")
    println("  Alternation: PASS")

fn test_star():
    println("Testing star quantifier...")
    val p = Pattern.new("a*")
    assert(p.matches(""), "a* should match empty")
    assert(p.matches("a"), "a* should match single a")
    assert(p.matches("aaa"), "a* should match multiple a")
    println("  Star: PASS")

fn test_plus():
    println("Testing plus quantifier...")
    val p = Pattern.new("a+")
    assert(p.matches("") == false, "a+ should not match empty")
    assert(p.matches("a"), "a+ should match single a")
    assert(p.matches("aaa"), "a+ should match multiple a")
    println("  Plus: PASS")

fn test_question():
    println("Testing question quantifier...")
    val p = Pattern.new("a?")
    assert(p.matches(""), "a? should match empty")
    assert(p.matches("a"), "a? should match single a")
    println("  Question: PASS")

fn test_concat():
    println("Testing concatenation...")
    val p = Pattern.new("ab")
    assert(p.matches("ab"), "ab should match ab")
    assert(p.matches("a") == false, "ab should not match a")
    assert(p.matches("b") == false, "ab should not match b")
    println("  Concatenation: PASS")

fn main():
    println("=== Regex Type Detection Tests ===")
    test_literals()
    test_char_classes()
    test_alternation()
    test_star()
    test_plus()
    test_question()
    test_concat()
    println("=== All Tests PASSED ===")
