# SDN Token Types
# Provides token types for lexical analysis

use sdn.error.Span

# SDN token kinds
enum TokenKind:
    # Literals
    Integer(i32)
    Float(f64)
    String(text)
    Bool(bool)
    Null

    # Identifiers
    Identifier(text)

    # Keywords
    Table

    # Operators and punctuation
    Colon        # :
    Equals       # =
    Pipe         # |
    Comma        # ,
    LBrace       # {
    RBrace       # }
    LBracket     # [
    RBracket     # ]
    LParen       # (
    RParen       # )

    # Whitespace-significant
    Newline
    Indent
    Dedent

    # End of file
    Eof

impl TokenKind:
    fn name() -> text:
        match self:
            case Integer(_): return "integer"
            case Float(_): return "float"
            case String(_): return "string"
            case Bool(_): return "bool"
            case Null: return "null"
            case Identifier(_): return "identifier"
            case Table: return "table"
            case Colon: return ":"
            case Equals: return "="
            case Pipe: return "|"
            case Comma: return ","
            case LBrace: return "{"
            case RBrace: return "}"
            case LBracket: return "["
            case RBracket: return "]"
            case LParen: return "("
            case RParen: return ")"
            case Newline: return "newline"
            case Indent: return "INDENT"
            case Dedent: return "DEDENT"
            case Eof: return "EOF"

    fn to_string() -> text:
        return self.name()

    fn is_integer() -> bool:
        match self:
            case Integer(_): return true
            case _: return false

    fn is_float() -> bool:
        match self:
            case Float(_): return true
            case _: return false

    fn is_string() -> bool:
        match self:
            case String(_): return true
            case _: return false

    fn is_bool() -> bool:
        match self:
            case Bool(_): return true
            case _: return false

    fn is_null() -> bool:
        match self:
            case Null: return true
            case _: return false

    fn is_identifier() -> bool:
        match self:
            case Identifier(_): return true
            case _: return false

    fn is_table() -> bool:
        match self:
            case Table: return true
            case _: return false

    fn is_literal() -> bool:
        match self:
            case Integer(_): return true
            case Float(_): return true
            case String(_): return true
            case Bool(_): return true
            case Null: return true
            case _: return false

    fn is_keyword() -> bool:
        match self:
            case Table: return true
            case _: return false

# Token with kind, span, and lexeme
struct Token:
    kind: TokenKind
    span: Span
    lexeme: text

impl Token:
    static fn new(kind: TokenKind, span: Span, lexeme: text) -> Token:
        return Token(kind: kind, span: span, lexeme: lexeme)
