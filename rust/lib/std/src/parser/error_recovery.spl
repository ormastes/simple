# Error Recovery System
# Common programming mistakes from other languages

mod error_recovery

pub enum CommonMistake:
    # Missing punctuation
    MissingCommaInArgs
    MissingCommaInDict
    MissingCommaInStruct
    MissingColonBeforeBlock
    MissingColonInDict
    MissingIndentAfterColon
    WrongIndentLevel
    # Python-style
    PythonDef
    PythonSelf
    PythonNone
    PythonTrue
    PythonFalse
    PythonElif
    # Rust-style
    RustLetMut
    RustFnMut
    RustLifetime
    RustMacro
    RustTurbofish
    # Java/C++ style
    JavaPublicClass
    JavaVoid
    JavaNew
    JavaThis
    CppTemplate
    CppNamespace
    # TypeScript/JavaScript
    TsFunction
    TsConst
    TsLet
    TsInterface
    TsArrowFunction
    # C-style
    CSemicolon
    CTypeFirst
    # Generic mistakes
    MissingColon
    WrongBrackets
    ExplicitSelf
    VerboseReturnType
    SemicolonAfterBlock

impl CommonMistake:
    pub fn message(self) -> text:
        match self:
            case PythonDef: "Use 'fn' to define functions in Simple, not 'def'."
            case PythonNone: "Use 'nil' instead of 'None' in Simple."
            case PythonSelf: "In Simple, 'self' is implicit in methods."
            case PythonTrue: "Use lowercase 'true' instead of 'True'."
            case PythonFalse: "Use lowercase 'false' instead of 'False'."
            case PythonElif: "'elif' is the correct syntax in Simple."
            case RustLetMut: "Use 'var' for mutable variables, 'val' for immutable."
            case RustFnMut: "Use 'me' keyword for mutable methods."
            case RustLifetime: "Simple doesn't use lifetime annotations."
            case RustMacro: "Simple uses '@' for macros, not '!'."
            case RustTurbofish: "Use <T> syntax directly, not ::<T>."
            case JavaPublicClass: "Use 'pub class' or 'pub struct' in Simple."
            case JavaVoid: "Omit return type for void functions."
            case JavaNew: "Use direct construction: Type(field: value)."
            case JavaThis: "Use 'self' instead of 'this'."
            case CppTemplate: "Generic parameters come after the name."
            case CppNamespace: "Use 'mod' for modules."
            case TsFunction: "Use 'fn' to define functions in Simple."
            case TsConst: "Use 'val' for immutable variables in Simple."
            case TsLet: "Use 'val' for immutable or 'var' for mutable variables."
            case TsInterface: "Use 'trait' instead of 'interface'."
            case TsArrowFunction: "Use lambda syntax instead of arrow functions."
            case CSemicolon: "Semicolons are optional in Simple."
            case CTypeFirst: "Type comes after the variable name. Use val x: i32."
            case MissingCommaInArgs: "Missing comma between arguments."
            case MissingCommaInDict: "Missing comma between dict entries."
            case MissingCommaInStruct: "Missing comma between struct fields."
            case MissingColonBeforeBlock: "Missing colon before block body."
            case MissingColonInDict: "Missing colon in dict entry."
            case MissingIndentAfterColon: "Missing indentation after colon."
            case WrongIndentLevel: "Inconsistent indentation level."
            case MissingColon: "Missing colon before function body."
            case WrongBrackets: "Use angle brackets <> for generic types."
            case ExplicitSelf: "The 'self' parameter is implicit."
            case VerboseReturnType: "Return type can be inferred."
            case SemicolonAfterBlock: "Don't use semicolons after blocks."

    pub fn suggestion(self) -> text:
        match self:
            case PythonDef: "Replace 'def' with 'fn'"
            case PythonNone: "Replace 'None' with 'nil'"
            case PythonSelf: "Remove 'self.' prefix (self is implicit)"
            case PythonTrue: "Replace 'True' with 'true'"
            case PythonFalse: "Replace 'False' with 'false'"
            case PythonElif: "'elif' is correct"
            case RustLetMut: "Use 'var' instead of 'let mut'"
            case RustFnMut: "Use 'me' keyword"
            case RustLifetime: "Remove lifetime annotations"
            case RustMacro: "Use '@' for macros instead of '!'"
            case RustTurbofish: "Use <T> instead of ::<T>"
            case JavaPublicClass: "Use 'pub class' or 'pub struct'"
            case JavaVoid: "Omit the return type"
            case JavaNew: "Use direct construction: Type(field: value)"
            case JavaThis: "Use 'self'"
            case CppTemplate: "Use generic syntax: struct Name<T>"
            case CppNamespace: "Use 'mod' instead of 'namespace'"
            case TsFunction: "Replace 'function' with 'fn'"
            case TsConst: "Replace 'const' with 'val'"
            case TsLet: "Use 'val' (immutable) or 'var' (mutable)"
            case TsInterface: "Replace 'interface' with 'trait'"
            case TsArrowFunction: "Use lambda syntax"
            case CSemicolon: "Remove unnecessary semicolons"
            case CTypeFirst: "Use 'val' or 'var' with type after name"
            case MissingCommaInArgs: "Insert comma between arguments"
            case MissingCommaInDict: "Insert comma between dict entries"
            case MissingCommaInStruct: "Insert comma between struct fields"
            case MissingColonBeforeBlock: "Add ':' before the function body"
            case MissingColonInDict: "Insert colon after the key"
            case MissingIndentAfterColon: "Add indentation after colon"
            case WrongIndentLevel: "Fix indentation level"
            case MissingColon: "Add ':' before the function body"
            case WrongBrackets: "Use <> instead of [] for generics"
            case ExplicitSelf: "Remove the 'self' parameter"
            case VerboseReturnType: "Consider omitting return type"
            case SemicolonAfterBlock: "Remove semicolon after block"
