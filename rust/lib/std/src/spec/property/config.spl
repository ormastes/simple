# Property Testing - Configuration
# Feature #897: Configurable iterations and test parameters

module std.spec.property.config:
    use core.option.{Option, Some, None}
    
    # Main property test configuration
    pub struct PropertyConfig:
        # Number of test iterations (default: 100)
        iterations: i64
        
        # Random seed for reproducibility (default: None = random)
        seed: Option<i64>
        
        # Maximum shrinking attempts (default: 100)
        max_shrinks: i64
        
        # Maximum shrinking depth (default: 10)
        max_shrink_depth: i64
        
        # Timeout per iteration in seconds (default: 1.0)
        timeout_per_iteration: f64
        
        # Total timeout in seconds (default: 60.0)
        total_timeout: f64
        
        # Verbose output (default: false)
        verbose: bool
        
        # Fail fast on first failure (default: true)
        fail_fast: bool
    
    impl PropertyConfig:
        # Default configuration
        pub fn default() -> PropertyConfig:
            return PropertyConfig(
                iterations: 100,
                seed: None,
                max_shrinks: 100,
                max_shrink_depth: 10,
                timeout_per_iteration: 1.0,
                total_timeout: 60.0,
                verbose: false,
                fail_fast: true
            )
        
        # Quick tests (fewer iterations for fast feedback)
        pub fn quick() -> PropertyConfig:
            return PropertyConfig(
                iterations: 10,
                seed: None,
                max_shrinks: 10,
                max_shrink_depth: 5,
                timeout_per_iteration: 0.5,
                total_timeout: 10.0,
                verbose: false,
                fail_fast: true
            )
        
        # Thorough tests (more iterations for CI)
        pub fn thorough() -> PropertyConfig:
            return PropertyConfig(
                iterations: 1000,
                seed: None,
                max_shrinks: 500,
                max_shrink_depth: 20,
                timeout_per_iteration: 5.0,
                total_timeout: 600.0,
                verbose: false,
                fail_fast: true
            )
        
        # Builder methods for customization
        pub fn with_iterations(mut self, iterations: i64) -> PropertyConfig:
            self.iterations = iterations
            return self
        
        pub fn with_seed(mut self, seed: i64) -> PropertyConfig:
            self.seed = Some(seed)
            return self
        
        pub fn with_max_shrinks(mut self, max_shrinks: i64) -> PropertyConfig:
            self.max_shrinks = max_shrinks
            return self
        
        pub fn with_timeout(mut self, timeout: f64) -> PropertyConfig:
            self.total_timeout = timeout
            return self
        
        pub fn verbose(mut self) -> PropertyConfig:
            self.verbose = true
            return self
        
        pub fn no_shrinking(mut self) -> PropertyConfig:
            self.max_shrinks = 0
            return self
    
    # Example usage:
    # val config = PropertyConfig.default()
    #     .with_iterations(1000)
    #     .with_seed(42)
    #     .verbose()
    #
    # val config = PropertyConfig.quick()  # Fast tests
    # val config = PropertyConfig.thorough()  # CI tests
