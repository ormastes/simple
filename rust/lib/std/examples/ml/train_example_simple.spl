# ML Infrastructure Example - Simplified Version

import config.{Config, from_dict}

fn main():
    print("\n")
    print("=" * 70)
    print("ML INFRASTRUCTURE EXAMPLE")
    print("=" * 70)

    # Example 1: Configuration
    print("\n[1/3] Configuration System")
    val base_config = {
        "project": "mnist-example",
        "epochs": 10,
        "lr": 0.001
    }

    val cfg = from_dict(base_config)
    print(f"  Project: {cfg.get('project')}")
    print(f"  Epochs: {cfg.get('epochs')}")
    print(f"  Learning rate: {cfg.get('lr')}")

    # Example 2: Direct dict access (simplified)
    print("\n[2/3] Config Access")
    print(f"  Direct dict epochs: {base_config['epochs']}")
    print(f"  Direct dict lr: {base_config['lr']}")

    # Create a new config with overrides
    val merged_config = {
        "project": "mnist-example",
        "epochs": 20,
        "lr": 0.005
    }
    val merged = from_dict(merged_config)
    print(f"  Merged epochs: {merged.get('epochs')}")  # Should be 20
    print(f"  Merged lr: {merged.get('lr')}")  # Should be 0.005

    # Example 3: Done
    print("\n[3/3] Complete")
    print("  All examples ran successfully!")

    print("\n" + "=" * 70)
    print("Example completed!")
    print("=" * 70 + "\n")

main()
