# 81_dsl_trailing_blocks.spl - Macro + trailing blocks = DSL-style

# Combines "DSL-ish" call style + trailing blocks from syntax spec

class Router:
    routes: {str: fn() -> str}

    fn get(path: str, handler: fn() -> str):
        self.routes[path] = handler

var r = Router(routes: {})

r.get "/health", \: "ok"
r.get "/hello", \: "hello"

health = r.routes["/health"]()
hello = r.routes["/hello"]()

print "health={health}"
print "hello={hello}"

main = 0
