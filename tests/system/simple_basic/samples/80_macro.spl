# 80_macro.spl - Macro that generates code

macro define_counter(name: Ident):
    gen_code:
        mut static {name}: i64 = 0

        fn {name}_increment() -> i64:
            {name} = {name} + 1
            return {name}

        fn {name}_reset():
            {name} = 0

define_counter(Requests)

print Requests_increment()
print Requests_increment()
Requests_reset()
print Requests_increment()

main = Requests_increment()
