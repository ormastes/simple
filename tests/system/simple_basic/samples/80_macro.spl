# 80_macro.spl - Macro that generates code

macro define_counter(name: Str const) -> ():
    emit counter_impl:
        static mut counter: i64 = 0

        fn counter_increment() -> i64:
            counter = counter + 1
            return counter

        fn counter_reset():
            counter = 0

define_counter!("Requests")

print counter_increment()
print counter_increment()
counter_reset()
print counter_increment()

main = counter_increment()
