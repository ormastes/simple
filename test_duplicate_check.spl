#!/usr/bin/env simple

use app.duplicate_check.config.{load_config, default_config}
use app.duplicate_check.detector.{collect_files}
use app.io.mod.{shell}
use std.string.{NL}

fn main():
    val config = default_config()
    val path = "src/std"

    print "Testing path: {path}"

    val result = shell("find {path} -name '*.spl' 2>/dev/null || true")
    print "Shell output length: {result.stdout.len()}"
    print "First 500 chars:"
    print result.stdout[0:500]

    print ""
    print "Calling collect_files..."
    val files = collect_files(path, config)
    print "Files collected: {files.len()}"
    if files.len() > 0:
        print "First 5 files:"
        var i = 0
        while i < 5 and i < files.len():
            print "  {files[i]}"
            i = i + 1
