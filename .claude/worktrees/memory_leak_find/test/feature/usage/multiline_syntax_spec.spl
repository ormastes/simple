"""
# Multi-line Syntax Specification


**Feature ID:** #MULTI-001
**Category:** Language | Syntax
**Status:** Implemented

## Overview

Tests for multi-line syntax patterns including function calls spanning
multiple lines, array literals, and continuation lines.

## Syntax

```simple
# Multi-line function call
val result = function_name(
    arg1,
    arg2,
    arg3
)

# Multi-line array
val items = [
    1,
    2,
    3
]

# Line continuation with backslash
val sum = 1 + 2 + \
    3 + 4
```
"""



# ============================================================================
# Multi-line Function Calls
# ============================================================================

describe "Multi-line Function Calls":
    """
    ## Function Calls Spanning Multiple Lines

    Tests for calling functions with arguments on separate lines.
    """

    context "basic multi-line calls":
        it "calls function with arguments on multiple lines":
            fn add(a, b):
                return a + b

            val result = add(
                1,
                2
            )
            expect result == 3

        it "calls function with named arguments on multiple lines":
            fn greet(name, msg):
                return 42

            val result = greet(
                name: "test",
                msg: "hello"
            )
            expect result == 42

    context "nested function calls":
        it "nests function calls on single line":
            fn inner(x):
                return x * 2

            fn outer(a, b):
                return a + b

            expect outer(inner(5), inner(3)) == 16

        it "nests function calls on multiple lines":
            fn inner(x):
                return x * 2

            fn outer(a, b):
                return a + b

            val result = outer(
                inner(5),
                inner(3)
            )
            expect result == 16


# ============================================================================
# Multi-line Arrays and Structs
# ============================================================================

describe "Multi-line Literals":
    """
    ## Array and Struct Literals Spanning Lines

    Tests for multi-line array and struct initialization.
    """

    it "creates multi-line array literal":
        val arr = [
            1,
            2,
            3
        ]
        expect arr[0] + arr[1] + arr[2] == 6

    it "creates multi-line struct initialization":
        struct Config:
            name: str
            value: i64

        fn Config_new(name, value):
            return Config { name: name, value: value }

        val c = Config_new(
            "test",
            42
        )
        expect c.value == 42


# ============================================================================
# Continuation Lines
# ============================================================================

describe "Continuation Lines":
    """
    ## Line Continuation with Implicit Join

    Tests for implicit line continuation inside brackets/parens.
    """

    it "continues function call to next line":
        fn match_exception(a, b, c):
            return 42

        val result = match_exception("ValueError", "some message",
                           "expected")
        expect result == 42

    it "continues call at same indent level":
        fn match_exception(a, b, c):
            return 42

        val result = match_exception("ValueError", "some message",
"expected")
        expect result == 42


# ============================================================================
# Tuple Destructuring
# ============================================================================

describe "Tuple Destructuring in Assignments":
    """
    ## Multi-line Tuple Patterns

    Tests for tuple destructuring assignments.
    """

    it "destructures tuple from array element":
        val arr = [(10, 20)]
        val (a, b) = arr[0]
        expect a + b == 30

    it "accesses tuple elements with dot notation":
        val arr = [(10, 20)]
        expect arr[0].0 + arr[0].1 == 30

    it "destructures nested tuple data":
        val docstrings = [("content", 1), ("other", 2)]
        val (content, line) = docstrings[0]
        expect line == 1
