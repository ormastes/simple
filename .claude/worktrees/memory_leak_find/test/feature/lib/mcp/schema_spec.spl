"""
# MCP Library Schema Tests

**Feature ID:** #MCP-LIB-005
**Category:** Standard Library
**Status:** Active

## Overview

Tests the MCP tool schema system including initialization of core schemas, retrieval of
all tool schemas as a JSON array, and tool count verification. Validates that init_core_schemas
populates the schema registry with the expected 8 core tools (including read_code and
list_files) and that the schema output is valid JSON array format.

## Syntax

```simple
init_core_schemas()
val schemas = get_all_tool_schemas()
expect(schemas).to_start_with("[")
expect(schemas).to_contain("read_code")
expect(get_tool_count()).to_equal(8)
```
"""
# MCP Library Schema Tests

use std.mcp.schema.{get_all_tool_schemas, get_tool_count, init_core_schemas}
use std.sspec

describe("MCP Library - Schema"):
    it("initializes core schemas"):
        init_core_schemas()
        expect(get_tool_count()).to_be_greater_than(0)

    it("gets all tool schemas"):
        init_core_schemas()
        val schemas = get_all_tool_schemas()
        expect(schemas).to_start_with("[")
        expect(schemas).to_end_with("]")
        expect(schemas).to_contain("read_code")
        expect(schemas).to_contain("list_files")

    it("counts tools"):
        init_core_schemas()
        val count = get_tool_count()
        expect(count).to_equal(8)  # Core tools defined in init_core_schemas
