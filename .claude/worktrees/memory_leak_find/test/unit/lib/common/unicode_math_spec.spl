# Tests for std.unicode_math module
# Covers: greek, greek_upper, superscript_char, subscript_char,
#         superscript, subscript, math_sym, math_op, hline,
#         bracket/paren/brace drawing functions

use std.unicode_math.{greek, greek_upper, superscript, subscript}
use std.unicode_math.{superscript_char, subscript_char}
use std.unicode_math.{math_sym, math_op, hline}
use std.unicode_math.{bracket_left_top, bracket_left_mid, bracket_left_bot}
use std.unicode_math.{bracket_right_top, bracket_right_mid, bracket_right_bot}
use std.unicode_math.{paren_left_top, paren_left_mid, paren_left_bot}
use std.unicode_math.{paren_right_top, paren_right_mid, paren_right_bot}
use std.unicode_math.{brace_left_top, brace_left_mid, brace_left_bot}
use std.unicode_math.{brace_right_top, brace_right_mid, brace_right_bot}
use std.unicode_math.{brace_ext}

describe "std.unicode_math":

    describe "greek":
        it "returns alpha symbol":
            expect(greek("alpha")).to_equal("α")

        it "returns omega symbol":
            expect(greek("omega")).to_equal("ω")

        it "returns pi symbol":
            expect(greek("pi")).to_equal("π")

        it "returns beta symbol":
            expect(greek("beta")).to_equal("β")

        it "returns lambda symbol":
            expect(greek("lambda")).to_equal("λ")

        it "returns sigma symbol":
            expect(greek("sigma")).to_equal("σ")

        it "returns varepsilon variant":
            expect(greek("varepsilon")).to_equal("ϵ")

        it "returns varphi variant":
            expect(greek("varphi")).to_equal("ϕ")

        it "returns partial differential symbol":
            expect(greek("partial")).to_equal("∂")

        it "returns nabla symbol":
            expect(greek("nabla")).to_equal("∇")

        it "returns name unchanged for unknown input":
            expect(greek("unknown")).to_equal("unknown")

        it "returns name unchanged for empty string":
            expect(greek("")).to_equal("")

    describe "greek_upper":
        it "returns uppercase Gamma":
            expect(greek_upper("Gamma")).to_equal("Γ")

        it "returns uppercase Sigma":
            expect(greek_upper("Sigma")).to_equal("Σ")

        it "returns uppercase Omega":
            expect(greek_upper("Omega")).to_equal("Ω")

        it "returns uppercase Delta":
            expect(greek_upper("Delta")).to_equal("Δ")

        it "returns uppercase Pi":
            expect(greek_upper("Pi")).to_equal("Π")

        it "returns uppercase Phi":
            expect(greek_upper("Phi")).to_equal("Φ")

        it "returns name unchanged for unknown input":
            expect(greek_upper("Unknown")).to_equal("Unknown")

        it "returns name unchanged for lowercase greek name":
            expect(greek_upper("gamma")).to_equal("gamma")

    describe "superscript_char":
        it "converts digit 0 to superscript":
            expect(superscript_char("0")).to_equal("⁰")

        it "converts digit 1 to superscript":
            expect(superscript_char("1")).to_equal("¹")

        it "converts digit 2 to superscript":
            expect(superscript_char("2")).to_equal("²")

        it "converts digit 3 to superscript":
            expect(superscript_char("3")).to_equal("³")

        it "converts digit 5 to superscript":
            expect(superscript_char("5")).to_equal("⁵")

        it "converts digit 9 to superscript":
            expect(superscript_char("9")).to_equal("⁹")

        it "converts plus to superscript":
            expect(superscript_char("+")).to_equal("⁺")

        it "converts minus to superscript":
            expect(superscript_char("-")).to_equal("⁻")

        it "converts equals to superscript":
            expect(superscript_char("=")).to_equal("⁼")

        it "converts letter n to superscript":
            expect(superscript_char("n")).to_equal("ⁿ")

        it "converts letter i to superscript":
            expect(superscript_char("i")).to_equal("ⁱ")

        it "returns unknown char unchanged":
            expect(superscript_char("z")).to_equal("z")

    describe "subscript_char":
        it "converts digit 0 to subscript":
            expect(subscript_char("0")).to_equal("₀")

        it "converts digit 1 to subscript":
            expect(subscript_char("1")).to_equal("₁")

        it "converts digit 5 to subscript":
            expect(subscript_char("5")).to_equal("₅")

        it "converts digit 9 to subscript":
            expect(subscript_char("9")).to_equal("₉")

        it "converts plus to subscript":
            expect(subscript_char("+")).to_equal("₊")

        it "converts minus to subscript":
            expect(subscript_char("-")).to_equal("₋")

        it "converts equals to subscript":
            expect(subscript_char("=")).to_equal("₌")

        it "converts letter a to subscript":
            expect(subscript_char("a")).to_equal("ₐ")

        it "converts letter e to subscript":
            expect(subscript_char("e")).to_equal("ₑ")

        it "converts letter n to subscript":
            expect(subscript_char("n")).to_equal("ₙ")

        it "converts letter x to subscript":
            expect(subscript_char("x")).to_equal("ₓ")

        it "converts letter i to subscript":
            expect(subscript_char("i")).to_equal("ᵢ")

        it "returns unknown char unchanged":
            expect(subscript_char("z")).to_equal("z")

    describe "superscript":
        it "converts multi-digit string to superscript":
            val result = superscript("23")
            expect(result).to_equal("²³")

        it "converts mixed letters and operators to superscript":
            val result = superscript("n+1")
            expect(result).to_equal("ⁿ⁺¹")

        it "returns empty string for empty input":
            expect(superscript("")).to_equal("")

        it "converts single digit to superscript":
            expect(superscript("2")).to_equal("²")

        it "converts digit sequence 0 through 3":
            val result = superscript("0123")
            expect(result).to_equal("⁰¹²³")

    describe "subscript":
        it "converts multi-digit string to subscript":
            val result = subscript("12")
            expect(result).to_equal("₁₂")

        it "converts mixed letters and operators to subscript":
            val result = subscript("i+1")
            expect(result).to_equal("ᵢ₊₁")

        it "returns empty string for empty input":
            expect(subscript("")).to_equal("")

        it "converts single digit to subscript":
            expect(subscript("0")).to_equal("₀")

        it "converts digit sequence 0 through 3":
            val result = subscript("0123")
            expect(result).to_equal("₀₁₂₃")

    describe "math_sym":
        it "returns sum symbol":
            expect(math_sym("sum")).to_equal("∑")

        it "returns integral symbol":
            expect(math_sym("integral")).to_equal("∫")

        it "returns infinity symbol":
            expect(math_sym("infinity")).to_equal("∞")

        it "returns sqrt symbol":
            expect(math_sym("sqrt")).to_equal("√")

        it "returns forall symbol":
            expect(math_sym("forall")).to_equal("∀")

        it "returns reals double-struck symbol":
            expect(math_sym("reals")).to_equal("ℝ")

        it "returns naturals double-struck symbol":
            expect(math_sym("naturals")).to_equal("ℕ")

        it "returns emptyset symbol":
            expect(math_sym("emptyset")).to_equal("∅")

        it "returns union symbol":
            expect(math_sym("union")).to_equal("∪")

        it "returns product symbol":
            expect(math_sym("product")).to_equal("∏")

        it "returns ellipsis symbol":
            expect(math_sym("ellipsis")).to_equal("…")

        it "returns name unchanged for unknown input":
            expect(math_sym("unknown_sym")).to_equal("unknown_sym")

    describe "math_op":
        it "returns less-than-or-equal symbol":
            expect(math_op("leq")).to_equal("≤")

        it "returns greater-than-or-equal symbol":
            expect(math_op("geq")).to_equal("≥")

        it "returns not-equal symbol":
            expect(math_op("neq")).to_equal("≠")

        it "returns implies arrow":
            expect(math_op("implies")).to_equal("⇒")

        it "returns times symbol":
            expect(math_op("times")).to_equal("×")

        it "returns approx symbol":
            expect(math_op("approx")).to_equal("≈")

        it "returns right arrow":
            expect(math_op("to")).to_equal("→")

        it "returns left arrow":
            expect(math_op("from")).to_equal("←")

        it "returns iff double arrow":
            expect(math_op("iff")).to_equal("⇔")

        it "returns plus-minus symbol":
            expect(math_op("pm")).to_equal("±")

        it "returns name unchanged for unknown input":
            expect(math_op("unknown_op")).to_equal("unknown_op")

    describe "hline":
        it "produces 3-char horizontal line":
            val line = hline(3)
            expect(line.len()).to_equal(3)

        it "produces empty string for width 0":
            expect(hline(0)).to_equal("")

        it "produces 1-char horizontal line":
            val line = hline(1)
            expect(line.len()).to_equal(1)

        it "produces 5-char horizontal line":
            val line = hline(5)
            expect(line.len()).to_equal(5)

    describe "bracket and paren functions":
        it "returns left bracket top piece":
            expect(bracket_left_top()).to_equal("⎡")

        it "returns left bracket mid piece":
            expect(bracket_left_mid()).to_equal("⎢")

        it "returns left bracket bottom piece":
            expect(bracket_left_bot()).to_equal("⎣")

        it "returns right bracket top piece":
            expect(bracket_right_top()).to_equal("⎤")

        it "returns right bracket mid piece":
            expect(bracket_right_mid()).to_equal("⎥")

        it "returns right bracket bottom piece":
            expect(bracket_right_bot()).to_equal("⎦")

        it "returns left paren top piece":
            expect(paren_left_top()).to_equal("⎛")

        it "returns left paren mid piece":
            expect(paren_left_mid()).to_equal("⎜")

        it "returns left paren bottom piece":
            expect(paren_left_bot()).to_equal("⎝")

        it "returns right paren top piece":
            expect(paren_right_top()).to_equal("⎞")

        it "returns right paren mid piece":
            expect(paren_right_mid()).to_equal("⎟")

        it "returns right paren bottom piece":
            expect(paren_right_bot()).to_equal("⎠")

    describe "brace functions":
        it "returns left brace top piece":
            expect(brace_left_top()).to_equal("⎧")

        it "returns left brace mid piece":
            expect(brace_left_mid()).to_equal("⎨")

        it "returns left brace bottom piece":
            expect(brace_left_bot()).to_equal("⎩")

        it "returns right brace top piece":
            expect(brace_right_top()).to_equal("⎫")

        it "returns right brace mid piece":
            expect(brace_right_mid()).to_equal("⎬")

        it "returns right brace bottom piece":
            expect(brace_right_bot()).to_equal("⎭")

        it "returns brace extension piece":
            expect(brace_ext()).to_equal("⎪")
