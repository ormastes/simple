enum CodegenOutputKind:
    ObjectCode
    TextSource
    GpuCode
    InterpretedResult

class CodegenOutput:
    name: text
    kind: CodegenOutputKind
    text_output: text
    has_text_output: bool
    object_code: [i64]
    has_object_code: bool
    compile_time_ms: i64

fn make_text(n: text, s: text) -> CodegenOutput:
    CodegenOutput(name: n, kind: CodegenOutputKind.TextSource, text_output: s, has_text_output: true, object_code: [], has_object_code: false, compile_time_ms: 0)

fn make_obj(n: text, b: [i64]) -> CodegenOutput:
    CodegenOutput(name: n, kind: CodegenOutputKind.ObjectCode, text_output: "", has_text_output: false, object_code: b, has_object_code: true, compile_time_ms: 0)

fn make_gpu(n: text, s: text) -> CodegenOutput:
    CodegenOutput(name: n, kind: CodegenOutputKind.GpuCode, text_output: s, has_text_output: true, object_code: [], has_object_code: false, compile_time_ms: 0)

fn main():
    val a = make_text("m", "code")
    val b = make_obj("n", [1, 2])
    val c = make_gpu("g", "gpu")
    print a.name
    print b.name
    print c.name
    print "codegen smoke test passed"
