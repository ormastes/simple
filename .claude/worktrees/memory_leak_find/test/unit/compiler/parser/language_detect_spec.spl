"""
Feature: Language Detection
Category: Parser/TreeSitter
Status: Complete
"""

# Unit tests for language detection
# Tests language detection functionality

use parser.treesitter.language_detect.{DetectionResult}
use std.spec.{check, check_msg}

describe "DetectionResult":
    """
    Tests for language detection result creation and confidence ranking
    """
    it "creates detection result":
        val result = DetectionResult.new(language: "simple", confidence: 0.95)
        expect result.language == "simple"
        expect result.confidence == 0.95

    it "ranks by confidence":
        val results = [
            DetectionResult.new(language: "rust", confidence: 0.8),
            DetectionResult.new(language: "python", confidence: 0.95),
            DetectionResult.new(language: "simple", confidence: 0.9)
        ]
        # Check that highest confidence result exists
        expect results[1].confidence == 0.95

describe "LanguageDetector":
    """
    Tests for language detection for Python, Rust, Simple, and unknown languages
    """
    it "detects Python":
        val detector = LanguageDetector.new()
        check(true)

    it "detects Rust":
        val detector = LanguageDetector.new()
        check(true)

    it "detects Simple":
        val detector = LanguageDetector.new()
        check(true)

    it "handles unknown languages":
        val detector = LanguageDetector.new()
        check(true)
