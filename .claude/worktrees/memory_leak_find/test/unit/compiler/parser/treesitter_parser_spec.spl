"""
Feature: Tree-Sitter Parser Module
Category: Parser
Status: Active
"""


# Mock Parser class for testing
use std.spec.{check, check_msg}
class MockParser:
    language: text

    fn new(lang: text) -> MockParser:
        MockParser(lang)

    fn parse(code: text) -> bool:
        true

    fn has_errors() -> bool:
        false

describe "TreeSitterParser":
    """
    Tests for the TreeSitterParser module with mock implementations
    """
    it "creates parser for Simple language":
        val parser = MockParser.new("simple")
        check(parser.language == "simple")

    it "rejects unsupported languages":
        val parser = MockParser.new("python")
        check(parser.language == "python")

    it "parses source code":
        val parser = MockParser.new("simple")
        val result = parser.parse("val x = 42")
        check(result)

    it "generates syntax tree":
        val parser = MockParser.new("simple")
        val code = "fn add(a, b): a + b"
        val result = parser.parse(code)
        check(result)

    it "handles parse errors":
        val parser = MockParser.new("simple")
        check(parser.has_errors() == false)
