# Core Simple Language Basics (SSpec)
#
# These tests only use Core Simple syntax/features, but are executed via
# the Simple test runner (SSpec). This keeps coverage visible in
# `simple test` while still validating Core-friendly semantics.

describe "Core Simple Language Basics":
    describe "arithmetic":
        it "handles integer ops":
            expect(2 + 3).to_equal(5)
            expect(10 - 3).to_equal(7)
            expect(4 * 5).to_equal(20)
            expect(15 / 3).to_equal(5)
            expect(7 / 2).to_equal(3)
            expect(17 % 5).to_equal(2)
            expect((-5) + 3).to_equal(-2)
            expect((-4) * -5).to_equal(20)
            expect(20 / -4).to_equal(-5)
            expect((-20) / -4).to_equal(5)

        it "respects precedence and grouping":
            expect(2 + 3 * 4).to_equal(14)
            expect(10 - 3 * 2).to_equal(4)
            expect((2 + 3) * 4).to_equal(20)
            expect(20 - 5 - 3).to_equal(12)
            expect(20 / 4 / 2).to_equal(2)

        it "handles float ops":
            expect(2.5 + 3.5).to_equal(6.0)
            expect(10.5 - 3.2).to_equal(7.3)
            expect(2.5 * 4.0).to_equal(10.0)
            expect(10.0 / 2.0).to_equal(5.0)
            expect(5 + 2.5).to_equal(7.5)

    describe "numeric literals":
        it "parses hex, bin, oct, separators":
            expect(0xFF).to_equal(255)
            expect(0xAb).to_equal(171)
            expect(0b1010).to_equal(10)
            expect(0o10).to_equal(8)
            expect(1_000_000).to_equal(1000000)
            expect(0xFF_FF).to_equal(65535)
            expect(0b1010_1010).to_equal(170)

    describe "comparison":
        it "handles basic comparisons":
            expect(5 > 3).to_equal(true)
            expect(2 < 10).to_equal(true)
            expect(5 == 5).to_equal(true)
            expect(3 != 4).to_equal(true)
            expect(3 <= 3).to_equal(true)
            expect(4 >= 3).to_equal(true)

    describe "strings":
        it "concats and interpolates":
            val s = "Hello" + " " + "World"
            expect(s).to_equal("Hello World")
            val name = "Alice"
            val age = 30
            val msg = "Name: {name}, Age: {age}"
            expect(msg).to_equal("Name: Alice, Age: 30")

    describe "arrays":
        it "indexes arrays":
            val arr = [10, 20, 30, 40, 50]
            expect(arr[0]).to_equal(10)
            expect(arr[2]).to_equal(30)
            expect(arr[2 + 1]).to_equal(40)

    describe "control flow":
        it "handles for loops":
            var sum = 0
            for i in [1, 2, 3, 4, 5]:
                sum = sum + i
            expect(sum).to_equal(15)

        it "handles while loops":
            var count = 0
            var total = 0
            while count < 4:
                total = total + count
                count = count + 1
            expect(total).to_equal(6)

        it "handles if statements":
            var flag = false
            if 2 + 3 == 5:
                flag = true
            expect(flag).to_equal(true)
