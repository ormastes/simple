# MSP430 LaunchPad Board Definition (MSP430G2553)
# 16-bit ultra-low-power microcontroller
#
# Specs:
#   CPU: MSP430G2553 @ 16 MHz
#   Flash: 16 KB
#   SRAM: 512 bytes
#   Power: Ultra-low power modes

board:
    name: "MSP430 LaunchPad (MSP430G2553)"
    arch: "msp430"
    cpu: "msp430g2553"
    target: "msp430-none-elf"
    clock: 16000000  # 16 MHz DCO

memory:
    flash:
        origin: 0xC000
        length: 16K
        permissions: rx

    ram:
        origin: 0x0200
        length: 512
        permissions: rw

    infomem:
        origin: 0x1000
        length: 256
        permissions: rw
        type: info

sections:
    .text:
        memory: flash
        address: 0xC000
        input: ["*(.text*)", "*(.rodata*)"]

    .data:
        memory: ram
        address: 0x0200
        input: ["*(.data*)"]
        load: flash

    .bss:
        memory: ram
        type: nobits
        input: ["*(.bss*)", "*(COMMON)"]

    .stack:
        memory: ram
        size: 128
        direction: down
        end: 0x03FF  # Top of RAM

    .vectors:
        memory: flash
        address: 0xFFE0
        input: ["*(.vectors)"]

# MSP430-specific peripheral addresses
peripherals:
    # Port 1
    P1IN: 0x0020
    P1OUT: 0x0021
    P1DIR: 0x0022
    P1IFG: 0x0023
    P1IES: 0x0024
    P1IE: 0x0025
    P1SEL: 0x0026
    P1REN: 0x0027

    # Port 2
    P2IN: 0x0028
    P2OUT: 0x0029
    P2DIR: 0x002A

    # Timer A
    TA0CTL: 0x0160
    TA0R: 0x0170
    TA0CCR0: 0x0172

    # USCI (Serial)
    UCA0CTL0: 0x0060
    UCA0CTL1: 0x0061
    UCA0BR0: 0x0062
    UCA0BR1: 0x0063
    UCA0TXBUF: 0x0067
    UCA0RXBUF: 0x0066

# Serial configuration
serial:
    port: UCA0
    baud: 9600
    tx_pin: P1.2
    rx_pin: P1.1

entry: __reset_vector
