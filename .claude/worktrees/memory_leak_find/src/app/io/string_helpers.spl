# String Helper Functions - Pure Simple I/O
# Extracted from mod.spl for modularity
# Phase 1.1 - Pure Simple implementations, no FFI needed

# ============================================================================
# String Helper Functions
# ============================================================================

fn hex_to_char(hex_code: i64) -> text:
    """Convert hexadecimal code to character.

    Pure Simple implementation using string formatting.
    Example: hex_to_char(0x41) -> "A"
    """
    if hex_code >= 0 and hex_code <= 127:
        "{hex_code as char}"
    else:
        "\\x{hex_code:x}"

fn byte_to_char(byte: i64) -> text:
    """Convert byte value to character.

    Pure Simple implementation.
    Example: byte_to_char(65) -> "A"
    """
    hex_to_char(byte)

fn char_code(c: text) -> i64:
    """Get numeric code of first character.

    Pure Simple implementation.
    Example: char_code("A") -> 65
    """
    if c.len() == 0:
        0
    else:
        c[0].to_i64()

# ============================================================================
# String Hashing
# ============================================================================

fn text_hash_native(s: text) -> i64:
    """Stub: Use std.string.text_hash() for proper FNV-1a hash.
    This stub provides a simple position-based hash for internal use."""
    var hash = 2166136261
    var i = 0
    while i < s.len():
        hash = (hash xor (i + 1)) * 16777619
        i = i + 1
    hash = hash xor s.len()
    hash

export hex_to_char, byte_to_char, char_code
export text_hash_native
