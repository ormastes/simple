# Pure Simple Data Utilities
#
# Data loading, normalization, and preprocessing
# Zero external dependencies

use std.pure.tensor (PureTensor)

# ============================================================================
# Data Normalization
# ============================================================================

fn normalize(data: [f64]) -> [f64]:
    """Normalize data to [0, 1] range."""
    var min_val = data[0]
    var max_val = data[0]

    for v in data:
        if v < min_val:
            min_val = v
        if v > max_val:
            max_val = v

    val range = max_val - min_val
    var normalized: [f64] = []

    for v in data:
        val norm = if range > 0.0: (v - min_val) / range else: 0.0
        normalized.push(norm)

    normalized

fn standardize(data: [f64]) -> [f64]:
    """Standardize data to mean=0, std=1."""
    var sum = 0.0
    for v in data:
        sum = sum + v
    val mean = sum / data.len()

    var var_sum = 0.0
    for v in data:
        val diff = v - mean
        var_sum = var_sum + diff * diff
    val std = (var_sum / data.len()).sqrt()

    var standardized: [f64] = []
    for v in data:
        val std_val = if std > 0.0: (v - mean) / std else: 0.0
        standardized.push(std_val)

    standardized

# ============================================================================
# Exports
# ============================================================================

export normalize, standardize
