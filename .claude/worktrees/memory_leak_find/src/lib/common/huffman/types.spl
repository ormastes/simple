# Huffman Types Module
# Type definitions and constants for Huffman encoding

# Constants
val HUFFMAN_LEAF_MARKER = 1
val HUFFMAN_INTERNAL_MARKER = 0
val HUFFMAN_MAX_SYMBOLS = 256
val HUFFMAN_BIT_ZERO = "0"
val HUFFMAN_BIT_ONE = "1"

# Tree Node Structure (as tuple)
# Leaf node: (1, symbol, frequency, nil, nil)
# Internal node: (0, -1, frequency, left_node, right_node)

# ============================================================================
# CORE NODE OPERATIONS
# ============================================================================

fn huffman_create_leaf(symbol, frequency):
    """Create a Huffman tree leaf node"""
    (HUFFMAN_LEAF_MARKER, symbol, frequency, nil, nil)

fn huffman_create_internal(left, right):
    """Create a Huffman tree internal node"""
    val left_freq = huffman_get_frequency(left)
    val right_freq = huffman_get_frequency(right)
    val combined_freq = left_freq + right_freq
    (HUFFMAN_INTERNAL_MARKER, -1, combined_freq, left, right)

fn huffman_is_leaf(node):
    """Check if node is a leaf"""
    if node == nil:
        false
    else:
        val marker = node[0]
        marker == HUFFMAN_LEAF_MARKER

fn huffman_get_symbol(node):
    """Get symbol from node (only valid for leaf nodes)"""
    if node == nil:
        -1
    else:
        node[1]

fn huffman_get_frequency(node):
    """Get frequency from node"""
    if node == nil:
        0
    else:
        node[2]

fn huffman_get_left(node):
    """Get left child of internal node"""
    if node == nil:
        nil
    else:
        node[3]

fn huffman_get_right(node):
    """Get right child of internal node"""
    if node == nil:
        nil
    else:
        node[4]
