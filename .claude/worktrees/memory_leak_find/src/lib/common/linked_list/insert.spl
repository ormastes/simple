# Linked List Insertion Functions

# Prepend a value to the front of the list
# Args:
#   value: Value to prepend
#   list: Existing list
# Returns: New list with value at front
fn ll_prepend(value, list):
    (value, list)

# Append a value to the end of the list
# Args:
#   value: Value to append
#   list: Existing list
# Returns: New list with value at end
fn ll_append(value, list):
    if list == nil:
        (value, nil)
    else:
        var arr = ll_to_array(list)
        arr = arr.push(value)
        ll_from_array(arr)

# Insert value at specific index
# Args:
#   list: Linked list
#   index: Zero-based index
#   value: Value to insert
# Returns: New list with value inserted
fn ll_insert(list, index, value):
    if index == 0:
        ll_prepend(value, list)
    else:
        var arr = ll_to_array(list)
        var new_arr = []
        var i = 0
        while i < arr.length():
            if i == index:
                new_arr = new_arr.push(value)
            new_arr = new_arr.push(arr[i])
            i = i + 1
        if index >= arr.length():
            new_arr = new_arr.push(value)
        ll_from_array(new_arr)
