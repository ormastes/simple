# Sorting - Utility Functions

# Array utilities
fn reverse_array(arr: List<i64>) -> List<i64>:
    val len = arr.len()
    var result = []
    var i = len - 1
    while i >= 0:
        val elem = arr.get(i)
        result = result.push(elem)
        i = i - 1
    result

fn reverse_in_place(arr: List<i64>, start: i64, end: i64):
    var left = start
    var right = end
    while left < right:
        val temp = arr.get(left)
        arr.set(left, arr.get(right))
        arr.set(right, temp)
        left = left + 1
        right = right - 1

fn shuffle_fisher_yates(arr: List<i64>, seed: i64) -> List<i64>:
    var result = arr.copy()
    val len = result.len()
    var rng_state = seed

    var i = len - 1
    while i > 0:
        rng_state = (rng_state * 1103515245 + 12345) % 2147483648
        val j = rng_state % (i + 1)

        val temp = result.get(i)
        result.set(i, result.get(j))
        result.set(j, temp)
        i = i - 1
    result

fn min_in_range(arr: List<i64>, start: i64, end: i64) -> i64:
    var min_val = arr.get(start)
    var i = start + 1
    while i <= end:
        val curr = arr.get(i)
        if curr < min_val:
            min_val = curr
        i = i + 1
    min_val

fn max_in_range(arr: List<i64>, start: i64, end: i64) -> i64:
    var max_val = arr.get(start)
    var i = start + 1
    while i <= end:
        val curr = arr.get(i)
        if curr > max_val:
            max_val = curr
        i = i + 1
    max_val

# Algorithm metadata
fn get_sort_stability(sort_name: text) -> bool:
    match sort_name:
        "bubble": true
        "insertion": true
        "merge": true
        "counting": true
        "radix": true
        "bucket": true
        "timsort": true
        "selection": false
        "quicksort": false
        "heapsort": false
        "introsort": false
        _: false

fn get_sort_best_case(sort_name: text) -> text:
    match sort_name:
        "bubble": "O(n)"
        "insertion": "O(n)"
        "selection": "O(n²)"
        "merge": "O(n log n)"
        "quicksort": "O(n log n)"
        "heapsort": "O(n log n)"
        "counting": "O(n + k)"
        "radix": "O(d * n)"
        "bucket": "O(n + k)"
        "timsort": "O(n)"
        "introsort": "O(n log n)"
        _: "Unknown"

fn get_sort_average_case(sort_name: text) -> text:
    match sort_name:
        "bubble": "O(n²)"
        "insertion": "O(n²)"
        "selection": "O(n²)"
        "merge": "O(n log n)"
        "quicksort": "O(n log n)"
        "heapsort": "O(n log n)"
        "counting": "O(n + k)"
        "radix": "O(d * n)"
        "bucket": "O(n + k)"
        "timsort": "O(n log n)"
        "introsort": "O(n log n)"
        _: "Unknown"

fn get_sort_worst_case(sort_name: text) -> text:
    match sort_name:
        "bubble": "O(n²)"
        "insertion": "O(n²)"
        "selection": "O(n²)"
        "merge": "O(n log n)"
        "quicksort": "O(n²)"
        "heapsort": "O(n log n)"
        "counting": "O(n + k)"
        "radix": "O(d * n)"
        "bucket": "O(n²)"
        "timsort": "O(n log n)"
        "introsort": "O(n log n)"
        _: "Unknown"

fn get_sort_space_complexity(sort_name: text) -> text:
    match sort_name:
        "bubble": "O(1)"
        "insertion": "O(1)"
        "selection": "O(1)"
        "merge": "O(n)"
        "quicksort": "O(log n)"
        "heapsort": "O(1)"
        "counting": "O(k)"
        "radix": "O(n + k)"
        "bucket": "O(n + k)"
        "timsort": "O(n)"
        "introsort": "O(log n)"
        _: "Unknown"

fn is_in_place_sort(sort_name: text) -> bool:
    match sort_name:
        "bubble": true
        "insertion": true
        "selection": true
        "quicksort": true
        "heapsort": true
        "introsort": true
        "merge": false
        "counting": false
        "radix": false
        "bucket": false
        "timsort": false
        _: false

export reverse_array, reverse_in_place, shuffle_fisher_yates
export min_in_range, max_in_range
export get_sort_stability, get_sort_best_case, get_sort_average_case
export get_sort_worst_case, get_sort_space_complexity, is_in_place_sort
