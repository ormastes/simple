# Protocol Buffers Utility Functions

# ==============================================================================
# Utility Functions
# ==============================================================================

# Concatenate multiple byte lists
fn concat_bytes(byte_lists: list) -> list:
    var result = []
    var i = 0
    var count = byte_lists.length()
    loop:
        if i >= count:
            break
        var bytes = byte_lists[i]
        result = result + bytes
        i = i + 1
    result

# Compare two messages for equality
fn messages_equal(msg1: list, msg2: list) -> bool:
    var len1 = msg1.length()
    var len2 = msg2.length()
    if len1 != len2:
        return false

    var i = 0
    loop:
        if i >= len1:
            break
        var field1 = msg1[i]
        var field2 = msg2[i]

        if field1[0] != field2[0]:
            return false
        if field1[1] != field2[1]:
            return false
        if field1[2] != field2[2]:
            return false

        i = i + 1

    true

# Clone message (deep copy)
fn clone_message(fields: list) -> list:
    var result = []
    var i = 0
    var count = fields.length()
    loop:
        if i >= count:
            break
        var field = fields[i]
        var field_number = field[0]
        var wire_type = field[1]
        var value = field[2]
        result = result + [(field_number, wire_type, value)]
        i = i + 1
    result
