# ObjectFileView - bridges codegen backend output to linker input
# Carries the object file metadata needed by the linker:
# byte count, exported symbol count, and target triple.

struct ObjectFileView:
    """Object file produced by codegen, ready for linking."""
    object_byte_count: i64
    symbol_count: i64
    target_triple: text
    success: bool

    fn is_empty() -> bool:
        self.object_byte_count == 0

    fn has_symbols() -> bool:
        self.symbol_count > 0

    static fn failed(triple: text) -> ObjectFileView:
        ObjectFileView(
            object_byte_count: 0,
            symbol_count: 0,
            target_triple: triple,
            success: false
        )

    static fn from_codegen(bytes: i64, symbols: i64, triple: text) -> ObjectFileView:
        ObjectFileView(
            object_byte_count: bytes,
            symbol_count: symbols,
            target_triple: triple,
            success: true
        )


# Desugared static methods for bootstrap interpreter compatibility

fn ObjectFileView__failed(triple: text) -> ObjectFileView:
    ObjectFileView(
        object_byte_count: 0,
        symbol_count: 0,
        target_triple: triple,
        success: false
    )



fn None__from_codegen(bytes: i64, symbols: i64, triple: text) -> ObjectFileView:
    ObjectFileView(
        object_byte_count: bytes,
        symbol_count: symbols,
        target_triple: triple,
        success: true
    )


export ObjectFileView
