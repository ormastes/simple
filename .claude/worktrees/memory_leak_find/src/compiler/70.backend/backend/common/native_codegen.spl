# NativeCodegen Trait - Direct Machine Code Generation Interface
#
# Implemented by NativeCodegenAdapter which wraps the ISel/RegAlloc/Encode pipeline.
# Provides the ISel -> RegAlloc -> Encode pipeline interface.

use compiler.mir.mir_data.{MirModule}
use compiler.core.backend_types.{CodegenTarget}
use compiler.backend.native.mach_inst.{MachFunction}

# ============================================================================
# NativeCodegen Trait
# ============================================================================

trait NativeCodegen:
    """Interface for direct machine code generation backends."""
    fn isel(module: MirModule, target: CodegenTarget) -> [MachFunction]
    fn regalloc(funcs: [MachFunction]) -> [MachFunction]
    fn encode(funcs: [MachFunction], target: CodegenTarget) -> [i64]

# ============================================================================
# Exports
# ============================================================================

export NativeCodegen
