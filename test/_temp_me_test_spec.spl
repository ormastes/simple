class Box:
    items: list
    locked: bool
    me add(item):
        self.items = self.items + [item]
    fn count() -> i64:
        self.items.len()
    me lock_it():
        self.locked = true
    fn is_locked() -> bool:
        self.locked

describe "me method test":
    it "persist mutations on val":
        val b = Box(items: [], locked: false)
        b.add("hello")
        expect(b.count()).to_equal(1)
    it "lock mutation persists":
        val b = Box(items: [], locked: false)
        b.lock_it()
        expect(b.is_locked()).to_equal(true)
    it "add then check after lock":
        val b = Box(items: [], locked: false)
        b.add("a")
        b.lock_it()
        expect(b.count()).to_equal(1)
        expect(b.is_locked()).to_equal(true)
