# Simple verification that enum variants with data work

describe "Enum Variant with Data":
    it "creates composite mode":
        val mode_str = "interpreter(remote(baremetal(riscv32)))"
        val has_parens = mode_str.contains("(")
        expect(has_parens).to_equal(true)

    it "creates simple interpreter mode":
        val mode_str = "interpreter"
        val has_parens = mode_str.contains("(")
        expect(has_parens).to_equal(false)

    it "extracts runtime from composite":
        val spec = "interpreter(remote(baremetal(riscv32)))"
        val first_paren = spec.find("(")
        val runtime = spec[0:first_paren]
        expect(runtime).to_equal("interpreter")

    it "detects layers":
        val spec = "interpreter(remote(baremetal(riscv32)))"
        val has_remote = spec.contains("remote")
        val has_baremetal = spec.contains("baremetal")
        val has_riscv = spec.contains("riscv32")
        expect(has_remote).to_equal(true)
        expect(has_baremetal).to_equal(true)
        expect(has_riscv).to_equal(true)
