# Tests for ANSI color utilities
# Testing color code generation and formatting

use sspec (describe, it, assert, assert_eq)
use app.utils.colors

describe "colors":
    it "generates escape character":
        val esc = colors.esc_char()
        assert esc.len() == 1

    it "generates reset code":
        val reset = colors.reset()
        assert reset.contains("[0m")

    it "generates foreground colors":
        val red = colors.red()
        assert red.contains("[31m")

        val green = colors.green()
        assert green.contains("[32m")

    it "generates background colors":
        val bg_red = colors.bg_red()
        assert bg_red.contains("[41m")

    it "wraps text with semantic colors":
        val text = "hello"
        val colored = colors.success(text)
        assert colored.contains(text)
        assert colored.contains("[32m")  # green
        assert colored.contains("[0m")   # reset

    it "strips color codes from text":
        val colored = "{colors.red()}error{colors.reset()}"
        val plain = colors.strip_colors(colored)
        # Should contain "error" without color codes
        assert plain.contains("error")
