#!/usr/bin/env simple
# Direct Bootstrap System Tests
# Simple tests that don't require spec framework

fn test_basic_execution():
    print "✓ Test 1: Basic execution works"

fn test_math():
    val result = 2 + 2
    if result == 4:
        print "✓ Test 2: Math operations work"
    else:
        print "✗ Test 2: Math failed - got {result}"

fn test_string_interpolation():
    val name = "Bootstrap"
    val msg = "Hello, {name}!"
    if msg == "Hello, Bootstrap!":
        print "✓ Test 3: String interpolation works"
    else:
        print "✗ Test 3: String interpolation failed"

fn test_functions():
    fn double(x: i64) -> i64:
        x * 2

    val result = double(21)
    if result == 42:
        print "✓ Test 4: Functions work"
    else:
        print "✗ Test 4: Functions failed"

fn test_loops():
    var sum = 0
    for i in 0..10:
        sum = sum + i

    if sum == 45:
        print "✓ Test 5: Loops work"
    else:
        print "✗ Test 5: Loops failed - sum = {sum}"

fn test_arrays():
    val arr = [1, 2, 3, 4, 5]
    var total = 0
    for x in arr:
        total = total + x

    if total == 15:
        print "✓ Test 6: Arrays work"
    else:
        print "✗ Test 6: Arrays failed"

fn test_classes():
    class Point:
        x: i64
        y: i64

        fn sum() -> i64:
            self.x + self.y

    val p = Point(x: 10, y: 20)
    val result = p.sum()

    if result == 30:
        print "✓ Test 7: Classes work"
    else:
        print "✗ Test 7: Classes failed"

fn test_match():
    val x = 42
    val result = match x:
        case 0: "zero"
        case 42: "answer"
        case _: "other"

    if result == "answer":
        print "✓ Test 8: Pattern matching works"
    else:
        print "✗ Test 8: Pattern matching failed"

fn test_optionals():
    val some_value: i64? = Some(42)
    val none_value: i64? = None

    if some_value.? and not none_value.?:
        print "✓ Test 9: Optionals work"
    else:
        print "✗ Test 9: Optionals failed"

fn test_dictionaries():
    val dict = {"one": 1, "two": 2, "three": 3}
    val value = dict["two"]

    if value == 2:
        print "✓ Test 10: Dictionaries work"
    else:
        print "✗ Test 10: Dictionaries failed"

fn main():
    print "==========================================="
    print "Bootstrap System Direct Tests"
    print "==========================================="
    print ""

    test_basic_execution()
    test_math()
    test_string_interpolation()
    test_functions()
    test_loops()
    test_arrays()
    test_classes()
    test_match()
    test_optionals()
    test_dictionaries()

    print ""
    print "==========================================="
    print "Bootstrap Tests Complete"
    print "==========================================="
