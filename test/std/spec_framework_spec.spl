# SSpec Framework - Self-Test
#
# Tests the built-in test framework matchers.
# Uses only matchers supported by the bootstrap runtime.
#
# Supported: to_equal, to_be, to_be_nil, to_contain,
#            to_start_with, to_end_with,
#            to_be_greater_than, to_be_less_than
#
# No try/catch/throw - Simple does not support exceptions.

# @skip - Uses unsupported keyword: with
use std.spec

describe "SSpec Framework":

    context "describe and context nesting":

        it "runs basic test":
            expect(1 + 1).to_equal(2)

        it "supports nested context":
            expect(true).to_equal(true)

    context "expect() matchers":

        it "to_equal checks equality":
            expect(42).to_equal(42)
            expect("hello").to_equal("hello")

        it "to_be is alias for to_equal":
            expect(10).to_be(10)

        it "to_equal true checks boolean true":
            expect(true).to_equal(true)

        it "to_equal false checks boolean false":
            expect(false).to_equal(false)

        it "to_be_nil checks nil":
            expect(nil).to_be_nil()

        it "to_contain checks string membership":
            expect("hello world").to_contain("world")

        it "to_contain checks array membership":
            expect([1, 2, 3]).to_contain(2)

        it "to_start_with checks prefix":
            expect("hello").to_start_with("hel")

        it "to_end_with checks suffix":
            expect("hello").to_end_with("llo")

        it "to_be_greater_than compares":
            expect(10).to_be_greater_than(5)

        it "to_be_less_than compares":
            expect(5).to_be_less_than(10)

    context "value comparisons":

        it "equality with strings":
            expect("abc").to_equal("abc")

        it "equality with arrays":
            expect([1, 2]).to_equal([1, 2])

        it "nil equality":
            expect(nil).to_be_nil()
            expect(nil).to_equal(nil)
