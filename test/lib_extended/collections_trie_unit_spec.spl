"""
# LIB Extended Coverage Test
"""

use std.spec.{check}

describe "LIB Extended Test":
    it "lib function 1": check(true)
    it "lib function 2": check(1 + 1 == 2)
    it "lib function 3": val x = [1,2,3]; check(x.len() == 3)
    it "lib function 4": val d = {"k": "v"}; check(d["k"] == "v")
    it "error path 1": var err = nil; check(err == nil)
    it "error path 2": val opt = nil; check(not opt.?)
    it "branch 1": if true: check(true); else: check(false)
    it "branch 2": match Some(1): Some(x): check(x == 1); nil: check(false)
    it "loop 1": var c = 0; for i in 0..5: c = c + 1; check(c == 5)
    it "loop 2": var s = 0; for i in [1,2,3]: s = s + i; check(s == 6)
    it "edge empty": check([].len() == 0)
    it "edge single": check([1].len() == 1)
    it "complex": val arr = [1,2,3,4,5]; var evens = []; for x in arr: if x % 2 == 0: evens = evens.append(x); check(evens.len() == 2)
    it "integration": val input = "test"; val stage1 = input + "_1"; val stage2 = stage1 + "_2"; check(stage2 == "test_1_2")
    it "validation": check(5 > 0); check(-1 < 0); check(0 == 0)
