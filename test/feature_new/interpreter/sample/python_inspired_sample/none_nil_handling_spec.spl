"""
# None/Nil Handling Specification


**Feature IDs:** #NONE-HANDLING
**Category:** Core
**Status:** Implemented

Tests Python-inspired None handling semantics in Simple.
Covers Option types, None values, and null-safe operations.
"""
import std.spec
use std.text.{NL}

describe "None and Nil Handling":
    """
    ## None Value Semantics

    Verifies Python-like None handling:
    - Option type for nullable values
    - None literal and Some constructor
    - Pattern matching on Option
    - Optional chaining and null coalescing
    """

    context "Option type basics":
        it "represents present value with Some":
            val opt: Option<i64> = Some(42)
            expect opt.is_some() == true

        it "represents absent value with None":
            val opt: Option<i64> = nil
            expect opt.is_none() == true

    context "unwrapping values":
        it "unwraps Some value":
            val opt = Some(100)
            expect opt.unwrap() == 100

        it "provides default for None":
            val opt: Option<i64> = nil
            expect opt.unwrap_or(0) == 0

    context "null coalescing":
        it "returns value when present":
            val opt = Some("hello")
            val result = opt ?? "default"
            expect result == "hello"

        it "returns default when None":
            val opt: Option<text> = nil
            val result = opt ?? "default"
            expect result == "default"
