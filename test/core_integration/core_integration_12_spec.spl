"""
# CORE Integration Test

**Feature IDs:** #CORE-INT
**Category:** Integration Testing
**Status:** Implemented
"""

use std.spec.{check}

describe "CORE Integration":
    it "lexer to parser":
        val code = "val x = 42"
        check(code.contains("val"))
        
    it "parser to AST":
        val code = "fn foo(): pass"
        check(code.contains("fn"))
        
    it "AST to MIR":
        val code = "x + y"
        check(code.contains("+"))
        
    it "MIR to backend":
        val code = "1 + 2"
        check(code.len() > 0)
        
    it "end-to-end pipeline":
        val input = "test"
        val result = input + "_processed"
        check(result == "test_processed")
        
    it "error recovery":
        var error = nil
        if error == nil:
            check(true)
        else:
            check(false)
            
    it "type checking":
        val x = 5
        check(x > 0)
        
    it "interpreter integration":
        val arr = [1, 2, 3]
        var sum = 0
        for x in arr:
            sum = sum + x
        check(sum == 6)
        
    it "value representation":
        val opt = Some(100)
        check(opt.?)
        check(opt? == 100)
        
    it "environment handling":
        val dict = {"key": "value"}
        check(dict["key"] == "value")
