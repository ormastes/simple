//! Hello World using FFI Runtime
//!
//! This test verifies that the minimal FFI runtime works for basic operations.

import compiler.ffi_minimal as ffi

fn main():
    # Initialize GC
    ffi.gc_init()

    # Create some integer values
    val a = ffi.value_int(10)
    val b = ffi.value_int(5)

    # Test arithmetic
    val sum = ffi.value_add(a, b)
    val diff = ffi.value_sub(a, b)
    val prod = ffi.value_mul(a, b)
    val quot = ffi.value_div(a, b)

    # Print results
    print "10 + 5 = "
    ffi.value_println(sum)

    print "10 - 5 = "
    ffi.value_println(diff)

    print "10 * 5 = "
    ffi.value_println(prod)

    print "10 / 5 = "
    ffi.value_println(quot)

    # Test comparison
    val equal = ffi.value_eq(a, b)
    val less_than = ffi.value_lt(b, a)

    print "10 == 5: {equal}"
    print "5 < 10: {less_than}"

    # Test string creation
    val hello = ffi.value_string("Hello, FFI!".ptr, "Hello, FFI!".len)
    print "String value: "
    ffi.value_println(hello)

    # Clean up
    ffi.value_free(a)
    ffi.value_free(b)
    ffi.value_free(sum)
    ffi.value_free(diff)
    ffi.value_free(prod)
    ffi.value_free(quot)
    ffi.value_free(hello)

    print "FFI Hello World test complete!"
