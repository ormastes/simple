# Guard clause spec
#
# Tests for match guard `if condition` clauses (Phase 7c)

describe "guard clauses in match":
    it "guard filters match arm":
        val x = 10
        val result = match x:
            case 10 if x > 5: "big ten"
            case 10: "small ten"
            case _: "other"
        expect(result).to_equal("big ten")

    it "guard false skips arm falls through":
        val x = 3
        val result = match x:
            case 3 if x > 5: "big"
            case _: "small"
        expect(result).to_equal("small")

    it "guard with complex condition":
        val n = 42
        val threshold = 40
        val result = match n:
            case 42 if n > threshold: "above threshold"
            case _: "below"
        expect(result).to_equal("above threshold")

    it "guard with else fallthrough":
        val x = 7
        val result = match x:
            case 7 if x < 5: "small seven"
            case 7: "seven"
            case _: "other"
        expect(result).to_equal("seven")
