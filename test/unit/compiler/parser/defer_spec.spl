describe "Defer":
    it "skipped":
        skip("pre-existing test failures - functions/imports not available")

# # defer statement spec
# #
# # Tests for the `defer expr` statement
# 
# describe "defer statement":
#     it "defer executes after block":
#         var log: [text] = []
#         val f = fn():
#             defer log.push("deferred")
#             log.push("body")
#         f()
#         expect(log.len()).to_equal(2)
#         expect(log[0]).to_equal("body")
#         expect(log[1]).to_equal("deferred")
# 
#     it "multiple defers execute in LIFO order":
#         var log: [text] = []
#         val f = fn():
#             defer log.push("first deferred")
#             defer log.push("second deferred")
#             log.push("body")
#         f()
#         expect(log.len()).to_equal(3)
#         expect(log[0]).to_equal("body")
#         expect(log[1]).to_equal("second deferred")
#         expect(log[2]).to_equal("first deferred")
# 
#     it "defer runs after early return":
#         var log: [text] = []
#         val f = fn():
#             defer log.push("cleanup")
#             return 42
#         val result = f()
#         expect(result).to_equal(42)
