# Unit Test: Multi-line Boolean Expressions with Parentheses
#
# Tests that boolean expressions can span multiple lines when wrapped in
# round parentheses. This verifies the lexer suppresses newline tokens
# inside parentheses (lex_paren_depth > 0).
# Note: Tests behavioral correctness, not lexer internals.

describe "Multi-line Boolean Expressions with Parentheses":
    it "suppresses newlines inside round parentheses":
        val a = true
        val b = true
        val result = (a and
            b)
        expect(result).to_equal(true)

    it "suppresses newlines for complex boolean expressions":
        val a = true
        val b = true
        val c = true
        val d = true
        val result = (a and
            b and
            c or
            d)
        expect(result).to_equal(true)

    it "square brackets do not suppress newlines":
        # Items in arrays work with newlines too (commas separate)
        val arr = [1,
            2,
            3]
        expect(arr.len()).to_equal(3)
        expect(arr[0]).to_equal(1)

    it "suppresses indentation inside round parentheses":
        val a = true
        val b = true
        val result = if (a and
                b):
            "yes"
        else:
            "no"
        expect(result).to_equal("yes")

    it "handles nested parentheses correctly":
        val a = true
        val b = false
        val c = true
        val result = ((a and
            b) or
            c)
        expect(result).to_equal(true)

    it "handles multi-line function calls with parentheses":
        fn add3(x: i64, y: i64, z: i64) -> i64:
            x + y + z
        val result = add3(
            1,
            2,
            3)
        expect(result).to_equal(6)
