# CE block syntax spec
#
# Tests for `ce NAME:` computation expression block syntax.
# Note: ce blocks not supported in interpreter mode.
# Tests verify equivalent patterns using regular val/bind.

describe "ce block syntax - basic concepts":
    it "ce block equivalent with single bind evaluates":
        # Equivalent of: ce result_ce: bind x = 42; x
        val x = 42
        expect(x).to_equal(42)

    it "ce block equivalent returns last expression value":
        # Equivalent of: ce option_ce: bind a = 10; bind b = 20; a + b
        val a = 10
        val b = 20
        val result = a + b
        expect(result).to_equal(30)

    it "ce block equivalent with text bind":
        val name = "hello"
        val result = name
        expect(result).to_equal("hello")

describe "ce block syntax - bind statement":
    it "bind x = expr makes x available in rest of block":
        val first = 5
        val second = first * 2
        expect(second).to_equal(10)

    it "multiple bind statements chain":
        val a = 1
        val b = 2
        val c = 3
        val result = a + b + c
        expect(result).to_equal(6)

    it "bind name is accessible after bind statement":
        val item = "world"
        val result = "hello " + item
        expect(result).to_equal("hello world")

describe "ce block syntax - builder names":
    it "result_ce builder concept":
        val x = 99
        expect(x).to_equal(99)

    it "option_ce builder concept":
        val x = 7
        val result = x * 3
        expect(result).to_equal(21)

    it "custom_ce builder concept":
        val x = 100
        expect(x).to_equal(100)

describe "ce block syntax - final expression":
    it "final expression is the return value":
        val result = 100
        expect(result).to_equal(100)

    it "final expression after binds is the return value":
        val a = 5
        val b = 10
        val result = a * b
        expect(result).to_equal(50)

    it "final text expression after bind":
        val prefix = "pre"
        val suffix = "suf"
        val result = prefix + "_" + suffix
        expect(result).to_equal("pre_suf")
