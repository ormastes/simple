use compiler.dependency.macro_import.{
    SymKind, MacroSymbol, MacroExports
}

# Helper function to create test exports
fn make_exports() -> MacroExports:
    var exports = MacroExports.new()
    exports.add_non_macro(MacroSymbol.value_sym("mod", "foo"))
    exports.add_non_macro(MacroSymbol.value_sym("mod", "bar"))
    exports.add_macro(MacroSymbol.macro_sym("mod", "my_macro"))
    exports.add_macro(MacroSymbol.macro_sym("mod", "other_macro"))
    exports

describe "SymKind":
    """
    Symbol kind distinguishes macros from other symbols.
    """
    context "predicates":
        it "Macro is_macro returns true":
            val kind = SymKind.MacroKind
            expect kind.is_macro()

        it "ValueOrType is_macro returns false":
            val kind = SymKind.ValueOrType
            expect not kind.is_macro()

describe "MacroSymbol basic":
    it "creates value symbol":
        val sym = MacroSymbol.value_sym("mod", "foo")
        val sym_kind = sym.get_kind()
        expect not sym_kind.is_macro()
