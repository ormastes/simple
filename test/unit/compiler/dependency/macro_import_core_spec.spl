describe "Macro Import Core":
    it "skipped":
        skip("pre-existing test failures - functions/imports not available")

# # Core functionality tests for macro auto-import
# 
# use compiler.dependency.macro_import.{
#     SymKind, MacroSymbol, AutoImport, MacroExports, MacroDirManifest
# }
# 
# describe "SymKind":
#     context "predicates":
#         it "MacroKind is_macro returns true":
#             val kind = SymKind.MacroKind
#             expect kind.is_macro()
# 
#         it "ValueOrType is_macro returns false":
#             val kind = SymKind.ValueOrType
#             expect not kind.is_macro()
# 
#     context "to_string":
#         it "MacroKind to_string":
#             val kind = SymKind.MacroKind
#             expect kind.to_string() == "Macro"
# 
#         it "ValueOrType to_string":
#             val kind = SymKind.ValueOrType
#             expect kind.to_string() == "ValueOrType"
# 
# describe "MacroSymbol":
#     context "construction":
#         it "creates with explicit kind":
#             val sym = MacroSymbol.new("mod", "foo", SymKind.ValueOrType)
#             val sym_module = sym.get_module_path()
#             val sym_name = sym.get_name()
#             val sym_kind = sym.get_kind()
# 
#             expect sym_module == "mod"
#             expect sym_name == "foo"
#             expect not sym_kind.is_macro()
# 
#         it "value_sym creates ValueOrType":
#             val sym = MacroSymbol.value_sym("mod", "bar")
#             val sym_kind = sym.get_kind()
#             expect not sym_kind.is_macro()
# 
#         it "macro_sym creates MacroKind":
#             val sym = MacroSymbol.macro_sym("mod", "my_macro")
#             val sym_kind = sym.get_kind()
#             expect sym_kind.is_macro()
# 
#     context "getters":
#         it "get_module_path returns module":
#             val sym = MacroSymbol.value_sym("test_mod", "foo")
#             expect sym.get_module_path() == "test_mod"
# 
#         it "get_name returns name":
#             val sym = MacroSymbol.value_sym("mod", "test_name")
#             expect sym.get_name() == "test_name"
# 
#         it "get_kind returns kind":
#             val sym = MacroSymbol.macro_sym("mod", "foo")
#             val kind = sym.get_kind()
#             expect kind.is_macro()
# 
#     context "equality":
#         it "equal symbols":
#             val sym1 = MacroSymbol.value_sym("mod", "foo")
#             val sym2 = MacroSymbol.value_sym("mod", "foo")
#             expect sym1.equals(sym2)
# 
#         it "different modules":
#             val sym1 = MacroSymbol.value_sym("mod1", "foo")
#             val sym2 = MacroSymbol.value_sym("mod2", "foo")
#             expect not sym1.equals(sym2)
# 
#         it "different names":
#             val sym1 = MacroSymbol.value_sym("mod", "foo")
#             val sym2 = MacroSymbol.value_sym("mod", "bar")
#             expect not sym1.equals(sym2)
# 
#         it "different kinds":
#             val sym1 = MacroSymbol.value_sym("mod", "foo")
#             val sym2 = MacroSymbol.macro_sym("mod", "foo")
#             expect not sym1.equals(sym2)
# 
# describe "AutoImport":
#     context "construction":
#         it "creates auto-import":
#             val ai = AutoImport.new("mod", "my_macro")
#             val ai_module = ai.get_from_module()
#             val ai_macro = ai.get_macro_name()
# 
#             expect ai_module == "mod"
#             expect ai_macro == "my_macro"
# 
#     context "getters":
#         it "get_from_module":
#             val ai = AutoImport.new("test_mod", "macro1")
#             expect ai.get_from_module() == "test_mod"
# 
#         it "get_macro_name":
#             val ai = AutoImport.new("mod", "test_macro")
#             expect ai.get_macro_name() == "test_macro"
# 
#     context "equality":
#         it "equal auto-imports":
#             val ai1 = AutoImport.new("mod", "macro1")
#             val ai2 = AutoImport.new("mod", "macro1")
#             expect ai1.equals(ai2)
# 
#         it "different modules":
#             val ai1 = AutoImport.new("mod1", "macro1")
#             val ai2 = AutoImport.new("mod2", "macro1")
#             expect not ai1.equals(ai2)
# 
#         it "different macro names":
#             val ai1 = AutoImport.new("mod", "macro1")
#             val ai2 = AutoImport.new("mod", "macro2")
#             expect not ai1.equals(ai2)
# 
# describe "MacroExports":
#     context "construction":
#         it "creates empty":
#             val exports = MacroExports.new()
#             expect exports.non_macros.len() == 0
#             expect exports.macros.len() == 0
# 
#     context "adding symbols":
#         it "add_non_macro":
#             var exports = MacroExports.new()
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "foo"))
#             expect exports.non_macros.len() == 1
#             expect exports.macros.len() == 0
# 
#         it "add_macro":
#             var exports = MacroExports.new()
#             exports.add_macro(MacroSymbol.macro_sym("mod", "my_macro"))
#             expect exports.non_macros.len() == 0
#             expect exports.macros.len() == 1
# 
#         it "add categorizes correctly":
#             var exports = MacroExports.new()
#             exports.add(MacroSymbol.value_sym("mod", "foo"))
#             exports.add(MacroSymbol.macro_sym("mod", "my_macro"))
# 
#             expect exports.non_macros.len() == 1
#             expect exports.macros.len() == 1
# 
#         it "multiple non-macros":
#             var exports = MacroExports.new()
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "foo"))
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "bar"))
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "baz"))
#             expect exports.non_macros.len() == 3
# 
#         it "multiple macros":
#             var exports = MacroExports.new()
#             exports.add_macro(MacroSymbol.macro_sym("mod", "m1"))
#             exports.add_macro(MacroSymbol.macro_sym("mod", "m2"))
#             expect exports.macros.len() == 2
# 
#     context "well-formedness":
#         it "empty is well-formed":
#             val exports = MacroExports.new()
#             expect exports.is_well_formed()
# 
#         it "only non-macros is well-formed":
#             var exports = MacroExports.new()
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "foo"))
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "bar"))
#             expect exports.is_well_formed()
# 
#         it "only macros is well-formed":
#             var exports = MacroExports.new()
#             exports.add_macro(MacroSymbol.macro_sym("mod", "m1"))
#             exports.add_macro(MacroSymbol.macro_sym("mod", "m2"))
#             expect exports.is_well_formed()
# 
#         it "mixed is well-formed":
#             var exports = MacroExports.new()
#             exports.add_non_macro(MacroSymbol.value_sym("mod", "foo"))
#             exports.add_macro(MacroSymbol.macro_sym("mod", "my_macro"))
#             expect exports.is_well_formed()
# 
#         it "macro in non-macros is not well-formed":
#             var exports = MacroExports.new()
#             exports.non_macros.push(MacroSymbol.macro_sym("mod", "bad"))
#             expect not exports.is_well_formed()
# 
#         it "value in macros is not well-formed":
#             var exports = MacroExports.new()
#             exports.macros.push(MacroSymbol.value_sym("mod", "bad"))
#             expect not exports.is_well_formed()
# 
# describe "MacroDirManifest":
#     context "construction":
#         it "creates empty":
#             val manifest = MacroDirManifest.new("test")
#             expect manifest.name == "test"
#             expect manifest.auto_imports.len() == 0
# 
#         it "preserves name":
#             val manifest = MacroDirManifest.new("my_directory")
#             expect manifest.name == "my_directory"
# 
#     context "adding auto-imports":
#         it "add_auto_import single":
#             var manifest = MacroDirManifest.new("test")
#             manifest.add_auto_import(AutoImport.new("mod", "my_macro"))
#             expect manifest.auto_imports.len() == 1
# 
#         it "add_auto_import multiple":
#             var manifest = MacroDirManifest.new("test")
#             manifest.add_auto_import(AutoImport.new("mod1", "macro1"))
#             manifest.add_auto_import(AutoImport.new("mod2", "macro2"))
#             manifest.add_auto_import(AutoImport.new("mod3", "macro3"))
#             expect manifest.auto_imports.len() == 3
