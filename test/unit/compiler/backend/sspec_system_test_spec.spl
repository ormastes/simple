# # SSpec System Test
#
# **Category:** Test Framework Verification
# **Status:** Complete
#
# Tests to verify the SSpec framework itself is working properly.


# ============================================================
# BASIC SSPEC FEATURES
# ============================================================

describe "SSpec - Basic Assertions":
    it "passes with true assertion":
        expect true

    it "passes with equality check":
        expect 2 + 2 == 4

    it "passes with string equality":
        expect "hello" == "hello"

    it "passes with array length":
        val arr = [1, 2, 3]
        expect arr.len() == 3

describe "SSpec - Variables and Computation":
    it "evaluates arithmetic correctly":
        val x = 10
        val y = 20
        val z = x + y
        expect z == 30

    it "works with strings":
        val name = "Alice"
        expect name.len() == 5

    it "works with arrays":
        val numbers = [1, 2, 3, 4, 5]
        expect numbers.len() == 5
        expect numbers[0] == 1
        expect numbers[4] == 5

describe "SSpec - Data Structures":
    it "handles simple classes":
        class Point:
            x: i32
            y: i32

        val p = Point(x: 10, y: 20)
        expect p.x == 10
        expect p.y == 20

    it "handles arrays of classes":
        class Item:
            name: text
            count: i32

        var items: [Item] = []
        items.push(Item(name: "apple", count: 5))
        items.push(Item(name: "banana", count: 3))

        expect items.len() == 2
        expect items[0].count == 5

describe "SSpec - Control Flow":
    it "supports if statements":
        val x = 42
        var result = 0
        if x > 40:
            result = 1
        else:
            result = 2
        expect result == 1

    it "supports loops":
        var sum = 0
        for i in [1, 2, 3, 4, 5]:
            sum = sum + i
        expect sum == 15

describe "SSpec - Function Calls":
    fn add(a: i32, b: i32) -> i32:
        a + b

    fn multiply(a: i32, b: i32) -> i32:
        a * b

    it "calls functions correctly":
        val result = add(10, 20)
        expect result == 30

    it "chains function calls":
        val result = add(multiply(2, 3), 4)
        expect result == 10

# ============================================================
# SSPEC CONTEXT BLOCKS
# ============================================================

describe "SSpec - Context Blocks":
    context "when testing math":
        it "adds numbers":
            expect 5 + 3 == 8

        it "subtracts numbers":
            expect 10 - 3 == 7

    context "when testing strings":
        it "concatenates strings":
            val s = "hello" + " " + "world"
            expect s.len() == 11

# ============================================================
# COMPREHENSIVE INTEGRATION
# ============================================================

describe "SSpec - Integration Test":
    class Calculator:
        value: i32

        me add(n: i32):
            self.value = self.value + n

        me subtract(n: i32):
            self.value = self.value - n

        fn get_value() -> i32:
            self.value

    it "runs complete calculator workflow":
        val calc = Calculator(value: 0)
        calc.add(10)
        calc.add(5)
        expect calc.get_value() == 15

        calc.subtract(3)
        expect calc.get_value() == 12

# ============================================================
# ENUMERATION TESTS
# ============================================================

describe "SSpec - Enumerations":
    enum Color:
        Red
        Green
        Blue

    it "creates enum values":
        val c = Color.Red
        # Just verify it runs without error
        expect true

    it "uses enums in collections":
        var colors: [Color] = []
        colors.push(Color.Red)
        colors.push(Color.Blue)
        expect colors.len() == 2
