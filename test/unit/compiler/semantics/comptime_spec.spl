describe "Comptime":
    describe "comptime fn":
        it "comptime fn is callable as a regular function":
            comptime fn platform_bits() -> i64: 64
            val bits = platform_bits()
            expect(bits).to_equal(64)

        it "comptime fn result is usable in expressions":
            comptime fn base_size() -> i64: 8
            val total = base_size() * 4
            expect(total).to_equal(32)

        it "comptime fn with parameters works":
            comptime fn ct_add(a: i64, b: i64) -> i64: a + b
            val result = ct_add(10, 5)
            expect(result).to_equal(15)

    describe "comptime: block":
        it "comptime block runs at load time":
            var ct_executed = false
            comptime:
                ct_executed = true
            expect(ct_executed).to_equal(true)

        it "comptime block can compute values":
            var ct_val = 0
            comptime:
                ct_val = 6 * 7
            expect(ct_val).to_equal(42)

    describe "comptime with static_for":
        it "static_for inside comptime block":
            var ct_sum = 0
            comptime:
                static_for i in [1, 2, 3]:
                    ct_sum = ct_sum + i
            expect(ct_sum).to_equal(6)
