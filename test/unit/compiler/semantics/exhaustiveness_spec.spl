# Exhaustiveness checking spec
#
# Tests that the interpreter warns about non-exhaustive match expressions

describe "exhaustiveness checking":
    it "exhaustive match with wildcard succeeds":
        val x = 5
        val result = match x:
            case 5: "five"
            case _: "other"
        expect(result).to_equal("five")

    it "match with all cases covered works":
        val y = true
        val result = match y:
            case true: "yes"
            case false: "no"
        expect(result).to_equal("yes")

    it "or-pattern covers multiple cases":
        val z = 2
        val result = match z:
            case 1 | 2 | 3: "small"
            case _: "big"
        expect(result).to_equal("small")

    it "match with nil coverage works":
        val opt = nil
        val result = match opt:
            case nil: "none"
            case _: "some"
        expect(result).to_equal("none")

    it "guard prevents false match fallthrough":
        val n = 10
        val result = match n:
            case 10 if n > 100: "impossible"
            case _: "correct"
        expect(result).to_equal("correct")
