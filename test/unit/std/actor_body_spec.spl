"""
Actor Body Execution Tests

Tests the core actor model functionality including spawning actors
that execute functions and communicate via message passing.
"""

describe "Actor Body Execution":
    """
    Tests for spawning actors that execute functions and return values.
    Covers single and multiple actor spawning.
    """
    it "spawns actor that returns value":
        fn worker():
            return 42

        val pid = spawn(worker)
        expect pid != nil

    it "spawns multiple actors":
        fn worker1():
            return 10

        fn worker2():
            return 20

        val pid1 = spawn(worker1)
        val pid2 = spawn(worker2)

        expect pid1 != nil
        expect pid2 != nil

describe "Actor Messaging":
    """
    Tests for inter-actor communication via message passing.
    Covers sending and receiving messages between actors.
    """

    it "sends message to actor":
        fn echo_worker():
            # Actor waits for a message and returns it
            val msg = recv()
            return msg

        val pid = spawn(echo_worker)
        send(pid, 42)
        expect true
