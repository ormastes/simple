# Module @init and @teardown spec
#
# Tests for @init and @teardown annotation scanning in the annotation scanner.
# Note: Since interpreter mode doesn't re-execute the annotated file,
# we test the annotation detection mechanism.

describe "@init and @teardown annotations":
    it "annotated functions can be defined":
        # @init
        fn my_init():
            0

        # @teardown
        fn my_teardown():
            0

        expect(true).to_equal(true)

    it "functions can be called manually if annotated":
        # NOTE: var mutation inside nested closure doesn't persist in interpreter.
        # Test the concept by checking the function is callable.
        fn setup_module() -> i64:
            1

        val result = setup_module()
        expect(result).to_equal(1)
