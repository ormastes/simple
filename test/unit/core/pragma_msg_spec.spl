# pragma_msg Built-in â€” Tests
#
# pragma_msg(expr) prints its argument at eval time as a compile-time diagnostic.
# Implementation: eval_builtin_call() in src/core/interpreter/eval.spl

describe "pragma_msg built-in":
    it "pragma_msg is callable with a text argument":
        val result = pragma_msg("hello from pragma_msg")
        expect(result).to_be_nil()

    it "pragma_msg is callable with an integer argument":
        val result = pragma_msg(42)
        expect(result).to_be_nil()

    it "pragma_msg is callable with a boolean argument":
        val result = pragma_msg(true)
        expect(result).to_be_nil()

    it "pragma_msg returns nil":
        val r = pragma_msg("test value")
        expect(r).to_be_nil()

    it "pragma_msg with string interpolation":
        val name = "world"
        val result = pragma_msg("hello {name}")
        expect(result).to_be_nil()

    it "pragma_msg with arithmetic expression":
        val result = pragma_msg(1 + 2)
        expect(result).to_be_nil()

    it "pragma_msg can be called multiple times":
        pragma_msg("first")
        pragma_msg("second")
        pragma_msg("third")
        expect(true).to_equal(true)
