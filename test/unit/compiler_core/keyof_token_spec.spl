# Tests for TOK_KW_KEYOF = 200 in src/core/tokens.spl
use compiler_core.tokens.*

describe "core.tokens keyof":
    describe "TOK_KW_KEYOF constant":
        it "has value 200":
            expect(TOK_KW_KEYOF).to_equal(200)

        it "is distinct from TOK_KW_DYN":
            expect(TOK_KW_KEYOF).to_equal(TOK_KW_DYN + 1)

    describe "keyword_lookup keyof":
        it "recognizes 'keyof' as TOK_KW_KEYOF":
            expect(keyword_lookup("keyof")).to_equal(TOK_KW_KEYOF)

        it "does not confuse 'keyof' with TOK_IDENT":
            val result = keyword_lookup("keyof")
            expect(result).to_equal(200)

        it "does not recognize partial match 'key' as keyof":
            expect(keyword_lookup("key")).to_equal(TOK_IDENT)

        it "does not recognize 'keyofx' as keyof":
            expect(keyword_lookup("keyofx")).to_equal(TOK_IDENT)

    describe "tok_kind_name keyof":
        it "maps TOK_KW_KEYOF to 'keyof'":
            expect(tok_kind_name(TOK_KW_KEYOF)).to_equal("keyof")

        it "maps TOK_KW_KEYOF to 'keyof' by value 200":
            expect(tok_kind_name(200)).to_equal("keyof")
