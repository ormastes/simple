# Logger - Core Logging API Tests

describe "Logger":

    describe "log levels":
        it "defines all standard log levels":
            expect(LOG_TRACE).to_equal(0)
            expect(LOG_DEBUG).to_equal(1)
            expect(LOG_INFO).to_equal(2)
            expect(LOG_WARN).to_equal(3)
            expect(LOG_ERROR).to_equal(4)
            expect(LOG_FATAL).to_equal(5)
            expect(LOG_OFF).to_equal(6)

    describe "level names":
        it "returns correct names":
            expect(log_level_name(LOG_TRACE)).to_equal("TRACE")
            expect(log_level_name(LOG_DEBUG)).to_equal("DEBUG")
            expect(log_level_name(LOG_INFO)).to_equal("INFO")
            expect(log_level_name(LOG_WARN)).to_equal("WARN")
            expect(log_level_name(LOG_ERROR)).to_equal("ERROR")
            expect(log_level_name(LOG_FATAL)).to_equal("FATAL")
            expect(log_level_name(99)).to_equal("UNKNOWN")

    describe "initialization":
        it "sets level and targets":
            log_init(LOG_DEBUG, 3)
            expect(g_log_level).to_equal(LOG_DEBUG)
            expect(g_log_targets).to_equal(3)

        it "changes level at runtime":
            log_init(LOG_INFO, 1)
            log_set_level(LOG_TRACE)
            expect(g_log_level).to_equal(LOG_TRACE)

        it "changes targets at runtime":
            log_init(LOG_INFO, 1)
            log_set_targets(7)
            expect(g_log_targets).to_equal(7)

    describe "level filtering":
        it "filters messages below current level":
            log_init(LOG_WARN, 1)
            # These should be filtered (below WARN)
            log_trace("should not appear")
            log_debug("should not appear")
            log_info("should not appear")
            # These should pass
            log_warn("warning message")
            log_error("error message")
            log_fatal("fatal message")

    describe "target constants":
        it "defines target bitmask values":
            expect(TARGET_DEVICE).to_equal(1)
            expect(TARGET_SEMIHOST).to_equal(2)
            expect(TARGET_HOST_FILE).to_equal(4)
