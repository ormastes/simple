# Unit Tests â€” std.traits Module
#
# Smoke tests for the traits library Layer 3 wrapper functions.
# Tests basic type classification and helper functions.

use std.spec.{describe, it, expect}
use std.traits.{
    field_count, has_field, has_method,
    is_integral_type, is_float_type, is_numeric_type,
    is_text_type, is_bool_type,
    is_array_type, is_dict_type
}

describe("std.traits":
    it("field_count returns i64":
        val count = field_count("anything")
        expect(count >= 0).to_equal(true)
    )

    it("field_count('Point') placeholder returns 0":
        val count = field_count("Point")
        expect(count).to_equal(0)
    )

    it("has_field returns false for unknown types":
        val result = has_field("Config", "missing")
        expect(result).to_equal(false)
    )

    it("has_method returns false for unknown types":
        val result = has_method("Config", "connect")
        expect(result).to_equal(false)
    )

    it("is_integral_type('i64') returns true":
        val result = is_integral_type("i64")
        expect(result).to_equal(true)
    )

    it("is_integral_type('i32') returns true":
        val result = is_integral_type("i32")
        expect(result).to_equal(true)
    )

    it("is_integral_type('u64') returns true":
        val result = is_integral_type("u64")
        expect(result).to_equal(true)
    )

    it("is_integral_type('text') returns false":
        val result = is_integral_type("text")
        expect(result).to_equal(false)
    )

    it("is_integral_type('f64') returns false":
        val result = is_integral_type("f64")
        expect(result).to_equal(false)
    )

    it("is_float_type('f64') returns true":
        val result = is_float_type("f64")
        expect(result).to_equal(true)
    )

    it("is_float_type('f32') returns true":
        val result = is_float_type("f32")
        expect(result).to_equal(true)
    )

    it("is_float_type('i64') returns false":
        val result = is_float_type("i64")
        expect(result).to_equal(false)
    )

    it("is_numeric_type('i64') returns true":
        val result = is_numeric_type("i64")
        expect(result).to_equal(true)
    )

    it("is_numeric_type('f64') returns true":
        val result = is_numeric_type("f64")
        expect(result).to_equal(true)
    )

    it("is_numeric_type('text') returns false":
        val result = is_numeric_type("text")
        expect(result).to_equal(false)
    )

    it("is_text_type('text') returns true":
        val result = is_text_type("text")
        expect(result).to_equal(true)
    )

    it("is_text_type('i64') returns false":
        val result = is_text_type("i64")
        expect(result).to_equal(false)
    )

    it("is_bool_type('bool') returns true":
        val result = is_bool_type("bool")
        expect(result).to_equal(true)
    )

    it("is_bool_type('i64') returns false":
        val result = is_bool_type("i64")
        expect(result).to_equal(false)
    )

    it("is_array_type('[text]') returns true":
        val result = is_array_type("[text]")
        expect(result).to_equal(true)
    )

    it("is_array_type('[i64]') returns true":
        val result = is_array_type("[i64]")
        expect(result).to_equal(true)
    )

    it("is_array_type('text') returns false":
        val result = is_array_type("text")
        expect(result).to_equal(false)
    )

    it("is_dict_type('{text: i64}') returns true":
        val result = is_dict_type("{text: i64}")
        expect(result).to_equal(true)
    )

    it("is_dict_type('text') returns false":
        val result = is_dict_type("text")
        expect(result).to_equal(false)
    )
)
