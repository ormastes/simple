# String format specifier spec
#
# Tests for format specifiers in string interpolation: {expr:spec}
# Format spec syntax: {value:[[fill]align][sign][width][.precision][type]}
#   width: minimum field width
#   .precision: decimal places for floats
#   type: d=decimal, x=hex, b=binary, f=float, s=string, e=scientific

describe "string format specifiers":
    it "basic string interpolation works":
        val n = 42
        val s = "value is {n}"
        expect(s).to_equal("value is 42")

    it "float interpolation works":
        val pi = 3.14159
        val s = "pi is {pi}"
        expect(s).to_contain("3.14")

    it "bool interpolation works":
        val flag = true
        val s = "flag={flag}"
        expect(s).to_equal("flag=true")

    it "text interpolation works":
        val name = "Alice"
        val greeting = "Hello, {name}!"
        expect(greeting).to_equal("Hello, Alice!")

    it "expression interpolation works":
        val x = 5
        val s = "result={x * 2}"
        expect(s).to_equal("result=10")

    it "multiple interpolations in one string":
        val a = 3
        val b = 4
        val s = "{a} + {b} = {a + b}"
        expect(s).to_equal("3 + 4 = 7")

    it "closing brace escaped with double brace":
        val n = 99
        val s = "{n}}remaining"
        # }} â†’ literal }, result is "99}remaining"
        expect(s).to_equal("99}remaining")
