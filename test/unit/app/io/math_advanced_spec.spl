# Tests for app.io.math module
# Covers advanced math functions (logarithms, trig, hyperbolic, rounding)

use app.io.math.{math_log, math_log10, math_log2}
use app.io.math.{math_asin, math_acos, math_atan, math_atan2}
use app.io.math.{math_sinh, math_cosh, math_tanh}
use app.io.math.{math_ceil, math_floor, math_round}

describe "app.io.math":
    describe "logarithms":
        it "math_log computes natural log":
            val result = math_log(1.0)
            expect(result).to_equal(0.0)

        it "math_log10 computes base-10 log":
            val result = math_log10(100.0)
            expect(result).to_equal(2.0)

        it "math_log2 computes base-2 log":
            val result = math_log2(8.0)
            expect(result).to_equal(3.0)

    describe "inverse trig":
        it "math_asin of 0 is 0":
            val result = math_asin(0.0)
            expect(result).to_equal(0.0)

        it "math_acos of 1 is 0":
            val result = math_acos(1.0)
            expect(result).to_equal(0.0)

        it "math_atan of 0 is 0":
            val result = math_atan(0.0)
            expect(result).to_equal(0.0)

        it "math_atan2 computes angle":
            val result = math_atan2(0.0, 1.0)
            expect(result).to_equal(0.0)

    describe "hyperbolic":
        it "math_sinh of 0 is 0":
            val result = math_sinh(0.0)
            expect(result).to_equal(0.0)

        it "math_cosh of 0 is 1":
            val result = math_cosh(0.0)
            expect(result).to_equal(1.0)

        it "math_tanh of 0 is 0":
            val result = math_tanh(0.0)
            expect(result).to_equal(0.0)

    describe "rounding":
        it "math_ceil rounds up":
            expect(math_ceil(2.3)).to_equal(3.0)
            expect(math_ceil(2.0)).to_equal(2.0)
            expect(math_ceil(-2.3)).to_equal(-2.0)

        it "math_floor rounds down":
            expect(math_floor(2.7)).to_equal(2.0)
            expect(math_floor(2.0)).to_equal(2.0)
            expect(math_floor(-2.3)).to_equal(-3.0)

        it "math_round rounds to nearest":
            expect(math_round(2.3)).to_equal(2.0)
            expect(math_round(2.7)).to_equal(3.0)
            expect(math_round(2.5)).to_equal(3.0)
