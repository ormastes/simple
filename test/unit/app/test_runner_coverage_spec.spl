# # Coverage Test
#
# **Feature IDs:** #9000
# **Category:** Testing
# **Status:** Implemented

fn check(condition: bool):
    expect(condition).to_equal(true)

describe "Coverage":
    it "basic test":
        check(true)
        
    it "branch 1":
        val x = 1
        if x > 0:
            check(true)
        else:
            check(false)
            
    it "branch 2":
        val x = -1
        if x > 0:
            check(false)
        else:
            check(true)
            
    it "loop coverage":
        var count = 0
        for i in 0..10:
            count = count + 1
        check(count == 10)
        
    it "match coverage":
        val v = Some(42)
        match v:
            Some(x): check(x == 42)
            nil: check(false)
            
    it "match nil":
        val v = nil
        match v:
            Some(x): check(false)
            nil: check(true)
            
    it "nested branch":
        val a = true
        val b = true
        if a:
            if b:
                check(true)
            else:
                check(false)
        else:
            check(false)
            
    it "array operations":
        val arr = [1, 2, 3]
        check(arr.len() == 3)
        check(arr[0] == 1)
        check(arr[2] == 3)
        
    it "string operations":
        val s = "hello"
        check(s.len() == 5)
        check(s.contains("ell"))
        check(s.starts_with("hel"))
        
    it "dict operations":
        val d = {"key": "value"}
        check(d["key"] == "value")
