# # OCI Client Unit Tests
#
# **Category:** Tooling
# **Status:** In Progress
#
# Unit tests for the OCI (oras) client wrapper.

use std.spec

describe "OCI Reference Format":
    it "constructs correct OCI ref":
        val ref = oci_ref("ghcr.io/simple-lang", "http", "1.0.0")
        expect(ref).to_equal("ghcr.io/simple-lang/http:1.0.0")

    it "handles scoped names":
        val ref = oci_ref("ghcr.io/simple-lang", "my-lib", "0.1.0")
        expect(ref).to_equal("ghcr.io/simple-lang/my-lib:0.1.0")

describe "Artifact Type":
    it "uses correct MIME type":
        val mime = artifact_type()
        expect(mime).to_equal("application/vnd.simple.package.v1+tar")

# Helpers

fn oci_ref(registry: text, name: text, version: text) -> text:
    "{registry}/{name}:{version}"

fn artifact_type() -> text:
    "application/vnd.simple.package.v1+tar"
