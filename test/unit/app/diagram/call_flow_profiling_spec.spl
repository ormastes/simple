# Call Flow Profiling End-to-End Tests
#
# Tests the call flow profiling and mermaid diagram generation
# Run with: simple test --diagram-all simple/std_lib/test/integration/diagram/call_flow_profiling_spec.spl
# Call flow profiling integration tests for mermaid diagram generation.
# Validates FFI recording of function calls, method traces, and return
# values, then verifies correct sequence diagram output format.

# Extern declarations for profiling FFI functions
extern fn clear_ffi_recording()
extern fn enable_ffi_recording()
extern fn disable_ffi_recording()
extern fn trace_call(name: text)
extern fn trace_method(obj: text, method: text, args: [text])
extern fn trace_return(value: text?)
extern fn generate_sequence_ffi() -> text

describe "Call Flow Profiling":
    # Tests call flow tracing and mermaid sequence diagram generation
    # from recorded function calls, method invocations, and return values.
    # NOTE: These tests require FFI functions (clear_ffi_recording, enable_ffi_recording, etc.)
    # and non-standard matchers (to(include_string(...))), which are not available in
    # interpreter mode. Skipped until compiled mode test runner is ready.
    it "traces simple function calls and generates diagrams":
        skip("requires FFI functions not available in interpreter mode")
