# # Option Utilities Specification
#
# **Feature IDs:** #XXX
# **Category:** Stdlib
# **Difficulty:** 1/5
# **Status:** Complete
#
# ## Overview
#
# Tests for utility functions that work with Option types, providing common
# operations like unwrapping with defaults and existence predicates.
#
# ## Key Concepts
#
# | Concept | Description |
# |---------|-------------|
# | unwrap_or | Extract value with default fallback |
# | is_some | Check if option contains a value |
# | is_none | Check if option is empty |
# | Pattern Matching | Extract values from Option types |
#
# ## Behavior
#
# The option utilities module provides:
# - `unwrap_or` - Get value or return default
# - `is_some` - Predicate for value presence
# - `is_none` - Predicate for absence
# - All operations preserve immutability
#
# ## Examples
#
# ```simple
# describe "Option Utilities":
# it "returns value if Some":
# expect unwrap_or(Some(42), 0) == 42
#
# it "returns default if nil":
# expect unwrap_or(nil, 10) == 10
# ```

use std.option_utils.{unwrap_or, is_some, is_none}


# ============================================================================
# Option Utilities Tests
# ============================================================================

describe "Option Utilities":
    # ## Option Type Operations
    #
    # Test utility functions for working with Option types.

    describe "unwrap_or":
        # ## Value Extraction with Default
        #
        # Extract the wrapped value or provide a default when None.

        it "returns value if Some":
            expect unwrap_or(Some(42), 0) == 42

        it "returns default if nil":
            expect unwrap_or(nil, 10) == 10

    describe "is_some/is_none":
        # ## Predicates
        #
        # Test existence checking predicates.

        it "is_some returns true for Some":
            expect is_some(Some(42))

        it "is_some returns false for nil":
            expect not is_some(nil)

        it "is_none returns true for nil":
            expect is_none(nil)

        it "is_none returns false for Some":
            expect not is_none(Some(42))
