# # Probability Utilities Specification
#
# **Feature IDs:** #PROB-001 to #PROB-004
# **Category:** Tooling | Probability & Statistics
# **Difficulty:** 1/5
# **Status:** Complete
#
# ## Overview
#
# This specification covers basic probability calculation utilities:
# 1. Collision probability (birthday paradox)
# 2. Hash collision estimation
#
# ## Key Concepts
#
# | Concept | Description |
# |---------|-------------|
# | Birthday Paradox | Probability of collisions in large hash spaces |
# | Collision Probability | Likelihood of hash collision for n items |
# | Hash Space | Total number of possible hash values (2^64) |
#
# ## Behavior
#
# - Returns 0.0 for n â‰¤ 0
# - Returns 0.0 for n = 1 (can't collide with nothing)
# - Probability increases quadratically with n
# - Uses simplified birthday paradox formula for 64-bit hashes

use std.probability_utils.{collision_probability}

describe "Probability Utilities":
    # ## Collision Probability Calculations
    #
    # Verifies birthday paradox probability calculations for hash collisions.

    describe "Collision Probability":
        # ## Birthday Paradox for Hash Collisions
        #
        # Tests probability calculations for hash collisions in 64-bit space.

        it "returns 0 for n=0":
            val prob = collision_probability(0)
            expect prob == 0.0

        it "returns very low probability for small n":
            val prob = collision_probability(10)
            expect prob < 0.0001

        it "returns low probability for moderate n":
            val prob = collision_probability(1000)
            expect prob < 0.01

        it "probability increases with n":
            val prob_10 = collision_probability(10)
            val prob_100 = collision_probability(100)
            expect prob_100 > prob_10
