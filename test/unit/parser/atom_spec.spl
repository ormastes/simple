# Atom/symbol literal spec
#
# Tests for atom/symbol values using string-based representation.
# Atoms are unique identifiers stored as prefixed strings ("`name").
# Note: Backtick syntax (`name) is planned but not yet in the current binary.
# Current implementation uses plain string prefixes as a workaround.

fn make_atom(name: text) -> text:
    "`" + name

fn atom_eq(a: text, b: text) -> bool:
    a == b

describe "atom literals":
    it "atom is a text value with backtick prefix":
        val a = make_atom("hello")
        expect(a).to_equal("`hello")

    it "two atoms with same name are equal":
        val a = make_atom("foo")
        val b = make_atom("foo")
        expect(atom_eq(a, b)).to_equal(true)

    it "two atoms with different names are not equal":
        val a = make_atom("foo")
        val b = make_atom("bar")
        val not_equal = a != b
        expect(not_equal).to_equal(true)

    it "atom can be used in match":
        val state = make_atom("running")
        val result = match state:
            case "`running": "is running"
            case "`stopped": "is stopped"
            case _: "unknown"
        expect(result).to_equal("is running")

    it "atom used as map key works":
        val active = make_atom("active")
        val inactive = make_atom("inactive")
        val m = {"`active": true, "`inactive": false}
        expect(m[active]).to_equal(true)
