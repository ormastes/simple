# Newtype spec
#
# Tests for newtype wrapper pattern.
# The `newtype Name = BaseType` keyword is planned; currently we use
# single-field structs to achieve the same type-safety effect.

struct Meters:
    value: i64

struct Celsius:
    value: f64

struct Username:
    value: text

describe "newtype wrapper":
    it "newtype creates constructible struct":
        val m = Meters(value: 100)
        expect(m.value).to_equal(100)

    it "newtype value field is accessible":
        val t = Celsius(value: 36.5)
        expect(t.value).to_equal(36.5)

    it "text newtype works":
        val u = Username(value: "alice")
        expect(u.value).to_equal("alice")

    it "newtype wraps a distinct value":
        val a = Meters(value: 5)
        val b = Meters(value: 10)
        expect(a.value + b.value).to_equal(15)

    it "newtype fields can be updated":
        var m = Meters(value: 1)
        m.value = 42
        expect(m.value).to_equal(42)
