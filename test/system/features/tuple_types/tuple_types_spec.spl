"""
# Tuple Types Specification

**Feature IDs:** #TBD
**Category:** Language
**Difficulty:** 2/5
**Status:** Implemented

## Overview

Tuple types are ordered collections of heterogeneous values with fixed length.
They allow grouping multiple values of different types without defining a
named struct, useful for returning multiple values or temporary groupings.

## Syntax

```simple
val point = (3, 4)
val mixed = ("hello", 42, true)
val (x, y) = point  # Destructuring
```

## Key Concepts

| Concept | Description |
|---------|-------------|
| Tuple | Fixed-size heterogeneous collection |
| Tuple Type | Type annotation like `(T1, T2, T3)` |
| Destructuring | Pattern matching to extract tuple elements |
| Unit Type | Empty tuple `()` representing no value |

## Behavior

- Tuples have fixed length determined at compile time
- Elements accessed by index: `tuple[0]`, `tuple[1]`
- Support pattern matching and destructuring
- Unit type `()` is the zero-element tuple
"""

use std.spec


# ============================================================================
# Tuple Type Basics
# ============================================================================

describe "Tuple Types":
    """
    ## Core Tuple Functionality

    Tests for tuple creation, access, destructuring, and type annotations.
    Validates tuple behavior with various element types.
    """

    context "tuple creation":
        """
        ### Scenario: Tuple Creation

        Creates tuples with various element types and sizes.
        """

        it "creates tuple literal":
            val t = (10, 20, 30)
            expect t[1] == 20

        it "gets tuple length":
            val t = (1, 2, 3, 4)
            expect t.len() == 4

    context "tuple access":
        """
        ### Scenario: Tuple Element Access

        Accesses individual tuple elements by index.
        """

        it "accesses elements by index":
            val t = (5, 10, 15)
            expect t[0] == 5
            expect t[2] == 15

    context "tuple destructuring":
        """
        ### Scenario: Tuple Destructuring

        Extracts tuple elements into variables.
        """

        it "destructures tuple into variables":
            val (a, b, c) = (10, 20, 30)
            expect a + b + c == 60

        it "swaps values with tuple destructuring":
            val a = 10
            val b = 20
            val (x, y) = (b, a)
            expect x == 20

        it "destructures from array":
            val arr = [5, 10, 15]
            val (first, second, third) = arr
            expect second == 10


# ============================================================================
# Tuple Pattern Matching
# ============================================================================

describe "Tuple Pattern Matching":
    """
    ## Pattern Matching with Tuples

    Tests for tuple patterns in match expressions.
    """

    it "matches tuple pattern":
        val t = (1, 2)
        val result = match t:
            (1, x) => x * 10
            _ => 0
        expect result == 20

    it "uses wildcard for unmatched tuples":
        val t = (5, 5)
        val result = match t:
            (1, x) => x
            _ => 99
        expect result == 99
