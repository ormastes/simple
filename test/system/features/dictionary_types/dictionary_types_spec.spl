"""
# Dictionary Types Specification

**Feature IDs:** #1002
**Category:** Language
**Status:** In Progress

Tests for dictionary (map) types and their operations.
Verifies dictionary creation, access, modification, and iteration.
"""

import std.spec

describe "Dictionary Types":
    """
    Tests for dictionary/map types and their fundamental operations.
    Verifies creation, key-value access, modification, and iteration over dictionaries.
    """

    context "dictionary creation":
        """
        ### Scenario: Creating Dictionaries

        Tests various ways to create dictionaries with different types.
        """

        it "creates empty dictionary":
            val empty: Dict<text, i32> = {}
            expect empty.size == 0

        it "creates dictionary with initial values":
            val dict = {"a": 1, "b": 2, "c": 3}
            expect dict.size == 3

        it "creates dictionary with string keys and values":
            val dict = {"name": "Alice", "city": "NYC"}
            expect dict.size == 2

    context "dictionary access":
        """
        ### Scenario: Accessing Dictionary Values

        Tests retrieving values by key and checking key existence.
        """

        it "retrieves value by key":
            val dict = {"a": 1, "b": 2}
            expect dict["a"] == 1

        it "returns null for missing key":
            val dict = {"a": 1}
            val value = dict["missing"]
            expect value == None

        it "checks key existence":
            val dict = {"a": 1, "b": 2}
            expect dict.has_key("a") == true
            expect dict.has_key("c") == false

    context "dictionary modification":
        """
        ### Scenario: Modifying Dictionary Content

        Tests adding, updating, and removing entries.
        """

        it "adds new key-value pair":
            var dict = {"a": 1}
            dict["b"] = 2
            expect dict["b"] == 2
            expect dict.size == 2

        it "updates existing value":
            var dict = {"a": 1}
            dict["a"] = 10
            expect dict["a"] == 10
            expect dict.size == 1

        it "removes entry by key":
            var dict = {"a": 1, "b": 2}
            dict.remove("a")
            expect dict.has_key("a") == false
            expect dict.size == 1

    context "dictionary iteration":
        """
        ### Scenario: Iterating Over Dictionaries

        Tests various ways to iterate through dictionary entries.
        """

        it "iterates over keys":
            val dict = {"a": 1, "b": 2, "c": 3}
            var count = 0
            for key in dict.keys():
                count = count + 1
            expect count == 3

        it "iterates over values":
            val dict = {"a": 1, "b": 2, "c": 3}
            var sum = 0
            for value in dict.values():
                sum = sum + value
            expect sum == 6

        it "iterates over entries":
            val dict = {"a": 1, "b": 2}
            var count = 0
            for entry in dict:
                count = count + 1
            expect count == 2

    context "dictionary methods":
        """
        ### Scenario: Dictionary Utility Methods

        Tests built-in dictionary methods for manipulation and inspection.
        """

        it "gets dictionary size":
            val dict = {"a": 1, "b": 2, "c": 3}
            expect dict.size == 3

        it "checks if dictionary is empty":
            val empty: Dict<text, i32> = {}
            val full = {"a": 1}
            expect empty.is_empty() == true
            expect full.is_empty() == false

        it "clears dictionary":
            var dict = {"a": 1, "b": 2}
            dict.clear()
            expect dict.size == 0
            expect dict.is_empty() == true

        it "creates copy of dictionary":
            val original = {"a": 1, "b": 2}
            val copy = original.copy()
            expect copy["a"] == 1
            expect copy.size == original.size

    context "dictionary with multiple types":
        """
        ### Scenario: Mixed Value Types

        Tests dictionaries with different value types.
        """

        it "stores different value types":
            val mixed = {"int": 1, "text": "hello", "float": 3.14}
            expect mixed.size == 3

        it "accesses values with correct types":
            val dict = {"count": 5}
            val value = dict["count"]
            expect value == 5
