# Unit tests for Single-Line Function Definitions
# Tests the inline expression body syntax: fn name(): expr

describe "Single-Line Function Definitions":
    context "basic syntax":
        it "parses inline expression body":
            fn double(x): x * 2
            expect double(5) == 10

        it "parses with multiple parameters":
            fn add(a, b): a + b
            expect add(3, 4) == 7

        it "parses with no parameters":
            fn get_answer(): 42
            expect get_answer() == 42

        it "handles complex expressions":
            fn complex(x): (x * 2) + (x / 2)
            expect complex(10) == 25

    context "with return types":
        it "supports explicit return type":
            fn typed_double(x: i64) -> i64: x * 2
            expect typed_double(5) == 10

    context "method definitions":
        it "works with class methods":
            class Counter:
                count: i64

                fn get_count(): self.count

            val c = Counter(count: 42)
            expect c.get_count() == 42

    context "block form still works":
        it "parses traditional block syntax":
            fn block_complex(x):
                val y = x * 2
                y + 1
            expect block_complex(5) == 11

        it "can mix single-line and block functions":
            fn inline(x): x * 2
            fn block(x):
                val doubled = inline(x)
                doubled + 1
            expect block(5) == 11
