"""
# Collections Specification (Python-Inspired)

**Feature IDs:** #PYTHON-COMPAT-COLLECTIONS
**Category:** Collections
**Status:** Planned

This specification tests collection types and operations that Python
developers will find familiar. Simple provides lists and dictionaries
with Python-like syntax for common operations.

## Covered Features

- List literals and operations
- Dictionary (dict) literals and key-value access
- List comprehensions
- Collection iteration with for loops
- Common methods: len, append, contains
"""
import std.spec

describe "Collections":
    """
    ## Python-Inspired Collection Types

    Tests for collection creation, manipulation, and iteration.
    Simple provides lists and dictionaries with syntax and semantics
    familiar to Python developers.

    Key areas tested:
    - List creation with literal syntax [1, 2, 3]
    - Dict creation with literal syntax {"key": value}
    - Indexing and slicing
    - List comprehensions [for x in items: expr]
    - Iteration patterns
    """

    context "list operations":
        it "creates list literal":
            val numbers = [1, 2, 3, 4, 5]
            expect numbers.len() == 5

        it "accesses elements by index":
            val items = [10, 20, 30]
            expect items[0] == 10
            expect items[2] == 30

        it "iterates over list":
            val numbers = [1, 2, 3]
            var sum = 0
            for n in numbers:
                sum = sum + n
            expect sum == 6

    context "dict operations":
        it "creates dict literal":
            val person = {"name": "Alice", "age": 30}
            expect person["name"] == "Alice"

        it "adds and retrieves values":
            var m = {}
            m["key"] = "value"
            expect m["key"] == "value"

        it "checks key existence":
            val m = {"a": 1}
            expect m.contains_key("a")
            expect not m.contains_key("b")

    context "list comprehensions":
        it "creates list with comprehension":
            val squares = [for x in [1, 2, 3, 4]: x * x]
            expect squares.len() == 4
            expect squares[0] == 1
            expect squares[3] == 16

        it "filters with comprehension":
            val evens = [for x in [1, 2, 3, 4, 5, 6] if x % 2 == 0: x]
            expect evens.len() == 3
