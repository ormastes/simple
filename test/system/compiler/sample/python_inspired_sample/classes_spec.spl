# @pending
"""
# Classes Specification (Python-Inspired)

**Feature IDs:** #PYTHON-COMPAT-CLASS
**Category:** Object-Oriented Programming
**Status:** Planned

This specification tests class definition and usage patterns that Python
developers will find familiar. Simple's class system combines Python's
intuitive syntax with explicit mutability tracking.

## Covered Features

- Class definition with fields
- Method definitions (immutable `fn` and mutable `me`)
- Instance creation via direct construction
- Field access and modification
- Static methods
"""
import std.spec

describe "Classes":
    """
    ## Python-Inspired Class Syntax

    Tests for class definitions and object-oriented programming features.
    Simple provides a class system that feels natural to Python developers
    while adding explicit mutability annotations for safety.

    Key areas tested:
    - Class field declarations
    - Instance method definitions
    - Mutable methods with `me` keyword
    - Static factory methods
    - Object instantiation and field access
    """

    context "class definition":
        it "defines a simple class with fields":
            class Point:
                x: i64
                y: i64
            val p = Point(x: 3, y: 4)
            expect p.x == 3
            expect p.y == 4

    context "instance methods":
        it "defines and calls immutable method":
            class Rectangle:
                width: i64
                height: i64

                fn area() -> i64:
                    self.width * self.height

            val rect = Rectangle(width: 5, height: 3)
            expect rect.area() == 15

    context "mutable methods":
        it "modifies instance with me method":
            class Counter:
                value: i64

                me increment():
                    self.value = self.value + 1

            var c = Counter(value: 0)
            c.increment()
            expect c.value == 1

    context "static methods":
        it "creates instance via static factory":
            class Circle:
                radius: f64

            impl Circle:
                static fn unit() -> Circle:
                    Circle(radius: 1.0)

            val c = Circle.unit()
            expect c.radius == 1.0
