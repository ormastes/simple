"""
# Collections Specification

**Feature IDs:** #COLLECTIONS
**Category:** Core
**Status:** Implemented

Tests Python-inspired collection types and operations in Simple.
Covers lists, dictionaries, sets, and common collection methods.
"""
import std.spec

describe "Collections":
    """
    ## Collection Types and Operations

    Verifies Python-like collection behavior:
    - List creation and manipulation
    - Dictionary key-value operations
    - Collection methods (map, filter, etc.)
    - List comprehensions
    """

    context "list operations":
        it "creates list literal":
            val items = [1, 2, 3]
            expect items.len() == 3

        it "accesses by index":
            val items = ["a", "b", "c"]
            expect items[0] == "a"
            expect items[2] == "c"

        it "supports negative indexing":
            val items = [10, 20, 30]
            expect items[-1] == 30

        it "slices list":
            val items = [1, 2, 3, 4, 5]
            expect items[1:4] == [2, 3, 4]

    context "dictionary operations":
        it "creates dict literal":
            val ages = {"alice": 30, "bob": 25}
            expect ages["alice"] == 30

        it "checks key existence":
            val data = {"key": "value"}
            expect data.contains_key("key") == true
            expect data.contains_key("missing") == false

    context "collection methods":
        it "maps over list":
            val nums = [1, 2, 3]
            val doubled = nums.map(\x: x * 2)
            expect doubled == [2, 4, 6]

        it "filters list":
            val nums = [1, 2, 3, 4, 5]
            val evens = nums.filter(\x: x % 2 == 0)
            expect evens == [2, 4]

    context "list comprehensions":
        it "creates list with comprehension":
            val squares = [for x in 0..5: x * x]
            expect squares == [0, 1, 4, 9, 16]

        it "filters in comprehension":
            val evens = [for x in 0..10 if x % 2 == 0: x]
            expect evens == [0, 2, 4, 6, 8]
