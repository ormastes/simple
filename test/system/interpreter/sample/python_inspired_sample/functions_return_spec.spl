"""
# Functions with Return Values Specification


**Feature IDs:** #FUNCTIONS-RETURN
**Category:** Functions
**Status:** Implemented

Tests Python-inspired function return semantics in Simple.
Covers implicit return (last expression), explicit return,
and return type inference.
"""
import std.spec
use std.string.{NL}

describe "Functions with Return Values":
    """
    ## Function Return Semantics

    Verifies Python-like function returns:
    - Implicit return of last expression
    - Explicit return statement
    - Return type inference
    - Multiple return paths
    """

    context "implicit return":
        it "returns last expression":
            fn double(x: i64) -> i64:
                x * 2
            expect double(5) == 10

        it "returns computed value":
            fn square(n: i64) -> i64:
                n * n
            expect square(4) == 16

    context "explicit return":
        it "returns early from function":
            fn classify(x: i64) -> text:
                if x < 0:
                    return "negative"
                "non-negative"
            expect classify(-5) == "negative"
            expect classify(5) == "non-negative"

    context "return type inference":
        it "infers integer return type":
            fn add(a: i64, b: i64):
                a + b
            expect add(3, 4) == 7

        it "infers string return type":
            fn greet(name: text):
                "Hello, {name}!"
            expect greet("World") == "Hello, World!"
