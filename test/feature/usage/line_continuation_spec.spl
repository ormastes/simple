"""
# Line Continuation Specification

**Feature IDs:** #2400
**Category:** Syntax
**Status:** Implemented

Line continuation allows long expressions and function calls to span multiple lines
using explicit backslash (`\`) at end of line. This enables clean formatting of
complex expressions without exceeding line length limits.

## Syntax

```simple
# Explicit continuation with backslash
val sum = value1 + \
    value2 + \
    value3

# Function call with continuation
val result = add(1, \
    2, \
    3)
```

## Key Concepts

| Concept | Description |
|---------|-------------|
| Explicit Continuation | Backslash at line end forces continuation to next line |
| Nesting | Multiple levels of continuation allowed |
| Indentation | Improves readability but not required for continuation |

## Behavior

Line continuation:
- Backslash at end of line continues expression to next line
- Multiple continuations can be chained
- Works in expressions and function calls
- Preserves semantic meaning across line boundaries

## Note

Implicit continuation (just newlines inside parentheses/brackets/braces) is not
currently supported. Use explicit backslash continuation instead.
"""


describe "Line Continuation":
    """
    ## Line Continuation Specification

    This test suite verifies explicit backslash line continuation behavior.
    """

    context "explicit continuation with backslash":
        """
        ### Scenario: Backslash Line Continuation

        Tests explicit line continuation using backslash at end of line.
        """

        it "continues expression with backslash":
            val result = 1 + 2 + \
                3 + 4
            expect result == 10

        it "continues function call with backslash":
            fn add(a, b, c):
                a + b + c
            val result = add(1, \
                2, \
                3)
            expect result == 6

        it "combines backslash and arithmetic":
            val a = 10
            val b = 20
            val c = 30
            val result = a + \
                b + \
                c
            expect result == 60

        it "chains multiple continuations":
            val result = 1 + \
                2 + \
                3 + \
                4 + \
                5
            expect result == 15

    context "continuation in various expressions":
        it "continues binary operation":
            val x = 100 + \
                200
            expect x == 300

        it "continues comparison":
            val a = 5
            val b = 10
            val result = a < \
                b
            var r = 0
            if result:
                r = 1
            expect r == 1

        it "continues string concatenation":
            val s = "Hello" + \
                " " + \
                "World"
            var result = 0
            if s == "Hello World":
                result = 1
            expect result == 1

    context "continuation with indentation":
        it "works with any indentation level":
            val result = 10 + \
                        20 + \
                30
            expect result == 60

        it "continues deeply indented code":
            fn outer():
                fn inner():
                    val x = 1 + \
                        2
                    return x
                return inner()
            expect outer() == 3

    context "practical examples":
        it "formats long arithmetic expression":
            val total = 100 + \
                200 + \
                300 + \
                400
            expect total == 1000

        it "formats function with many arguments":
            fn sum5(a, b, c, d, e):
                a + b + c + d + e
            val result = sum5(1, \
                2, \
                3, \
                4, \
                5)
            expect result == 15
