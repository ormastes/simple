class DiContainer:
    all_bindings: list
    locked: bool

    me bind_instance(key: text, value):
        var new_bindings = []
        for entry in self.all_bindings:
            if entry[0] != key:
                new_bindings = new_bindings + [entry]
        new_bindings = new_bindings + [[key, value]]
        self.all_bindings = new_bindings

    fn has(key: text) -> bool:
        for entry in self.all_bindings:
            if entry[0] == key:
                return true
        false

    fn resolve(key: text):
        for entry in self.all_bindings:
            if entry[0] == key:
                return entry[1]
        nil

describe "simple di":
    it "bind and has":
        val di = DiContainer(all_bindings: [], locked: false)
        di.bind_instance("key", "value")
        expect(di.has("key")).to_equal(true)
    it "bind and resolve":
        val di = DiContainer(all_bindings: [], locked: false)
        di.bind_instance("key", "value")
        expect(di.resolve("key")).to_equal("value")
