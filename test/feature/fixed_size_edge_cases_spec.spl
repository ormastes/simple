# @pending
"""
Fixed-Size Array Edge Cases - Comprehensive SSpec Tests

Category: Collections
Status: Implemented (Part 2/2)
"""

describe "Fixed-Size Array Edge Cases":

    context "Size Zero":
        it "allows size-zero arrays":
            val empty: [i64; 0] = []
            expect empty.len() == 0

        it "iterates over size-zero arrays":
            val empty: [i64; 0] = []
            var count = 0
            for _ in empty:
                count = count + 1
            expect count == 0

    context "Negative Indexing":
        it "supports negative indices":
            val arr: [i64; 5] = [1, 2, 3, 4, 5]
            expect arr[-1] == 5
            expect arr[-2] == 4
            expect arr[-3] == 3

    context "Boundary Conditions":
        it "handles single element arrays":
            val single: [i64; 1] = [42]
            expect single[0] == 42
            expect single.len() == 1

        it "handles two element arrays":
            val pair: [i64; 2] = [10, 20]
            expect pair[0] == 10
            expect pair[1] == 20
            expect pair.len() == 2

    context "Mixed Types":
        it "works with string arrays":
            val names: [text; 3] = ["alice", "bob", "charlie"]
            expect names[0] == "alice"
            expect names.len() == 3

        it "works with boolean arrays":
            val flags: [bool; 2] = [true, false]
            expect flags[0] == true
            expect flags[1] == false

    context "Functional Operations on Fixed":
        it "map preserves values":
            val arr: [i64; 4] = [1, 2, 3, 4]
            val doubled = arr.map(\x: x * 2)
            expect doubled.len() == 4
            expect doubled[0] == 2
            expect doubled[3] == 8

        it "filter may reduce size":
            val arr: [i64; 5] = [1, 2, 3, 4, 5]
            val big = arr.filter(\x: x > 3)
            expect big.len() == 2
            expect big[0] == 4
            expect big[1] == 5

        it "reduce works on fixed arrays":
            val arr: [i64; 3] = [10, 20, 30]
            val total = arr.reduce(0, \acc, x: acc + x)
            expect total == 60
