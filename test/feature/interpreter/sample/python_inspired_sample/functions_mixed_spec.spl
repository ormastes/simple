"""
# Mixed Function Patterns Specification


**Feature IDs:** #FUNCTIONS-MIXED
**Category:** Functions
**Status:** Implemented

Tests Python-inspired mixed function patterns in Simple.
Covers default arguments, named arguments, variadic functions,
and higher-order functions.
"""
import std.spec
use std.text.{NL}

describe "Mixed Function Patterns":
    """
    ## Advanced Function Patterns

    Verifies Python-like function features:
    - Default parameter values
    - Named argument calls
    - Higher-order functions (lambdas)
    - Function composition
    """

    context "default parameters":
        it "uses default when argument omitted":
            fn greet(name: text, greeting: text = "Hello"):
                "{greeting}, {name}!"
            expect greet("Alice") == "Hello, Alice!"

        it "overrides default when provided":
            fn greet(name: text, greeting: text = "Hello"):
                "{greeting}, {name}!"
            expect greet("Bob", "Hi") == "Hi, Bob!"

    context "named arguments":
        it "calls with named arguments":
            fn make_point(x: i64, y: i64) -> (i64, i64):
                (x, y)
            val p = make_point(x: 10, y: 20)
            expect p == (10, 20)

    context "higher-order functions":
        it "passes function as argument":
            fn apply(f: fn(i64) -> i64, x: i64) -> i64:
                f(x)
            fn double(n: i64) -> i64:
                n * 2
            expect apply(double, 5) == 10

        it "uses lambda expression":
            val items = [1, 2, 3]
            val doubled = items.map(\x: x * 2)
            expect doubled == [2, 4, 6]
