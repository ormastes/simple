# Test imported class static method calls
# This tests the fix for a bug where calling ClassName.new() on imported classes
# would fail with "function expects N argument(s), but more were provided"
#
# The bug occurred because:
# 1. Class's new() method returns ClassName(field1, field2, ...) with all fields
# 2. instantiate_class would try to call new() with all field arguments
# 3. But new() only has a subset of parameters for construction
#
# Fix: Only call new() if argument count matches parameter count

import spec.{describe, it}
import spec.registry.{ExampleGroup, Example}

describe "Imported class static method calls":
    it "should call Example.new with correct args":
        fn test_block():
            pass
        val ex = Example.new("test description", test_block)
        # Verify the object was created correctly
        if ex.description != "test description":
            panic("Example.new failed: description mismatch")

    it "should call ExampleGroup.new with correct args":
        val grp = ExampleGroup.new("test group", nil)
        # Verify the object was created correctly
        if grp.description != "test group":
            panic("ExampleGroup.new failed: description mismatch")
