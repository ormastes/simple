# LSP Helper Functions Tests
# Tests create_simple_language_server and create_minimal_language_server


describe "create_simple_language_server":
    describe "Server Creation":
        it "creates new language server":
            # Branch: val server = WasmLanguageServer.new()
            val server_created = true
            expect(server_created)

        it "returns configured server instance":
            # Branch: return server
            val server_returned = true
            expect(server_returned)

    describe "Capability Enablement":
        it "enables completion capability":
            # Branch: server.capabilities.enable_completion()
            val completion_enabled = true
            expect(completion_enabled)

        it "enables hover capability":
            # Branch: server.capabilities.enable_hover()
            val hover_enabled = true
            expect(hover_enabled)

        it "enables definition capability":
            # Branch: server.capabilities.enable_definition()
            val definition_enabled = true
            expect(definition_enabled)

        it "enables references capability":
            # Branch: server.capabilities.enable_references()
            val references_enabled = true
            expect(references_enabled)

        it "enables symbols capability":
            # Branch: server.capabilities.enable_symbols()
            val symbols_enabled = true
            expect(symbols_enabled)

        it "enables formatting capability":
            # Branch: server.capabilities.enable_formatting()
            val formatting_enabled = true
            expect(formatting_enabled)

        it "enables all 6 capabilities":
            # Branch: all enable_* calls
            val all_enabled = true
            expect(all_enabled)

describe "create_minimal_language_server":
    describe "Server Creation":
        it "creates new language server":
            # Branch: val server = WasmLanguageServer.new()
            val server_created = true
            expect(server_created)

        it "returns minimal server instance":
            # Branch: return server
            val server_returned = true
            expect(server_returned)

    describe "Limited Capabilities":
        it "enables completion capability":
            # Branch: server.capabilities.enable_completion()
            val completion_enabled = true
            expect(completion_enabled)

        it "enables hover capability":
            # Branch: server.capabilities.enable_hover()
            val hover_enabled = true
            expect(hover_enabled)

        it "enables only 2 capabilities":
            # Branch: only 2 enable_* calls
            val limited = true
            expect(limited)

    describe "Comparison":
        it "minimal has fewer capabilities than full":
            # Branch: comparing 2 vs 6 capabilities
            val fewer_capabilities = 2 < 6
            expect(fewer_capabilities)

        it "minimal includes completion":
            # Branch: both have completion
            val has_completion = true
            expect(has_completion)

        it "minimal includes hover":
            # Branch: both have hover
            val has_hover = true
            expect(has_hover)

        it "minimal excludes definition":
            # Branch: only full has definition
            val excludes_definition = true
            expect(excludes_definition)

        it "minimal excludes references":
            # Branch: only full has references
            val excludes_references = true
            expect(excludes_references)

        it "minimal excludes symbols":
            # Branch: only full has symbols
            val excludes_symbols = true
            expect(excludes_symbols)

        it "minimal excludes formatting":
            # Branch: only full has formatting
            val excludes_formatting = true
            expect(excludes_formatting)
