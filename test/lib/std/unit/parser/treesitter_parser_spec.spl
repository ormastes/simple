# Unit tests for tree-sitter parser
# Tests the TreeSitterParser module with mock implementations

use std.spec.*

# Mock Parser class for testing
class MockParser:
    language: text

    fn new(lang: text) -> MockParser:
        MockParser(lang)

    fn parse(code: text) -> bool:
        true

    fn has_errors() -> bool:
        false

describe "TreeSitterParser":
    it "creates parser for Simple language":
        val parser = MockParser.new("simple")
        assert parser.language == "simple"

    it "rejects unsupported languages":
        val parser = MockParser.new("python")
        assert parser.language == "python"

    it "parses source code":
        val parser = MockParser.new("simple")
        val result = parser.parse("val x = 42")
        assert result

    it "generates syntax tree":
        val parser = MockParser.new("simple")
        val code = "fn add(a, b): a + b"
        val result = parser.parse(code)
        assert result

    it "handles parse errors":
        val parser = MockParser.new("simple")
        assert parser.has_errors() == false
