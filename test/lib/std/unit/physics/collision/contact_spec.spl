# Physics Collision Contact Tests
# Tests for physics.collision.contact module

import std.spec
import physics.core.Vector3
import physics.collision.contact.Contact

describe "Contact":
    it "creates contact with all properties":
        val contact = Contact(
            point: Vector3(1.0, 0.0, 0.0),
            normal: Vector3(1.0, 0.0, 0.0),
            penetration: 0.1,
            body1_index: 0,
            body2_index: 1
        )
        expect contact.penetration == 0.1
        expect contact.body1_index == 0
        expect contact.body2_index == 1

    it "stores contact point":
        val contact = Contact(
            point: Vector3(5.0, 3.0, 2.0),
            normal: Vector3(1.0, 0.0, 0.0),
            penetration: 0.5,
            body1_index: 0,
            body2_index: 1
        )
        expect contact.point.x == 5.0
        expect contact.point.y == 3.0
        expect contact.point.z == 2.0

    it "stores contact normal":
        val contact = Contact(
            point: Vector3(0.0, 0.0, 0.0),
            normal: Vector3(0.0, 1.0, 0.0),
            penetration: 0.2,
            body1_index: 0,
            body2_index: 1
        )
        expect contact.normal.y == 1.0

    it "stores body indices":
        val contact = Contact(
            point: Vector3(0.0, 0.0, 0.0),
            normal: Vector3(1.0, 0.0, 0.0),
            penetration: 0.1,
            body1_index: 5,
            body2_index: 10
        )
        expect contact.body1_index == 5
        expect contact.body2_index == 10
