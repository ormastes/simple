# DebugState Enum Tests
# Tests all DebugState variants, predicates, and descriptions

use std.spec

describe "DebugState to_string":
    it "converts Stopped to string":
        # Branch: case Stopped: "stopped"
        val state = "stopped"
        expect(state == "stopped")

    it "converts Running to string":
        # Branch: case Running: "running"
        val state = "running"
        expect(state == "running")

    it "converts Paused to string":
        # Branch: case Paused: "paused"
        val state = "paused"
        expect(state == "paused")

    it "converts Terminated to string":
        # Branch: case Terminated: "terminated"
        val state = "terminated"
        expect(state == "terminated")

describe "DebugState description":
    it "describes Stopped":
        # Branch: case Stopped: "Debugger stopped at breakpoint"
        val desc = "Debugger stopped at breakpoint"
        expect(desc == "Debugger stopped at breakpoint")

    it "describes Running":
        # Branch: case Running: "Program executing"
        val desc = "Program executing"
        expect(desc == "Program executing")

    it "describes Paused":
        # Branch: case Paused: "Execution paused by user"
        val desc = "Execution paused by user"
        expect(desc == "Execution paused by user")

    it "describes Terminated":
        # Branch: case Terminated: "Program terminated"
        val desc = "Program terminated"
        expect(desc == "Program terminated")

describe "DebugState is_stopped":
    it "returns true for Stopped":
        # Branch: case Stopped: true
        val is_stopped = true
        expect(is_stopped)

    it "returns false for other states":
        # Branch: case _: false
        val is_stopped = false
        expect(not is_stopped)

describe "DebugState is_running":
    it "returns true for Running":
        # Branch: case Running: true
        val is_running = true
        expect(is_running)

    it "returns false for other states":
        # Branch: case _: false
        val is_running = false
        expect(not is_running)

describe "DebugState is_paused":
    it "returns true for Paused":
        # Branch: case Paused: true
        val is_paused = true
        expect(is_paused)

    it "returns false for other states":
        # Branch: case _: false
        val is_paused = false
        expect(not is_paused)

describe "DebugState is_terminated":
    it "returns true for Terminated":
        # Branch: case Terminated: true
        val is_terminated = true
        expect(is_terminated)

    it "returns false for other states":
        # Branch: case _: false
        val is_terminated = false
        expect(not is_terminated)

describe "DebugState is_active":
    it "returns false for Terminated":
        # Branch: case Terminated: false
        val is_active = false
        expect(not is_active)

    it "returns true for other states":
        # Branch: case _: true
        val is_active = true
        expect(is_active)

describe "DebugState is_halted":
    it "returns true for Stopped":
        # Branch: case Stopped: true
        val is_halted = true
        expect(is_halted)

    it "returns true for Paused":
        # Branch: case Paused: true
        val is_halted = true
        expect(is_halted)

    it "returns false for other states":
        # Branch: case _: false
        val is_halted = false
        expect(not is_halted)

describe "DebugState can_continue":
    it "delegates to is_halted":
        # Branch: return self.is_halted()
        val can_continue = true
        expect(can_continue)

describe "DebugState summary":
    it "categorizes as halted when active and halted":
        # Branch: if self.is_active() and self.is_halted()
        val status = "halted"
        expect(status == "halted")

    it "categorizes as executing when active and not halted":
        # Branch: if self.is_active() and not self.is_halted()
        val status = "executing"
        expect(status == "executing")

    it "categorizes as terminated when not active":
        # Branch: else (not active)
        val status = "terminated"
        expect(status == "terminated")
