# File I/O FFI Specification
# Tests for file operations using FFI functions

import file

describe "File I/O FFI Functions":
    context "file existence checking":
        it "should check if file exists":
            # Test with a file that should exist
            val exists = file.is_file("simple/std_lib/test/unit/file/file_io_spec.spl")
            expect(exists)

        it "should return false for non-existent files":
            val exists = file.is_file("/nonexistent/file/path/test.txt")
            expect(not exists)

    context "file size retrieval":
        it "should get size of existing file":
            # This test file should have non-zero size
            match file.size("simple/std_lib/test/unit/file/file_io_spec.spl"):
                case Ok(size):
                    expect(size > 0)
                case Err(e):
                    fail("Expected Ok, got Err: {e}")

        it "should return error for non-existent file":
            match file.size("/nonexistent/file.txt"):
                case Ok(_):
                    fail("Expected Err for non-existent file")
                case Err(_):
                    pass  # Expected error
