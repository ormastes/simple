# Component System Tests
# Feature: Game Engine Component System
# Category: Game Engine, ECS
# Status: Complete
#
# Tests for the cross-engine component abstraction including component
# types (Transform, Render, Physics, Audio, Script) and ComponentManager.

import std.spec
import game_engine.component.{ComponentType, ComponentManager}

describe "ComponentType":
    """
    Tests for ComponentType enum variants and their categorization.
    """
    it "creates Transform component type":
        val ct = ComponentType::Transform
        expect ct.to_string() == "Transform"
        expect ct.is_transform()

    it "creates Render component type":
        val ct = ComponentType::Render
        expect ct.to_string() == "Render"
        expect ct.is_render()

    it "creates Physics component type":
        val ct = ComponentType::Physics
        expect ct.to_string() == "Physics"
        expect ct.is_physics()

    it "creates Audio component type":
        val ct = ComponentType::Audio
        expect ct.to_string() == "Audio"
        expect ct.is_audio()

    it "creates Script component type":
        val ct = ComponentType::Script
        expect ct.to_string() == "Script"
        expect ct.is_script()

    it "creates Custom component type":
        val ct = ComponentType::Custom
        expect ct.to_string() == "Custom"
        expect ct.is_custom()

    it "provides descriptions":
        expect ComponentType::Transform.description() == "Position, rotation, and scale"
        expect ComponentType::Physics.description() == "Physics simulation and collision"

    it "checks visual types":
        expect ComponentType::Render.is_visual()
        expect not ComponentType::Physics.is_visual()

    it "checks simulation types":
        expect ComponentType::Physics.is_simulation()
        expect ComponentType::Transform.is_simulation()
        expect not ComponentType::Audio.is_simulation()

    it "checks output types":
        expect ComponentType::Render.is_output()
        expect ComponentType::Audio.is_output()
        expect not ComponentType::Script.is_output()

describe "ComponentManager":
    it "creates empty manager":
        val manager = ComponentManager::new()
        expect manager.is_empty()
        expect manager.count() == 0

    it "reports has_components correctly":
        val manager = ComponentManager::new()
        expect not manager.has_components()
