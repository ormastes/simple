# Module Import Syntax - Tests
# Tests for use/import statement parsing and deprecation warnings

describe "module import syntax":

    describe "use statement with dot notation":

        it "parses use module.item":
            # This should parse without warnings
            # Note: Module may not exist, we're testing parsing
            use std.core.Option
            expect(true).to(be_true())

        it "parses use module with group imports":
            use std.core.{Option, Result}
            expect(true).to(be_true())

        it "parses use module.*":
            use std.core.*
            expect(true).to(be_true())

        it "parses use with alias":
            use std.core.Option as Opt
            expect(true).to(be_true())

    describe "deprecated double colon syntax":
        # These parse but should emit deprecation warnings

        it "warns on use std double colon core":
            # Parser should emit: "Deprecated: '::' in module paths"
            use std::core
            expect(true).to(be_true())

        it "warns on use std double colon core double colon star":
            # Multiple :: should emit multiple warnings
            use std::core::*
            expect(true).to(be_true())

        it "warns on use std double colon core with group":
            use std::core::{Option, Result}
            expect(true).to(be_true())

    describe "deprecated import keyword":

        it "warns on import keyword":
            # Parser should emit: "Deprecated: 'import' keyword"
            # Use 'use' instead
            import std.core
            expect(true).to(be_true())

        it "warns on from...import syntax":
            # Parser should emit: "Deprecated: 'from ... import' syntax"
            # Use 'use module.group' instead
            from std.core import Option
            expect(true).to(be_true())

    describe "export use statements":

        it "parses export use module.item":
            export use std.core.Option
            expect(true).to(be_true())

        it "parses export use module with group":
            export use std.core.{Option, Result}
            expect(true).to(be_true())

        it "warns on export use module.*", tag: "deprecation":
            # Parser should emit: "Avoid 'export use *' - exposes unnecessary interfaces"
            # Use explicit exports instead
            export use std.core.*
            expect(true).to(be_true())

        it "parses export A, B from module":
            export Option, Result from std.core
            expect(true).to(be_true())

        it "parses export group from module":
            export { Option, Result } from std.core
            expect(true).to(be_true())

    describe "common use statements":

        it "parses common use module.item":
            common use std.core.Option
            expect(true).to(be_true())

        it "parses common use module with group":
            common use std.core.{Option, Result}
            expect(true).to(be_true())

    describe "relative imports":

        it "parses import .. as parent":
            import .. as parent
            expect(true).to(be_true())

        it "parses import ..sibling":
            import ..sibling
            expect(true).to(be_true())

    describe "module path with keywords":
        # Keywords should be allowed as path segments

        it "allows async in path":
            use host.async_nogc_mut.io
            expect(true).to(be_true())

        it "allows sync in path":
            use host.sync_nogc_mut.io
            expect(true).to(be_true())

        it "allows test in path":
            use std.test.helpers
            expect(true).to(be_true())
