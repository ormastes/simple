"""
# Compiler Test Helpers

Shared helper functions for testing compiler components.
"""

# Imports for when TODOs are implemented
use compiler.lexer.*
use compiler.lexer_types.*
use compiler.parser.*

# TODO: These will be implemented once we can import compiler modules
# For now, this is a placeholder for the test infrastructure

fn lex(source: text) -> [Token]:
    """
    Lex source code and return all tokens.

    This will call into the lexer implementation once module imports work.
    """
    # TODO: import compiler.lexer.Lexer
    # val lexer = Lexer.new(source)
    # val tokens = []
    # loop:
    #     val tok = lexer.next_token()
    #     tokens.push(tok)
    #     if tok.kind == TokenKind.Eof:
    #         break
    # tokens
    []

fn parse(source: text) -> Module:
    """
    Parse source code and return AST Module.

    This will call into the parser implementation.
    """
    # TODO: implement
    pass

fn parse_expr(source: text) -> Expr:
    """
    Parse source as an expression and return Expr AST node.
    """
    # TODO: implement
    pass

fn parse_and_lower(source: text) -> HirModule:
    """
    Parse and lower to HIR.
    """
    # TODO: implement
    pass

fn infer_function_type(hir: HirFunction) -> TypeScheme:
    """
    Run type inference on an HIR function and return its type scheme.
    """
    # TODO: implement
    pass

fn lower_to_mir(hir: HirModule) -> MirModule:
    """
    Lower HIR module to MIR.
    """
    # TODO: implement
    pass
