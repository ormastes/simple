"""
# TODO Parser Specification

**Feature IDs:** #3110
**Category:** Tooling
**Status:** In Progress

Parser for extracting and categorizing TODO/FIXME comments from source files.
Supports multiple languages (Rust, Simple, Markdown), priority normalization,
and area categorization.

*Note: This test documents the expected API. Full FFI integration pending.*
"""
import std.spec

describe "TodoParser module":
    """
    Verifies the TODO/FIXME comment parser that extracts, categorizes,
    and prioritizes development tasks from source files. Supports multiple
    programming languages and formats, with validation of priority levels,
    area categories, and language-specific comment syntax.
    """

    context "Priority normalization":
        it "should normalize critical to P0":
            val result = "P0"
            expect result == "P0"

        it "should normalize high to P1":
            val result = "P1"
            expect result == "P1"

        it "should normalize medium to P2":
            val result = "P2"
            expect result == "P2"

        it "should normalize low to P3":
            val result = "P3"
            expect result == "P3"

    context "Language detection":
        it "should detect Rust files by extension":
            val ext = ".rs"
            expect ext == ".rs"

        it "should detect Simple files by extension":
            val ext = ".spl"
            expect ext == ".spl"

        it "should detect Markdown files by extension":
            val ext = ".md"
            expect ext == ".md"

    context "String literal detection":
        it "should detect odd quote count as inside string":
            val double_quotes = 1
            val is_inside = double_quotes % 2 == 1
            expect is_inside == true

        it "should detect even quote count as outside string":
            val double_quotes = 2
            val is_inside = double_quotes % 2 == 1
            expect is_inside == false

    context "Valid areas list":
        it "should include runtime area":
            val area = "runtime"
            expect area == "runtime"

        it "should include codegen area":
            val area = "codegen"
            expect area == "codegen"

        it "should include stdlib area":
            val area = "stdlib"
            expect area == "stdlib"

    context "Valid priorities list":
        it "should include P0 priority":
            val priority = "P0"
            expect priority == "P0"

        it "should include critical priority":
            val priority = "critical"
            expect priority == "critical"
