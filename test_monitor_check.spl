# Quick test to verify system monitoring works

use app.test_runner_new.system_monitor.{get_system_resources, system_exceeds_threshold}

fn main() -> i64:
    print "Checking system resources..."
    print ""

    val sys = get_system_resources()
    print "Current system state:"
    print "  CPU: {sys.cpu_percent}%"
    print "  Memory: {sys.memory_percent}% ({sys.memory_used_mb}MB / {sys.memory_total_mb}MB)"
    print ""

    # Test with normal thresholds
    val (violated_90, reason_90) = system_exceeds_threshold(90.0, 90.0)
    if violated_90:
        print "ALERT: System exceeds 90% threshold ({reason_90})"
    else:
        print "OK: System within 90% threshold"
    print ""

    # Test with low thresholds (should trigger)
    val (violated_10, reason_10) = system_exceeds_threshold(10.0, 10.0)
    if violated_10:
        print "EXPECTED: System exceeds 10% threshold ({reason_10}) - monitoring works!"
    else:
        print "WARNING: System below 10% threshold - unusual"
    print ""

    # Test with very high thresholds (should not trigger)
    val (violated_99, reason_99) = system_exceeds_threshold(99.0, 99.0)
    if violated_99:
        print "WARNING: System exceeds 99% threshold ({reason_99}) - system under heavy load!"
    else:
        print "OK: System within 99% threshold"

    0
