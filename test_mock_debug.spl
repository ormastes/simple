# Test sequential returns inside it block
import spec.{describe, it, expect, eq, Mock}

describe "Sequential returns":
    it "returns values in sequence":
        val m = Mock.new("Counter")
        m.when("next").returns_sequence([1, 2, 3])

        val r1 = m.call("next", [])
        print "Call 1: {r1}"
        expect(r1).to(eq(1))

        val r2 = m.call("next", [])
        print "Call 2: {r2}"
        expect(r2).to(eq(2))

        val r3 = m.call("next", [])
        print "Call 3: {r3}"
        expect(r3).to(eq(3))

        val r4 = m.call("next", [])
        print "Call 4 (wrap): {r4}"
        expect(r4).to(eq(1))
