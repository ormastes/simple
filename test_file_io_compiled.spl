#!/usr/bin/env simple
# Test file I/O with native functions that work in interpreter mode

fn main():
    print "=== Testing File I/O (Interpreter Mode) ==="

    # Test 1: Check if /tmp exists using native function
    print "\n1. Testing native_fs_exists..."
    val exists_result = native_fs_exists("/tmp")
    print "  /tmp exists: {exists_result}"

    # Test 2: Write a test file
    print "\n2. Testing native_fs_write_string..."
    val test_path = "/tmp/simple_fileio_test.txt"
    val write_result = native_fs_write_string(test_path, "Hello from Simple!")
    print "  Write result: {write_result}"

    # Test 3: Read the file back
    print "\n3. Testing native_fs_read_string..."
    val read_result = native_fs_read_string(test_path)
    print "  Content: {read_result}"

    # Test 4: Remove the test file
    print "\n4. Testing native_fs_remove_file..."
    val remove_result = native_fs_remove_file(test_path)
    print "  Remove result: {remove_result}"

    print "\n=== Tests completed ==="

# Native filesystem functions for interpreter
extern fn native_fs_exists(path: text) -> bool
extern fn native_fs_write_string(path: text, content: text) -> bool
extern fn native_fs_read_string(path: text) -> text
extern fn native_fs_remove_file(path: text) -> bool
