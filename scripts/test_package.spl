# Test Package Integration
# Validation test for package module structure

use app.build.package (
    Package,
    PackageType,
    PackageConfig,
    default_bootstrap_config,
    default_full_config,
    package_type_to_string
)

fn main():
    print "Testing Simple Package Integration"
    print "==================================="
    print ""

    # Test 1: Default configurations
    print "Test 1: Default configurations"
    val bootstrap_config = default_bootstrap_config()
    print "  bootstrap_config.package_type: {package_type_to_string(bootstrap_config.package_type)}"
    print "  bootstrap_config.version: '{bootstrap_config.version}'"
    print "  bootstrap_config.platform: '{bootstrap_config.platform}'"

    val full_config = default_full_config()
    print "  full_config.package_type: {package_type_to_string(full_config.package_type)}"
    print "  full_config.include_sources: {full_config.include_sources}"
    print "  ✓ Default configs created"

    # Test 2: Configuration customization
    print "\nTest 2: Configuration customization"
    var custom_config = PackageConfig(
        package_type: PackageType.Bootstrap,
        version: "1.0.0",
        platform: "linux-x64",
        output_path: "custom-package.tar.gz",
        include_sources: false,
        include_tests: false,
        compress: true
    )
    print "  custom_config.version: '{custom_config.version}'"
    print "  custom_config.output_path: '{custom_config.output_path}'"
    print "  ✓ Config customization working"

    # Test 3: Package type names
    print "\nTest 3: Package type names"
    print "  Bootstrap: '{package_type_to_string(PackageType.Bootstrap)}'"
    print "  Full: '{package_type_to_string(PackageType.Full)}'"
    print "  Custom: '{package_type_to_string(PackageType.Custom)}'"
    print "  ✓ Package type names working"

    print "\n✓ Package integration structure validated!"
    print "\nTo create actual packages:"
    print "  - Package.bootstrap() for bootstrap package"
    print "  - Package.full() for full source package"
    print "  - Package.create(config) for custom package"
    print ""
    print "Note: Actual package creation requires:"
    print "  - Built runtime binary (cargo build --profile bootstrap)"
    print "  - tar command available"
    print "  - Takes 1-2 minutes for bootstrap package"

    return 0
