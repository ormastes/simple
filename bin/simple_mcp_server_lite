#!/bin/bash
# Simple MCP Server Wrapper (Lite)
# Fast startup (~10ms) with core file/search tools
# Uses direct extern FFI calls, no heavy module imports

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
RUNTIME="${SCRIPT_DIR}/release/simple"
MCP_MAIN="${SCRIPT_DIR}/../src/app/mcp/main_lite.spl"

export SIMPLE_LIB="${SCRIPT_DIR}/../src"
export SIMPLE_VERSION=$(cat "${SCRIPT_DIR}/../VERSION" 2>/dev/null || echo "unknown")

# Suppress stderr, use stdbuf for output flushing
RUST_LOG=error exec stdbuf -oL "$RUNTIME" "$MCP_MAIN" 2>/dev/null
