#!/bin/bash
# Simple Language CLI â€” standalone native runner (no interpreter fallback)

set -euo pipefail

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
RUNTIME="$DIR/release/simple"

if [ ! -x "$RUNTIME" ]; then
    echo "Error: runtime binary not found at $RUNTIME" >&2
    echo "Build it with: scripts/bootstrap/bootstrap-c.sh --deploy" >&2
    echo "or: bin/release/simple build --release (once a runtime exists)" >&2
    exit 1
fi

export SIMPLE_LIB="$DIR/../src"
export SIMPLE_VERSION=$(cat "$DIR/../VERSION" 2>/dev/null || echo "unknown")

exec "$RUNTIME" "$@"
