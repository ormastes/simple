#!/bin/bash
# Simple Language CLI â€” standalone native runner (no interpreter fallback)

set -euo pipefail

DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
RUNTIME="$DIR/release/simple"

if [ ! -x "$RUNTIME" ]; then
    echo "Error: runtime binary not found at $RUNTIME" >&2
    echo "" >&2
    echo "To get a binary, try one of:" >&2
    echo "  1. Download latest release:  scripts/bootstrap/download-release.sh --output=bin/release/simple" >&2
    echo "  2. Bootstrap from C source:  scripts/bootstrap/bootstrap-from-scratch.sh --deploy" >&2
    echo "  3. Full bootstrap with fallback: scripts/bootstrap/bootstrap-from-scratch.sh --deploy" >&2
    exit 1
fi

export SIMPLE_LIB="$DIR/../src"
export SIMPLE_VERSION=$(cat "$DIR/../VERSION" 2>/dev/null || echo "unknown")

exec "$RUNTIME" "$@"
