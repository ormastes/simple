#!/bin/sh
# Simple Language Runtime
#
# Direct passthrough to the Rust runtime binary (simple_runtime).
# For the full CLI with Simple-language tools, use ./simple instead.

SCRIPT_DIR="$(cd "$(dirname "$0")/../.." && pwd)"

# Find the runtime binary
if [ -n "$SIMPLE_RUNTIME_PATH" ] && [ -x "$SIMPLE_RUNTIME_PATH" ]; then
    RUNTIME="$SIMPLE_RUNTIME_PATH"
elif [ -n "$SIMPLE_OLD_PATH" ] && [ -x "$SIMPLE_OLD_PATH" ]; then
    RUNTIME="$SIMPLE_OLD_PATH"
elif [ -x "$SCRIPT_DIR/rust/target/release/simple_runtime" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/release/simple_runtime"
elif [ -x "$SCRIPT_DIR/rust/target/debug/simple_runtime" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/debug/simple_runtime"
elif [ -x "$SCRIPT_DIR/rust/target/release/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/release/simple_old"
elif [ -x "$SCRIPT_DIR/rust/target/debug/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/debug/simple_old"
else
    echo "error: simple_runtime not found. Run 'cargo build' first." >&2
    exit 1
fi

# Pass through to the Rust runtime
exec "$RUNTIME" "$@"
