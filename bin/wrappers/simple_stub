#!/bin/sh
# Simple Settlement Stub - Written in Simple
#
# This wrapper script runs the Simple stub app using the Rust runtime.
# The actual stub implementation is in src/app/stub/main.spl

SCRIPT_DIR="$(cd "$(dirname "$0")/../.." && pwd)"

# Find the runtime binary
if [ -x "$SCRIPT_DIR/rust/target/release/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/release/simple_old"
elif [ -x "$SCRIPT_DIR/rust/target/debug/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/rust/target/debug/simple_old"
else
    echo "error: simple_old runtime not found. Run 'cargo build' first." >&2
    exit 1
fi

# Run the Simple stub app
exec "$RUNTIME" "$SCRIPT_DIR/src/app/stub/main.spl" "$@"
