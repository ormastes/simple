#!/bin/sh
# Simple Language CLI - New (Simple Implementation)
#
# This wrapper runs the Simple CLI implemented in Simple.
# It uses simple_old to interpret src/app/cli/main.spl.

SCRIPT_DIR="$(cd "$(dirname "$0")/../.." && pwd)"

# Find the runtime binary
if [ -x "$SCRIPT_DIR/target/release/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/target/release/simple_old"
elif [ -x "$SCRIPT_DIR/target/debug/simple_old" ]; then
    RUNTIME="$SCRIPT_DIR/target/debug/simple_old"
else
    echo "error: simple_old runtime not found. Run 'cargo build' first." >&2
    exit 1
fi

# Run the Simple CLI implementation
exec "$RUNTIME" "$SCRIPT_DIR/src/app/cli/main.spl" "$@"
