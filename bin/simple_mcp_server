#!/bin/bash
# Simple MCP Server Wrapper
# Suppresses stderr warnings for clean stdio transport

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"

# Use bootstrap binary (exists and is faster)
RUNTIME="${SCRIPT_DIR}/bootstrap/simple_runtime"

MCP_MAIN="${SCRIPT_DIR}/../src/app/mcp/main.spl"

# Suppress stderr (warnings) but keep stdout (JSON-RPC)
# Set RUST_LOG=error to minimize logging
RUST_LOG=error exec "$RUNTIME" "$MCP_MAIN" server 2>/dev/null
