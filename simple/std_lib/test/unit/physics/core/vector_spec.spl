# Physics Vector Math Tests

import physics.core as core

describe "Vector3":
    describe "creation":
        it "creates vector with components":
            let v = core.Vector3(1.0, 2.0, 3.0)
            expect v.x == 1.0
            expect v.y == 2.0
            expect v.z == 3.0

        it "creates zero vector":
            let v = core.Vector3::zero()
            expect v.x == 0.0
            expect v.y == 0.0
            expect v.z == 0.0

        it "creates unit vectors":
            let up = core.Vector3::up()
            let right = core.Vector3::right()
            let forward = core.Vector3::forward()
            expect up.y == 1.0
            expect right.x == 1.0
            expect forward.z == 1.0

    describe "arithmetic":
        it "adds vectors":
            let v1 = core.Vector3(1.0, 2.0, 3.0)
            let v2 = core.Vector3(4.0, 5.0, 6.0)
            let result = v1.add(v2)
            expect result.x == 5.0
            expect result.y == 7.0
            expect result.z == 9.0

        it "subtracts vectors":
            let v1 = core.Vector3(4.0, 5.0, 6.0)
            let v2 = core.Vector3(1.0, 2.0, 3.0)
            let result = v1.sub(v2)
            expect result.x == 3.0
            expect result.y == 3.0
            expect result.z == 3.0

        it "scales vector":
            let v = core.Vector3(1.0, 2.0, 3.0)
            let scaled = v.scale(2.0)
            expect scaled.x == 2.0
            expect scaled.y == 4.0
            expect scaled.z == 6.0

    describe "dot product":
        it "computes dot product":
            let v1 = core.Vector3(1.0, 0.0, 0.0)
            let v2 = core.Vector3(1.0, 0.0, 0.0)
            let dot = v1.dot(v2)
            expect dot == 1.0

        it "returns zero for perpendicular vectors":
            let v1 = core.Vector3(1.0, 0.0, 0.0)
            let v2 = core.Vector3(0.0, 1.0, 0.0)
            let dot = v1.dot(v2)
            expect dot == 0.0

    describe "cross product":
        it "computes cross product":
            let v1 = core.Vector3(1.0, 0.0, 0.0)
            let v2 = core.Vector3(0.0, 1.0, 0.0)
            let cross = v1.cross(v2)
            expect cross.x == 0.0
            expect cross.y == 0.0
            expect cross.z == 1.0

    describe "magnitude":
        it "computes magnitude":
            let v = core.Vector3(3.0, 4.0, 0.0)
            let mag = v.magnitude()
            expect mag == 5.0

        it "normalizes vector":
            let v = core.Vector3(3.0, 4.0, 0.0)
            let normalized = v.normalize()
            let mag = normalized.magnitude()
            expect mag >= 0.9999
            expect mag <= 1.0001

    describe "distance":
        it "computes distance between vectors":
            let v1 = core.Vector3(0.0, 0.0, 0.0)
            let v2 = core.Vector3(3.0, 4.0, 0.0)
            let dist = v1.distance(v2)
            expect dist == 5.0

describe "Vector2":
    describe "creation":
        it "creates 2D vector":
            let v = core.Vector2(1.0, 2.0)
            expect v.x == 1.0
            expect v.y == 2.0

    describe "operations":
        it "adds 2D vectors":
            let v1 = core.Vector2(1.0, 2.0)
            let v2 = core.Vector2(3.0, 4.0)
            let result = v1.add(v2)
            expect result.x == 4.0
            expect result.y == 6.0

        it "computes 2D magnitude":
            let v = core.Vector2(3.0, 4.0)
            let mag = v.magnitude()
            expect mag == 5.0
