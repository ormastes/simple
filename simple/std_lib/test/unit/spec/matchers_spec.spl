/// Tests for spec framework matchers

describe "Collection Matchers":
    describe "include":
        it "checks if array includes value":
            expect [1, 2, 3] to include 2

        it "fails when not included":
            # This would fail in real test
            expect [1, 2, 3] to include 2

    describe "have_length / have_size":
        it "checks array length":
            expect [1, 2, 3] to have_length 3

        it "have_size is alias":
            expect [1, 2, 3] to have_size 3

        it "works with empty arrays":
            expect [] to have_length 0

    describe "be_empty":
        it "checks empty collection":
            expect [] to be_empty

        it "checks empty string":
            expect "" to be_empty

describe "String Matchers":
    describe "include_string":
        it "checks if string includes substring":
            expect "hello world" to include_string "world"

        it "checks at start":
            expect "hello world" to include_string "hello"

        it "checks in middle":
            expect "hello world" to include_string "lo wo"

    describe "start_with":
        it "checks string prefix":
            expect "hello world" to start_with "hello"

        it "checks exact match":
            expect "test" to start_with "test"

    describe "end_with":
        it "checks string suffix":
            expect "hello world" to end_with "world"

        it "checks single character":
            expect "test" to end_with "t"

    describe "be_blank":
        it "checks empty string":
            expect "" to be_blank

        it "checks whitespace only":
            expect "   " to be_blank

        it "checks with newlines":
            expect "\n\t" to be_blank

describe "Comparison Matchers":
    describe "greater than / less than":
        it "gt checks greater than":
            expect 10 to gt 5

        it "lt checks less than":
            expect 5 to lt 10

        it "gte checks greater or equal":
            expect 10 to gte 10

        it "lte checks less or equal":
            expect 5 to lte 5

describe "Equality Matchers":
    describe "eq":
        it "checks equality":
            expect 42 to eq 42

        it "checks string equality":
            expect "hello" to eq "hello"

    describe "be":
        it "checks identity/equality":
            expect 5 to be 5

        it "works with strings":
            expect "test" to be "test"

    describe "be_nil":
        it "checks nil value":
            let x: Any = nil
            expect x to be_nil

describe "Negation":
    it "not_to with include":
        expect [1, 2, 3] not_to include 5

    it "not_to with eq":
        expect 5 not_to eq 6

    it "not_to with start_with":
        expect "hello" not_to start_with "bye"

    it "not_to with be_empty":
        expect [1, 2, 3] not_to be_empty
