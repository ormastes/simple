# Context Manager Specification
# Tests for context manager functionality including file operations

import spec.{describe, context, it, expect}
import context_manager.{TimerContext, time_now}

describe("Context Manager"):
    context("TimerContext"):
        it("should measure elapsed time"):
            let timer = TimerContext.new("test operation")
            timer.__enter__()

            # Simulate some work
            let mut sum = 0
            for i in 0..1000:
                sum = sum + i

            timer.__exit__(None, None, None)

            # Elapsed time should be positive
            let elapsed = timer.elapsed()
            expect(elapsed).to_be_greater_than_or_equal(0.0)

    context("time_now function"):
        it("should return current time"):
            let t1 = time_now()
            let t2 = time_now()

            # Time should be monotonically increasing
            expect(t2).to_be_greater_than_or_equal(t1)

            # Time should be reasonable (not zero)
            expect(t1).to_be_greater_than(0.0)
