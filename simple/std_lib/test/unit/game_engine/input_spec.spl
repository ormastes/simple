/// Input Abstraction Tests
/// Tests for the cross-engine input system

import std.spec
import game_engine.input

describe "KeyCode":
    it "creates letter key codes":
        let key_a = KeyCode::A
        let key_z = KeyCode::Z
        expect key_a is KeyCode::A
        expect key_z is KeyCode::Z

    it "creates number key codes":
        let key_0 = KeyCode::Key0
        let key_9 = KeyCode::Key9
        expect key_0 is KeyCode::Key0
        expect key_9 is KeyCode::Key9

    it "creates special key codes":
        let space = KeyCode::Space
        let enter = KeyCode::Enter
        let escape = KeyCode::Escape
        expect space is KeyCode::Space
        expect enter is KeyCode::Enter

    it "creates arrow key codes":
        let up = KeyCode::Up
        let down = KeyCode::Down
        let left = KeyCode::Left
        let right = KeyCode::Right
        expect up is KeyCode::Up
        expect down is KeyCode::Down

    it "creates modifier key codes":
        let shift = KeyCode::Shift
        let ctrl = KeyCode::Ctrl
        let alt = KeyCode::Alt
        expect shift is KeyCode::Shift
        expect ctrl is KeyCode::Ctrl

describe "MouseButton":
    it "creates left mouse button":
        let left = MouseButton::Left
        expect left is MouseButton::Left

    it "creates right mouse button":
        let right = MouseButton::Right
        expect right is MouseButton::Right

    it "creates middle mouse button":
        let middle = MouseButton::Middle
        expect middle is MouseButton::Middle

    it "creates extra mouse buttons":
        let button4 = MouseButton::Button4
        let button5 = MouseButton::Button5
        expect button4 is MouseButton::Button4
        expect button5 is MouseButton::Button5

describe "GamepadAxis":
    it "creates left stick axes":
        let left_x = GamepadAxis::LeftStickX
        let left_y = GamepadAxis::LeftStickY
        expect left_x is GamepadAxis::LeftStickX
        expect left_y is GamepadAxis::LeftStickY

    it "creates right stick axes":
        let right_x = GamepadAxis::RightStickX
        let right_y = GamepadAxis::RightStickY
        expect right_x is GamepadAxis::RightStickX
        expect right_y is GamepadAxis::RightStickY

    it "creates trigger axes":
        let left_trigger = GamepadAxis::LeftTrigger
        let right_trigger = GamepadAxis::RightTrigger
        expect left_trigger is GamepadAxis::LeftTrigger
        expect right_trigger is GamepadAxis::RightTrigger

describe "Mouse Input":
    it "tracks mouse position":
        let pos = (100.0, 200.0)
        let (x, y) = pos
        expect x == 100.0
        expect y == 200.0

    it "tracks mouse delta":
        let delta = (5.0, -3.0)
        let (dx, dy) = delta
        expect dx == 5.0
        expect dy == -3.0

describe "Gamepad Input":
    it "tracks gamepad axis values in valid range":
        let axis_value = 0.5
        expect axis_value >= -1.0
        expect axis_value <= 1.0

    it "applies deadzone to axis values":
        let deadzone = 0.1
        let small_value = 0.05
        expect deadzone > small_value

describe "Action System":
    it "validates action system exists":
        # Action mapping tested in implementation
        expect true == true
