/// Component System Tests
/// Tests for the cross-engine component abstraction

import std.spec
import game_engine.component
import sys.ffi

describe "ComponentType":
    it "creates Transform component type":
        let comp_type = ComponentType::Transform
        expect comp_type is ComponentType::Transform

    it "creates Render component type":
        let comp_type = ComponentType::Render
        expect comp_type is ComponentType::Render

    it "creates Physics component type":
        let comp_type = ComponentType::Physics
        expect comp_type is ComponentType::Physics

    it "creates Audio component type":
        let comp_type = ComponentType::Audio
        expect comp_type is ComponentType::Audio

    it "creates Script component type":
        let comp_type = ComponentType::Script
        expect comp_type is ComponentType::Script

    it "creates Custom component type":
        let comp_type = ComponentType::Custom
        expect comp_type is ComponentType::Custom

describe "ComponentManager":
    it "creates manager with no components":
        let manager = ComponentManager::new()
        expect manager.get_component_count() == 0

    it "gets components by type":
        let manager = ComponentManager::new()
        let render_comps = manager.get_components_by_type(ComponentType::Render)
        expect render_comps.len() == 0

    it "updates all components":
        let mut manager = ComponentManager::new()
        manager.update_all(0.016)

    it "removes disabled components":
        let mut manager = ComponentManager::new()
        manager.remove_disabled()

describe "Component Lifecycle":
    it "initializes component":
        # Component initialization tested via concrete implementations
        expect true == true

    it "updates component with delta time":
        # Component update tested via concrete implementations
        expect true == true

    it "enables and disables component":
        # Component enable/disable tested via concrete implementations
        expect true == true
