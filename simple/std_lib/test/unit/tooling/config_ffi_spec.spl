# Test FFI for runtime configuration (macro_trace, debug_mode)

extern fn rt_set_macro_trace(enabled: bool)
extern fn rt_is_macro_trace_enabled() -> bool
extern fn rt_set_debug_mode(enabled: bool)
extern fn rt_is_debug_mode_enabled() -> bool

describe "Runtime Configuration FFI":
    it "should enable and disable macro trace":
        # Default should be false
        assert not rt_is_macro_trace_enabled()

        # Enable it
        rt_set_macro_trace(true)
        assert rt_is_macro_trace_enabled()

        # Disable it
        rt_set_macro_trace(false)
        assert not rt_is_macro_trace_enabled()

    it "should enable and disable debug mode":
        # Default should be false
        assert not rt_is_debug_mode_enabled()

        # Enable it
        rt_set_debug_mode(true)
        assert rt_is_debug_mode_enabled()

        # Disable it
        rt_set_debug_mode(false)
        assert not rt_is_debug_mode_enabled()

    it "should maintain independent flags":
        # Set macro trace on, debug mode off
        rt_set_macro_trace(true)
        rt_set_debug_mode(false)

        assert rt_is_macro_trace_enabled()
        assert not rt_is_debug_mode_enabled()

        # Swap them
        rt_set_macro_trace(false)
        rt_set_debug_mode(true)

        assert not rt_is_macro_trace_enabled()
        assert rt_is_debug_mode_enabled()

        # Clean up
        rt_set_debug_mode(false)
