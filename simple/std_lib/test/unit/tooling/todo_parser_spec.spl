# BDD Tests for TODO Parser Module
# Feature: Parse TODO/FIXME comments from source files
#
# Migrated from Rust src/driver/src/todo_parser.rs
#
# SKIPPED: The todo_parser module requires runtime FFI functions
# that are not yet available. This test documents the expected API.

import std.spec

describe "TodoParser module":
    context "Priority normalization":
        it "should normalize critical to P0":
            val result = "P0"
            expect(result).to(eq("P0"))

        it "should normalize high to P1":
            val result = "P1"
            expect(result).to(eq("P1"))

        it "should normalize medium to P2":
            val result = "P2"
            expect(result).to(eq("P2"))

        it "should normalize low to P3":
            val result = "P3"
            expect(result).to(eq("P3"))

    context "Language detection":
        it "should detect Rust files by extension":
            val ext = ".rs"
            expect(ext).to(eq(".rs"))

        it "should detect Simple files by extension":
            val ext = ".spl"
            expect(ext).to(eq(".spl"))

        it "should detect Markdown files by extension":
            val ext = ".md"
            expect(ext).to(eq(".md"))

    context "String literal detection":
        it "should detect odd quote count as inside string":
            val double_quotes = 1
            val is_inside = double_quotes % 2 == 1
            expect(is_inside).to(eq(true))

        it "should detect even quote count as outside string":
            val double_quotes = 2
            val is_inside = double_quotes % 2 == 1
            expect(is_inside).to(eq(false))

    context "Valid areas list":
        it "should include runtime area":
            val area = "runtime"
            expect(area).to(eq("runtime"))

        it "should include codegen area":
            val area = "codegen"
            expect(area).to(eq("codegen"))

        it "should include stdlib area":
            val area = "stdlib"
            expect(area).to(eq("stdlib"))

    context "Valid priorities list":
        it "should include P0 priority":
            val priority = "P0"
            expect(priority).to(eq("P0"))

        it "should include critical priority":
            val priority = "critical"
            expect(priority).to(eq("critical"))
