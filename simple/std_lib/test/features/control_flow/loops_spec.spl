# Loops Feature Specification
# Feature #13: For loops, while loops, break, continue
# Category: Control Flow | Difficulty: 2 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List[String]
    tests: List[String]
    description: String
    code_examples: List[String]
    dependencies: List[Int]
    required_by: List[Int]
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 13,
    name: 'Loops',
    category: 'Control Flow',
    difficulty: 2,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/syntax.md',
    files: [
        'src/compiler/src/interpreter_control.rs',
        'src/parser/src/statements/mod.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_control.rs'
    ],
    description: 'Loop constructs including for-in loops over iterables, while loops with conditions, and break/continue control.',
    code_examples: [],
    dependencies: [1, 2],
    required_by: [20],
    notes: 'For loops use for-in syntax. While loops support break and continue.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  LOOPS FEATURE SPECIFICATION (#13)')
print('  Category: Control Flow | Difficulty: 2 | Status: Complete')
print('============================================================')
print('')

let mut passed = 0
let mut failed = 0

print('describe For loops:')
print('  it iterates over arrays:')

let mut sum = 0
for x in [1, 2, 3, 4, 5]:
    sum = sum + x

if sum == 15:
    print('    [PASS] for loop over array')
    passed = passed + 1
else:
    print('    [FAIL] for loop sum')
    failed = failed + 1

print('  it iterates with index access:')

let items = ['a', 'b', 'c']
let mut count = 0
for item in items:
    count = count + 1

if count == 3:
    print('    [PASS] for loop count')
    passed = passed + 1
else:
    print('    [FAIL] for loop count')
    failed = failed + 1

print('  it supports nested loops:')

let mut product = 0
for i in [1, 2]:
    for j in [1, 2, 3]:
        product = product + 1

if product == 6:
    print('    [PASS] nested for loops')
    passed = passed + 1
else:
    print('    [FAIL] nested loops')
    failed = failed + 1

print('')
print('describe While loops:')
print('  it loops while condition is true:')

let mut n = 0
while n < 5:
    n = n + 1

if n == 5:
    print('    [PASS] while loop')
    passed = passed + 1
else:
    print('    [FAIL] while condition')
    failed = failed + 1

print('  it supports break:')

let mut val = 0
while true:
    val = val + 1
    if val == 3:
        break

if val == 3:
    print('    [PASS] break in while')
    passed = passed + 1
else:
    print('    [FAIL] break')
    failed = failed + 1

print('  it supports continue:')

let mut total = 0
let mut idx = 0
while idx < 5:
    idx = idx + 1
    if idx == 3:
        continue
    total = total + idx

if total == 12:
    print('    [PASS] continue in while')
    passed = passed + 1
else:
    print('    [FAIL] continue')
    failed = failed + 1

print('')
print('describe Loop with collections:')
print('  it iterates over string characters:')

let mut char_count = 0
for ch in 'hello':
    char_count = char_count + 1

if char_count == 5:
    print('    [PASS] for loop over string')
    passed = passed + 1
else:
    print('    [FAIL] string iteration')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# {FEATURE.name}')
print('')
print('**Feature ID:** #{FEATURE.id}')
print('**Category:** {FEATURE.category}')
print('**Difficulty:** Level {FEATURE.difficulty}/5')
print('**Status:** {FEATURE.status}')
print('**Implementation:** {FEATURE.impl_type}')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Implementation Files')
print('')
for file in FEATURE.files:
    print('- `{file}`')
print('')
print('## Test Files')
print('')
for test in FEATURE.tests:
    print('- `{test}`')
print('')
if FEATURE.dependencies.len() > 0:
    print('## Dependencies')
    print('')
    print('Depends on: {FEATURE.dependencies}')
    print('')
if FEATURE.required_by.len() > 0:
    print('## Required By')
    print('')
    print('Features: {FEATURE.required_by}')
    print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
