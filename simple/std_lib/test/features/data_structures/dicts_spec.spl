# Dicts Feature Specification
# Feature #21: Dictionary/Map type
# Category: Data Structures | Difficulty: 3 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List[String]
    tests: List[String]
    description: String
    code_examples: List[String]
    dependencies: List[Int]
    required_by: List[Int]
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 21,
    name: 'Dicts',
    category: 'Data Structures',
    difficulty: 3,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/data_structures.md',
    files: [
        'src/runtime/src/value/collections.rs',
        'src/compiler/src/interpreter.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_collections_tests.rs'
    ],
    description: 'Dictionary (hash map) type with string keys. Supports literal syntax, key access, iteration, and methods like keys, values, contains_key.',
    code_examples: [],
    dependencies: [1, 2, 10, 25],
    required_by: [11],
    notes: 'Dict uses {} literal syntax. Keys are strings by default.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  DICTS FEATURE SPECIFICATION (#21)')
print('  Category: Data Structures | Difficulty: 3 | Status: Complete')
print('============================================================')
print('')

let mut passed = 0
let mut failed = 0

print('describe Dict literals:')
print('  it creates empty dict:')

let empty = {}
if empty.len() == 0:
    print('    [PASS] empty dict')
    passed = passed + 1
else:
    print('    [FAIL] empty dict')
    failed = failed + 1

print('  it creates dict with entries:')

let person = {'name': 'Alice', 'city': 'NYC'}
if person.len() == 2:
    print('    [PASS] dict with entries')
    passed = passed + 1
else:
    print('    [FAIL] dict entries')
    failed = failed + 1

print('')
print('describe Dict access:')
print('  it gets value by key:')

let data = {'x': 10, 'y': 20}
if data['x'] == 10 and data['y'] == 20:
    print('    [PASS] dict key access')
    passed = passed + 1
else:
    print('    [FAIL] key access')
    failed = failed + 1

print('  it supports nested dicts:')

let nested = {'outer': {'inner': 42}}
if nested['outer']['inner'] == 42:
    print('    [PASS] nested dict access')
    passed = passed + 1
else:
    print('    [FAIL] nested access')
    failed = failed + 1

print('  it supports integer values:')

let nums = {'one': 1, 'two': 2}
if nums['one'] + nums['two'] == 3:
    print('    [PASS] dict integer values')
    passed = passed + 1
else:
    print('    [FAIL] integer values')
    failed = failed + 1

print('')
print('describe Dict methods:')
print('  it returns dict length:')

let items = {'one': 1, 'two': 2, 'three': 3}
if items.len() == 3:
    print('    [PASS] dict len')
    passed = passed + 1
else:
    print('    [FAIL] len')
    failed = failed + 1

print('  it checks if key exists:')

let lookup = {'key1': 'value1'}
if lookup.contains_key('key1'):
    print('    [PASS] contains_key')
    passed = passed + 1
else:
    print('    [FAIL] contains_key')
    failed = failed + 1

print('  it returns keys:')

let kv = {'a': 1, 'b': 2}
let keys = kv.keys()
if keys.len() == 2:
    print('    [PASS] dict keys')
    passed = passed + 1
else:
    print('    [FAIL] keys')
    failed = failed + 1

print('  it returns values:')

let vals = kv.values()
if vals.len() == 2:
    print('    [PASS] dict values')
    passed = passed + 1
else:
    print('    [FAIL] values')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# Dicts')
print('')
print('**Feature ID:** #21')
print('**Category:** Data Structures')
print('**Difficulty:** Level 3/5')
print('**Status:** Complete')
print('**Implementation:** Rust')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
