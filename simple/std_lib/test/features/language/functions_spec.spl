# Functions Feature Specification
# Feature #12: Named functions, closures, lambdas, higher-order functions
# Category: Language | Difficulty: 3 | Status: Complete

print("============================================================")
print("  FUNCTIONS FEATURE SPECIFICATION (#12)")
print("  Category: Language | Difficulty: 3 | Status: Complete")
print("============================================================")
print("")

let mut passed = 0
let mut failed = 0

print("describe Function definitions:")

print("  it defines and calls named functions:")
fn add(a, b):
    return a + b
if add(2, 3) == 5:
    print("    [PASS] named function add(2, 3) = 5")
    passed = passed + 1
else:
    print("    [FAIL] named function")
    failed = failed + 1

print("  it supports recursive functions:")
fn factorial(n):
    if n <= 1:
        return 1
    return n * factorial(n - 1)
if factorial(5) == 120:
    print("    [PASS] recursive factorial(5) = 120")
    passed = passed + 1
else:
    print("    [FAIL] recursive function")
    failed = failed + 1

print("  it supports nested functions:")
fn outer(x):
    fn inner(y):
        return x + y
    return inner(10)
if outer(5) == 15:
    print("    [PASS] nested function")
    passed = passed + 1
else:
    print("    [FAIL] nested function")
    failed = failed + 1

print("")
print("describe Lambda expressions:")

print("  it creates inline lambdas:")
let double = \x: x * 2
if double(5) == 10:
    print("    [PASS] lambda \\x: x * 2")
    passed = passed + 1
else:
    print("    [FAIL] lambda")
    failed = failed + 1

print("  it supports multi-param lambdas:")
let add_lambda = \a, b: a + b
if add_lambda(3, 4) == 7:
    print("    [PASS] multi-param lambda")
    passed = passed + 1
else:
    print("    [FAIL] multi-param lambda")
    failed = failed + 1

print("")
print("describe Higher-order functions:")

print("  it uses map:")
let nums = [1, 2, 3]
let doubled = nums.map(\x: x * 2)
if doubled == [2, 4, 6]:
    print("    [PASS] map doubles list")
    passed = passed + 1
else:
    print("    [FAIL] map")
    failed = failed + 1

print("  it uses filter:")
let nums2 = [1, 2, 3, 4, 5]
let evens = nums2.filter(\x: x % 2 == 0)
if evens == [2, 4]:
    print("    [PASS] filter keeps evens")
    passed = passed + 1
else:
    print("    [FAIL] filter")
    failed = failed + 1

print("  it uses reduce:")
let nums3 = [1, 2, 3, 4]
let sum = nums3.reduce(0, \acc, x: acc + x)
if sum == 10:
    print("    [PASS] reduce sums to 10")
    passed = passed + 1
else:
    print("    [FAIL] reduce")
    failed = failed + 1

# Documentation
print("")
print("============================================================")
print("  GENERATED DOCUMENTATION")
print("============================================================")
print("")
print("# Functions")
print("")
print("**Feature ID:** #12")
print("**Category:** Language")
print("**Difficulty:** Level 3/5")
print("**Status:** Complete")
print("**Implementation:** Rust")
print("")
print("## Description")
print("")
print("First-class functions with lexical closure. Supports named functions,")
print("anonymous lambdas, default parameters, variadic arguments, and")
print("higher-order functions like map/filter/reduce.")
print("")
print("## Implementation Files")
print("- `src/compiler/src/interpreter_call.rs`")
print("")
print("## Code Examples")
print("```simple")
print("# Named function")
print("fn greet(n: String) -> String:")
print("    return \"Hello, \" + n + \"!\"")
print("")
print("# Lambda expression")
print("let double = \\x: x * 2")
print("")
print("# Higher-order functions")
print("let numbers = [1, 2, 3, 4, 5]")
print("let evens = numbers.filter(\\x: x % 2 == 0)")
print("let doubled = numbers.map(\\x: x * 2)")
print("```")
print("")
print("## Notes")
print("Functions are first-class values. Closures capture lexical environment.")

# Summary
print("")
print("============================================================")
print("  TEST SUMMARY")
print("============================================================")
print(f"Passed: {passed}")
print(f"Failed: {failed}")
if failed == 0:
    print("All tests PASSED!")
print("============================================================")
