# Variables Feature Specification
# Feature #15: Variable declarations (let, mut, const)
# Category: Language | Difficulty: 2 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List[String]
    tests: List[String]
    description: String
    code_examples: List[String]
    dependencies: List[Int]
    required_by: List[Int]
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 15,
    name: 'Variables',
    category: 'Language',
    difficulty: 2,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/syntax.md',
    files: [
        'src/compiler/src/interpreter.rs',
        'src/parser/src/statements/mod.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_basic_tests.rs'
    ],
    description: 'Variable declarations with let for immutable bindings and let mut for mutable bindings. Supports type annotations and inference.',
    code_examples: [],
    dependencies: [1, 2],
    required_by: [10, 11, 12],
    notes: 'Variables are immutable by default. Use mut for mutability.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  VARIABLES FEATURE SPECIFICATION (#15)')
print('  Category: Language | Difficulty: 2 | Status: Complete')
print('============================================================')
print('')

let mut passed = 0
let mut failed = 0

print('describe Let bindings:')
print('  it creates immutable binding:')

let x = 42
if x == 42:
    print('    [PASS] let binding')
    passed = passed + 1
else:
    print('    [FAIL] let binding')
    failed = failed + 1

print('  it creates string binding:')

let name = 'Alice'
if name == 'Alice':
    print('    [PASS] string binding')
    passed = passed + 1
else:
    print('    [FAIL] string binding')
    failed = failed + 1

print('  it creates boolean binding:')

let flag = true
if flag:
    print('    [PASS] boolean binding')
    passed = passed + 1
else:
    print('    [FAIL] boolean binding')
    failed = failed + 1

print('')
print('describe Mutable bindings:')
print('  it creates mutable binding:')

let mut count = 0
count = count + 1
if count == 1:
    print('    [PASS] mutable binding')
    passed = passed + 1
else:
    print('    [FAIL] mutable binding')
    failed = failed + 1

print('  it allows reassignment:')

let mut value = 10
value = 20
value = 30
if value == 30:
    print('    [PASS] reassignment')
    passed = passed + 1
else:
    print('    [FAIL] reassignment')
    failed = failed + 1

print('  it supports compound assignment:')

let mut n = 5
n = n + 3
n = n * 2
if n == 16:
    print('    [PASS] compound operations')
    passed = passed + 1
else:
    print('    [FAIL] compound operations')
    failed = failed + 1

print('')
print('describe Variable scope:')
print('  it respects block scope:')

let outer = 100
if true:
    let inner = 200
    if outer == 100:
        print('    [PASS] block scope')
        passed = passed + 1
    else:
        print('    [FAIL] block scope')
        failed = failed + 1

print('  it shadows outer variables:')

let shadow = 1
if true:
    let shadow = 2
    if shadow == 2:
        print('    [PASS] variable shadowing')
        passed = passed + 1
    else:
        print('    [FAIL] shadowing')
        failed = failed + 1

print('')
print('describe Variable initialization:')
print('  it initializes with expressions:')

let a = 5
let b = 3
let sum = a + b
if sum == 8:
    print('    [PASS] expression initialization')
    passed = passed + 1
else:
    print('    [FAIL] expression init')
    failed = failed + 1

print('  it initializes with function calls:')

fn get_value():
    return 42

let result = get_value()
if result == 42:
    print('    [PASS] function call initialization')
    passed = passed + 1
else:
    print('    [FAIL] function call init')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# Variables')
print('')
print('**Feature ID:** #15')
print('**Category:** Language')
print('**Difficulty:** Level 2/5')
print('**Status:** Complete')
print('**Implementation:** Rust')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
