# Token Kinds and Grammar Helper Functions
#
# Token types and helper functions for grammar construction.

import parser.treesitter.{Rule}

export TokenKind
export token, ref, seq, choice, optional, repeat, repeat1, field, prec_left, prec_right

# ============================================================================
# Helper Functions for Grammar Construction
# ============================================================================

fn token(kind: TokenKind) -> Rule:
    Rule.Token(kind)

fn ref(name: String) -> Rule:
    Rule.Ref(name)

fn seq(rules: List<Rule>) -> Rule:
    Rule.Seq(rules)

fn choice(rules: List<Rule>) -> Rule:
    Rule.Choice(rules)

fn optional(rule: Rule) -> Rule:
    Rule.Optional(rule)

fn repeat(rule: Rule) -> Rule:
    Rule.Repeat(rule)

fn repeat1(rule: Rule) -> Rule:
    Rule.Repeat1(rule)

fn field(name: String, rule: Rule) -> Rule:
    Rule.Field(name, rule)

fn prec_left(precedence: Int, rule: Rule) -> Rule:
    Rule.PrecLeft(precedence, rule)

fn prec_right(precedence: Int, rule: Rule) -> Rule:
    Rule.PrecRight(precedence, rule)

# ============================================================================
# Token Kinds
# ============================================================================

enum TokenKind:
    # Keywords
    Fn, Let, Mut, Return, If, Elif, Else, Match, Case,
    For, In, While, Loop, Break, Continue,
    Class, Struct, Enum, Trait,
    Import, As, From,
    True, False, Nil,
    And, Or, Not,
    Then,  # For if-expressions

    # Operators
    Plus, Minus, Star, Slash, Percent, DoubleStar,
    Eq, DoubleEq, NotEq,
    Lt, Gt, LtEq, GtEq,
    Pipe, Ampersand, Caret, Tilde,
    LtLt, GtGt,
    Dot, Comma, Colon, Arrow, Question, Exclamation,
    Underscore,

    # Delimiters
    LParen, RParen,
    LBracket, RBracket,
    LBrace, RBrace,
    Newline, Indent, Dedent,

    # Literals
    Integer, Float, String,
    FStringStart, FStringText, FStringEnd, FStringFormatSpec,

    # Identifiers
    Identifier, TypeIdentifier
