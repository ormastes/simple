# BDD Spec Framework - Main Entry Point
# Provides RSpec-style testing DSL for Simple
#
# Features:
# - TEST-010: shared_examples for reusable example groups
# - TEST-011: it_behaves_like to include shared examples
# - TEST-012: val/let_lazy memoization for per-example state

# Core DSL
export describe, context, it, skip from dsl
export before_each, after_each, before_all, after_all from dsl

# Shared Examples (TEST-010, TEST-011)
export shared_examples, it_behaves_like, include_examples from dsl

# Context Sharing (reusable contexts with given fixtures)
export context_def, context_compose from dsl
export given, given_lazy, then from dsl

# Let Memoization (TEST-012)
# - eager (macro): eager evaluation before each example
# - let_lazy: true lazy memoization, evaluated on first access
export eager, let_lazy, get_let, has_let from dsl

# Expectations
export expect, expect_raises from expect

# Matchers
export eq, be, be_nil from matchers.core
export gt, lt, gte, lte from matchers.comparison
export include, be_empty, have_length, have_size from matchers.collection
export include_string, start_with, end_with, be_blank from matchers.string
export raise_error from matchers.error

# Runner (for CLI)
export run_specs from runner.cli

# Configuration
export tag_default, timeout_default from runtime

# Mocking (test doubles)
export Mock, Spy, Stub, CallInfo, CallVerifier from mock

# Advanced: Direct access to memoization runtime
export MemoizedValue from runtime
export set_memoized, get_memoized, has_memoized from runtime

# Advanced: Direct access to registry types
export SharedExampleDefinition from registry
export register_shared_examples, get_shared_examples from registry

# Documentation Formatters (Living Documentation)
export format_spec_to_html from formatter.html
export format_spec_to_markdown from formatter.markdown
export HtmlFormatter, MarkdownFormatter from formatter

# Architecture Testing (#942-#943)
export Layer, LayerRef, Architecture, Violation, ArchCheckResult from arch
export layer, no_mock_in_production, no_layer_cycles, no_skip_layer from arch
export arch_test, layers from arch

# Gherkin-Style System Test DSL (#606-#610)
# BDD-style feature/scenario/given/when/then for natural language tests
export feature, scenario, scenario_outline from gherkin
export given, when, then, and_then from gherkin
export examples, get_var, set_var from gherkin
export define_given, define_when, define_then from gherkin
export run_scenario_outline_with_examples from gherkin
export StepKind, StepDefinition, ScenarioContext from gherkin

# Feature Documentation Generation
# BDD-driven feature documentation with auto-generated markdown
export FeatureMetadata, FeatureRegistry from feature_doc
export feature_metadata from feature_doc
export {
    get_global_registry,
    register_feature,
    get_feature,
    get_features_by_category,
    get_all_features,
    get_all_categories,
    clear_feature_registry
} from feature_doc
export generate_feature_doc, generate_category_docs, generate_all_docs from feature_doc
export write_feature_docs from feature_doc

# Multi-Mode Test Execution (#2050-#2054)
# Execute tests across interpreter, JIT, and compiled (SMF) modes
export ExecutionMode, ModeSet from execution_mode
export mode_to_string, string_to_mode from execution_mode
export is_mode_available, get_available_modes from execution_mode

export FailureStrategy, ModeConfig from mode_config
export ProjectConfig, DirectoryConfig, FileConfig from mode_config
export ConfigLevel, ConfigSource from mode_config
export string_to_failure_strategy, failure_strategy_to_string from mode_config
export parse_mode_list from mode_config

export TestResult, TestStatus, ModeExecutionResult from mode_runner
export ModeRunner, run_in_modes from mode_runner

export parse_sdn_config, parse_toml_test_config from mode_config_parser
export parse_file_attributes, ConfigHierarchy from mode_config_parser
export discover_project_config, discover_directory_config from mode_config_parser

export ModeReporter, PerformanceComparison, ModeTiming from mode_reporter
export compare_performance, format_performance_table from mode_reporter
export format_mode_availability from mode_reporter

# Screenshot Capture for GUI Tests (@gui tag)
# Capture before/after screenshots for TUI, Vulkan, and terminal tests
export ScreenshotConfig, ScreenshotResult, ScreenshotMetadata from screenshot
export CaptureMode, ImageFormat from screenshot
export with_screenshot, with_screenshot_config from screenshot
export capture_before, capture_after, save_screenshots from screenshot
export screenshot_exists, get_screenshot_path, screenshot_markdown from screenshot
# FFI-based screenshot API (automatic runtime capture)
export enable_ffi_screenshots, disable_ffi_screenshots, is_ffi_screenshots_enabled from screenshot
export set_ffi_refresh, set_ffi_output_dir from screenshot
export set_ffi_test_context, clear_ffi_test_context from screenshot
export capture_before_ffi, capture_after_ffi from screenshot
export screenshot_exists_ffi, get_screenshot_path_ffi, clear_ffi_captures from screenshot
export CAPTURE_TYPE_BEFORE, CAPTURE_TYPE_AFTER, CAPTURE_TYPE_ON_CHANGE from screenshot

# Diagram Generation (Mermaid)
# Generate sequence, class, and architecture diagrams from test execution traces
export DiagramType, DiagramConfig from diagram
export CallType, CallEvent, CallEventRecorder from diagram
export set_recorder, get_recorder, clear_recorder from diagram
export trace_call, trace_method, trace_return, mark_architectural from diagram
export generate_sequence, generate_class_diagram, generate_arch_diagram from diagram
export with_sequence_diagram, with_all_diagrams, with_diagram from diagram
export save_diagram, diagram_exists, diagram_placeholder from diagram
# FFI-based diagram API (automatic runtime tracing)
export enable_ffi_recording, disable_ffi_recording, clear_ffi_recording from diagram
export generate_sequence_ffi, generate_class_ffi, generate_arch_ffi from diagram

# Diagram Integration (connects diagrams to test execution)
export enable_diagrams, enable_all_diagrams, disable_diagrams, is_diagram_enabled from diagram_integration
export set_diagram_output, set_test_context, clear_test_context from diagram_integration
export with_seq_diagram, with_class_diagram, with_arch_diagram, with_all_diagram_types from diagram_integration
export traced_it from diagram_integration
export generate_diagrams_for_spec, embed_diagrams_in_markdown, get_diagram_path from diagram_integration
