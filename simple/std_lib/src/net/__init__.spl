# Async networking module for Simple language
# Uses monoio runtime with io_uring for high-performance async I/O
# Feature: #1750-#1754 (Simple Language API)

# Re-export submodules
import net.tcp
import net.udp
import net.runtime

# Re-export commonly used types
pub use tcp::{TcpListener, TcpStream}
pub use udp::{UdpSocket}
pub use runtime::{Runtime, init_runtime, shutdown_runtime, spawn, block_on}

# Network error types
pub enum NetError:
    IoError(message: String)
    AddrParseError(message: String)
    ConnectionRefused
    ConnectionReset
    TimedOut
    WouldBlock
    NotConnected
    AlreadyConnected

# Convert error code to NetError
fn error_from_code(code: i64) -> NetError:
    match code:
        case -1:
            return NetError::IoError("I/O operation failed")
        case -2:
            return NetError::ConnectionRefused
        case -3:
            return NetError::ConnectionReset
        case -4:
            return NetError::TimedOut
        case -5:
            return NetError::WouldBlock
        case -6:
            return NetError::NotConnected
        case -7:
            return NetError::AlreadyConnected
        case _:
            return NetError::IoError("Unknown error")
