# Test macro template substitution with const params

# Test 1: Template in function body strings
macro greet(name: Str const) -> (returns result: Str):
    emit result:
        "Hello, {name}!"

# Test 2: Template in intro contracts (function name substitution)
# NOTE: This requires parsing f-strings in intro stubs, which may not be implemented yet
# macro make_getter(field_name: Str const) -> (
#     intro getter:
#         enclosing.module.fn "get_{field_name}"() -> Str
# ):
#     emit getter:
#         fn "get_{field_name}"() -> Str:
#             return "{field_name} value"

# Test 3: Template with multiple const params
macro make_message(greeting: Str const, name: Str const) -> (returns result: Str):
    emit result:
        "{greeting}, {name}!"

# Test 4: Template with integer const params
macro make_number_msg(num: Int const) -> (returns result: Str):
    emit result:
        "The number is {num}"

fn main():
    # Test 1: Basic template substitution
    let msg1 = greet!("World")
    println!("Test 1: ", msg1)
    assert_eq!(msg1, "Hello, World!")

    # Test 3: Multiple const params
    let msg2 = make_message!("Hi", "Alice")
    println!("Test 3: ", msg2)
    assert_eq!(msg2, "Hi, Alice!")

    # Test 4: Integer in template
    let msg3 = make_number_msg!(42)
    println!("Test 4: ", msg3)
    assert_eq!(msg3, "The number is 42")

    println!("All template tests passed!")
