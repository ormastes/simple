# Complete Infrastructure Features Catalog
# All 9 core compiler infrastructure features

use spec.feature_doc.FeatureMetadata

let infrastructure_features = [
    # Feature #1: Lexer
    FeatureMetadata {
        id: 1,
        name: "Lexer",
        category: "Infrastructure",
        difficulty: 3,
        status: "✅ Complete",
        impl_type: "Rust",
        spec_ref: "doc/spec/syntax.md",
        files: ["src/parser/src/lexer.rs"],
        tests: ["src/parser/tests/lexer_tests.rs"],
        description: "Tokenizes Simple language source code into tokens. Handles keywords, identifiers, literals, operators, and INDENT/DEDENT tokens for Python-style significant whitespace.",
        code_examples: ["let x = 42 + 10"],
        dependencies: [],
        required_by: [2],
        notes: "First stage of compilation pipeline. Uses indentation-aware lexing similar to Python."
    },

    # Feature #2: Parser
    FeatureMetadata {
        id: 2,
        name: "Parser",
        category: "Infrastructure",
        difficulty: 4,
        status: "✅ Complete",
        impl_type: "Rust",
        spec_ref: "doc/spec/syntax.md",
        files: [
            "src/parser/src/parser.rs",
            "src/parser/src/expressions/mod.rs",
            "src/parser/src/statements/mod.rs",
            "src/parser/src/types_def/mod.rs"
        ],
        tests: ["src/parser/tests/parser_tests.rs"],
        description: "Parses token stream into Abstract Syntax Tree (AST). Implements recursive descent parser with Pratt parsing for expressions. Handles all Simple language constructs including functions, classes, pattern matching, and metaprogramming.",
        code_examples: ["fn add(x: Int, y: Int) -> Int: return x + y"],
        dependencies: [1],
        required_by: [3, 4],
        notes: "Second stage of compilation. Produces modular AST with separate expression, statement, and type definition nodes."
    },

    # Feature #3: AST
    FeatureMetadata {
        id: 3,
        name: "AST (Abstract Syntax Tree)",
        category: "Infrastructure",
        difficulty: 3,
        status: "✅ Complete",
        impl_type: "Rust",
        spec_ref: "doc/spec/syntax.md",
        files: ["src/parser/src/ast.rs"],
        tests: ["src/parser/tests/ast_tests.rs"],
        description: "Defines Abstract Syntax Tree node types for all Simple language constructs. Provides structured representation of parsed code with full location information for error reporting.",
        code_examples: ["FunctionDef { name: add, params: [x: Int], body: [...] }"],
        dependencies: [2],
        required_by: [4],
        notes: "Immutable tree structure with rich metadata. Foundation for all subsequent compilation stages."
    },

    # Feature #4: HIR (High-level IR)
    FeatureMetadata {
        id: 4,
        name: "HIR (High-level Intermediate Representation)",
        category: "Infrastructure",
]
print(f"Features: {infrastructure_features.len()}")
