#!/bin/bash
# Simple Language Model Server (MCP Protocol)
# Launcher script for LMS

SCRIPT_DIR="$(cd "$(dirname "${BASH_SOURCE[0]}")" && pwd)"
PROJECT_ROOT="$(cd "$SCRIPT_DIR/../.." && pwd)"

# Find the simple compiler
if [ -f "$PROJECT_ROOT/target/debug/simple" ]; then
    SIMPLE="$PROJECT_ROOT/target/debug/simple"
elif [ -f "$PROJECT_ROOT/target/release/simple" ]; then
    SIMPLE="$PROJECT_ROOT/target/release/simple"
else
    echo "Error: Simple compiler not found" >&2
    exit 1
fi

# Run the LMS SMF module
exec "$SIMPLE" "$PROJECT_ROOT/simple/app/lms/main.smf" "$@"
