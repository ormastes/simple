# File I/O Protection Rules Configuration
# Protects critical project files (Claude Code already sandboxes to project)

# Protection rules table
# pattern: File path or pattern to match
# type: exact|glob|regex
# action: deny|protect|redirect|atomic|allow
# reason: Human-readable explanation

protected_paths |pattern, type, action, reason|
    "CLAUDE.md", exact, protect, "Project instructions - read-only"
    "MEMORY.md", exact, protect, "Memory notes - read-only"
    "README.md", exact, protect, "Project readme - read-only"
    "Cargo.toml", exact, protect, "Rust manifest - read-only"
    "*.sdn", glob, atomic, "Database files - atomic writes only"
    "*.lock", glob, deny, "Lock files - system managed"
    "*.sh", glob, redirect, "Shell scripts - redirect to temp"
    "src/", exact, protect, "Source code - read-only"
    "test/", exact, protect, "Test files - read-only"
    "rust/", exact, protect, "Rust source - read-only"
    "doc/", exact, protect, "Documentation - read-only"
    ".git/", exact, deny, "Git directory - no access"
    ".jj/", exact, deny, "Jujutsu directory - no access"
    "bin/", exact, protect, "Binaries - read-only"
    ".claude/", exact, protect, "Claude config - read-only"
    "build/*", glob, allow, "Build artifacts - allowed"
    ".fileio_temp/*", glob, allow, "Temp directory - allowed"
    "tmp/*", glob, allow, "Temp directory - allowed"
    "test*.txt", glob, redirect, "Test files - redirect to temp"
    "test*.spl", glob, redirect, "Test scripts - redirect to temp"
    "mcp_test*", glob, redirect, "MCP test files - redirect to temp"
    "*.tmp", glob, redirect, "Temporary files - redirect to temp"
    "*_test.txt", glob, redirect, "Test output files - redirect to temp"

# Temporary directory configuration
temp_config:
    base_dir: ".fileio_temp"
    session_prefix: "session_"
    cleanup_on_exit: true
    max_age_hours: 24
