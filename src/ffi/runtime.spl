# FFI - Runtime Operations
# Centralized RuntimeValue and GC FFI wrappers

# ============================================================================
# Garbage Collection
# ============================================================================

extern fn rt_gc_init()

fn gc_init():
    rt_gc_init()

extern fn rt_gc_collect()

fn gc_collect():
    rt_gc_collect()

extern fn rt_gc_malloc(size: i64) -> i64

fn gc_malloc(size: i64) -> i64:
    rt_gc_malloc(size)

# ============================================================================
# Value Creation
# ============================================================================

extern fn rt_value_nil() -> RuntimeValuePtr

fn value_nil() -> RuntimeValuePtr:
    rt_value_nil()

extern fn rt_value_bool(value: bool) -> RuntimeValuePtr

fn value_bool(value: bool) -> RuntimeValuePtr:
    rt_value_bool(value)

extern fn rt_value_int(value: i64) -> RuntimeValuePtr

fn value_int(value: i64) -> RuntimeValuePtr:
    rt_value_int(value)

extern fn rt_value_float(value: f64) -> RuntimeValuePtr

fn value_float(value: f64) -> RuntimeValuePtr:
    rt_value_float(value)

extern fn rt_value_string(ptr: i64, len: i64) -> RuntimeValuePtr

fn value_string(ptr: i64, len: i64) -> RuntimeValuePtr:
    rt_value_string(ptr, len)

fn value_string_from_text(s: text) -> RuntimeValuePtr:
    rt_value_string(s.ptr(), s.len())

extern fn rt_value_array_new() -> RuntimeValuePtr

fn value_array_new() -> RuntimeValuePtr:
    rt_value_array_new()

extern fn rt_value_dict_new() -> RuntimeValuePtr

fn value_dict_new() -> RuntimeValuePtr:
    rt_value_dict_new()

# ============================================================================
# Value Type Checking
# ============================================================================

extern fn rt_value_type(value: RuntimeValuePtr) -> ValueType

fn value_type(value: RuntimeValuePtr) -> ValueType:
    rt_value_type(value)

extern fn rt_value_is_nil(value: RuntimeValuePtr) -> bool

fn value_is_nil(value: RuntimeValuePtr) -> bool:
    rt_value_is_nil(value)

extern fn rt_value_is_bool(value: RuntimeValuePtr) -> bool

fn value_is_bool(value: RuntimeValuePtr) -> bool:
    rt_value_is_bool(value)

extern fn rt_value_is_int(value: RuntimeValuePtr) -> bool

fn value_is_int(value: RuntimeValuePtr) -> bool:
    rt_value_is_int(value)

extern fn rt_value_is_float(value: RuntimeValuePtr) -> bool

fn value_is_float(value: RuntimeValuePtr) -> bool:
    rt_value_is_float(value)

extern fn rt_value_is_string(value: RuntimeValuePtr) -> bool

fn value_is_string(value: RuntimeValuePtr) -> bool:
    rt_value_is_string(value)

extern fn rt_value_is_array(value: RuntimeValuePtr) -> bool

fn value_is_array(value: RuntimeValuePtr) -> bool:
    rt_value_is_array(value)

extern fn rt_value_is_dict(value: RuntimeValuePtr) -> bool

fn value_is_dict(value: RuntimeValuePtr) -> bool:
    rt_value_is_dict(value)

# ============================================================================
# Value Conversion
# ============================================================================

extern fn rt_value_as_bool(value: RuntimeValuePtr) -> bool

fn value_as_bool(value: RuntimeValuePtr) -> bool:
    rt_value_as_bool(value)

extern fn rt_value_as_int(value: RuntimeValuePtr) -> i64

fn value_as_int(value: RuntimeValuePtr) -> i64:
    rt_value_as_int(value)

extern fn rt_value_as_float(value: RuntimeValuePtr) -> f64

fn value_as_float(value: RuntimeValuePtr) -> f64:
    rt_value_as_float(value)

extern fn rt_value_as_string(value: RuntimeValuePtr, out_len: i64) -> i64

fn value_as_string(value: RuntimeValuePtr, out_len: i64) -> i64:
    rt_value_as_string(value, out_len)

# ============================================================================
# Value Operations
# ============================================================================

extern fn rt_value_clone(value: RuntimeValuePtr) -> RuntimeValuePtr

fn value_clone(value: RuntimeValuePtr) -> RuntimeValuePtr:
    rt_value_clone(value)

extern fn rt_value_free(value: RuntimeValuePtr)

fn value_free(value: RuntimeValuePtr):
    rt_value_free(value)

# --- Arithmetic Operations ---

extern fn rt_value_add(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr

fn value_add(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr:
    rt_value_add(left, right)

extern fn rt_value_sub(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr

fn value_sub(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr:
    rt_value_sub(left, right)

extern fn rt_value_mul(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr

fn value_mul(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr:
    rt_value_mul(left, right)

extern fn rt_value_div(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr

fn value_div(left: RuntimeValuePtr, right: RuntimeValuePtr) -> RuntimeValuePtr:
    rt_value_div(left, right)

# --- Comparison Operations ---

extern fn rt_value_eq(left: RuntimeValuePtr, right: RuntimeValuePtr) -> bool

fn value_eq(left: RuntimeValuePtr, right: RuntimeValuePtr) -> bool:
    rt_value_eq(left, right)

extern fn rt_value_lt(left: RuntimeValuePtr, right: RuntimeValuePtr) -> bool

fn value_lt(left: RuntimeValuePtr, right: RuntimeValuePtr) -> bool:
    rt_value_lt(left, right)

# ============================================================================
# I/O Operations
# ============================================================================

extern fn rt_value_print(value: RuntimeValuePtr)

fn value_print(value: RuntimeValuePtr):
    rt_value_print(value)

extern fn rt_value_println(value: RuntimeValuePtr)

fn value_println(value: RuntimeValuePtr):
    rt_value_println(value)
