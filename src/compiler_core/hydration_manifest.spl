# Hydration Manifest
#
# Generates hydration manifests for WASM client block hydration.
# Maps server-side rendered HTML DOM elements to WASM event handlers.
#
# Port of rust/compiler/src/hydration_manifest.rs (451 lines)

export HydrationManifest, EventBinding, EventOptions, ManifestMetadata

# ============================================================================
# Types
# ============================================================================

struct EventOptions:
    # # DESUGARED: once: bool
    has_once: bool
    once: bool
    # # DESUGARED: passive: bool
    has_passive: bool
    passive: bool
    # # DESUGARED: capture: bool
    has_capture: bool
    capture: bool

struct EventBinding:
    selector: text
    event: text
    handler: text
    # # DESUGARED: options: EventOptions
    has_options: bool
    options: EventOptions

struct ManifestMetadata:
    compiled_at: text
    source: text
    # # DESUGARED: wasm_size: i64
    has_wasm_size: bool
    wasm_size: i64

# ============================================================================
# Hydration Manifest
# ============================================================================

class HydrationManifest:
    """Maps DOM elements to WASM event handlers for hydration."""
    version: i64
    exports: [text]
    bindings: [EventBinding]
    state: {text: text}
    metadata: ManifestMetadata


# ============================================================================
# HydrationManifest Methods (was: impl HydrationManifest:)
# ============================================================================

fn hydrationmanifest_create() -> HydrationManifest:
        HydrationManifest(version: 2, exports: [], bindings: [],
                          state: {}, metadata: nil)

