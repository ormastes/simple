use compiler.test_common.*
use std.string.{NL}

val source = "fn main() -> i64:{NL}    0{NL}"
var parser = parser_new(source)
val ast_module = parser_parse(parser)

for name in ast_module.functions_keys(functions):
    val fn_ = ast_module.functions[name]
    print "Function: {fn_.name}"
    print "  Return type: {fn_.return_type}"
    print "  Params: {fn_.params.len()}"
    print "  Body: {fn_.body}"
    print "  Body.stmts: {fn_.body.stmts.len()}"
    if fn_.body.has_value:
        print "  Body.value: {fn_.body.value_value}"
        print "  Body.value.kind: {fn_.body.value_value.kind}"
    else:
        print "  Body.value: nil"
