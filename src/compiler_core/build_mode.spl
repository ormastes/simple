# Build Mode
#
# Build mode configuration for the Simple compiler.
# Controls optimizations, validation rules, and deterministic builds.
#
# Port of rust/compiler/src/build_mode.rs (232 lines)

export BuildMode, DeterministicConfig

# ============================================================================
# Build Mode
# ============================================================================

enum BuildMode:
    Debug       # Full diagnostics, minimal optimizations, all runtime checks
    Release     # Optimizations enabled, production-ready output


# ============================================================================
# BuildMode Methods (was: impl BuildMode:)
# ============================================================================

# ============================================================================
# Deterministic Configuration
# ============================================================================

struct DeterministicConfig:
    """Configuration for reproducible builds."""
    enabled: bool
    # # DESUGARED: timestamp: text
    has_timestamp: bool
    timestamp: text
    seed: i64              # Random seed for deterministic ordering
    normalize_paths: bool  # Normalize to relative paths


# ============================================================================
# DeterministicConfig Methods (was: impl DeterministicConfig:)
# ============================================================================

fn deterministicconfig_create() -> DeterministicConfig:
        """All deterministic features enabled."""
        # DeterministicConfig(enabled: true  # DESUGARED: timestamp: nil
                            seed: 0, normalize_paths: true)


fn deterministicconfig_disabled() -> DeterministicConfig:
        # DeterministicConfig(enabled: false  # DESUGARED: timestamp: nil
                            seed: 0, normalize_paths: false)

