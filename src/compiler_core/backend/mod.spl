# Backend Module - Compiler Backend Infrastructure
#
# This module provides all backend-related functionality:
# - Backend factory for creating backends
# - Shared abstractions (TypeMapper, LiteralConverter, ExpressionEvaluator)
# - Backend-specific implementations
#
# Usage:
#     use compiler.backend.*
#     val backend = BackendFactory.create(target, options)
#     val result = backend.compile(module)

# === Backend Factory ===
use backend_factory.BackendFactory
export BackendFactory

# === Shared Abstractions ===
# Re-export from common module for convenience
use common.TypeMapper
export TypeMapper
use common.PrimitiveType
export PrimitiveType
use common.Mutability
export Mutability
use common.LiteralConverter
export LiteralConverter
use common.ExpressionEvaluator
export ExpressionEvaluator
use common.EvalContext
export EvalContext
use common.Environment
export Environment

# === Type Mapper Implementations ===
use llvm_type_mapper.LlvmTypeMapper
export LlvmTypeMapper
use cranelift_type_mapper.CraneliftTypeMapper
export CraneliftTypeMapper
use wasm_type_mapper.WasmTypeMapper
export WasmTypeMapper
use interpreter_type_mapper.InterpreterTypeMapper
export InterpreterTypeMapper
use lean_type_mapper.LeanTypeMapper
export LeanTypeMapper

# === GPU Type Mapper Implementations ===
use cuda_type_mapper.CudaTypeMapper
export CudaTypeMapper
use vulkan_type_mapper.VulkanTypeMapper
export VulkanTypeMapper
use vulkan_type_mapper.SpirvImageDim
export SpirvImageDim
use vulkan_type_mapper.SpirvBuiltin
export SpirvBuiltin
use vulkan_type_mapper.SpirvFeature
export SpirvFeature

# === GPU Code Generation Builders ===
use cuda.ptx_builder.PtxBuilder
export PtxBuilder
use vulkan.spirv_builder.SpirvBuilder
export SpirvBuilder

# === GPU Backend Implementations ===
use cuda_backend.CudaBackend
export CudaBackend
use cuda_backend.CudaCompiledModule
export CudaCompiledModule
use cuda_backend.CudaKernel
export CudaKernel
use cuda_backend.CudaDeviceFunction
export CudaDeviceFunction
use vulkan_backend.VulkanBackend
export VulkanBackend
use vulkan_backend.VulkanCompiledModule
export VulkanCompiledModule
use vulkan_backend.VulkanComputeShader
export VulkanComputeShader

# === Backend Implementations ===
# Note: These already exist in the codebase, we're just re-exporting for convenience
# Uncomment when ready to integrate:
# export llvm_backend.LlvmBackend
# export cranelift_backend.CraneliftBackend
# export wasm_backend.WasmBackend
# export interpreter_backend.InterpreterBackend

# === Backend API Types ===
use backend_api.BackendKind
export BackendKind
use backend_api.CodegenTarget
export CodegenTarget
use backend_api.OptimizationLevel
export OptimizationLevel
use backend_api.BuildMode
export BuildMode
use backend_api.CompileError
export CompileError
use backend_api.CompiledModule
export CompiledModule
use backend_api.backend_for_name
export backend_for_name

# === Unified Backend Compilation ===
use backend_api.compile_module_with_backend
export compile_module_with_backend
use backend_api.get_effective_backend_name
export get_effective_backend_name

# === LLVM Backend Utilities ===
use llvm_backend.llc_available
export llc_available

# === Memory Space (from hir_types) ===
# Note: MemorySpace is defined in compiler.hir_types, not here
# Users should import from compiler.hir_types.MemorySpace
