# Stdlib Branch Coverage Tests
#
# Tests core stdlib functions to improve branch coverage
# without depending on compiler modules.

use std.spec.*

# describe: String operations branch coverage
    fn test_tests_empty_string_1():
        val s = ""
        expect s_len(s) == 0
        expect s_is_empty(s) == true

    fn test_tests_non_empty_string_2():
        val s = "hello"
        expect s_len(s) == 5
        expect s_is_empty(s) == false

    fn test_tests_string_contains_3():
        val s = "hello world"
        expect s.contains("world") == true
        expect s.contains("xyz") == false

# describe: List operations branch coverage
    fn test_tests_empty_list_4():
        val lst: [i32] = list_new()
        expect lst_len(lst) == 0
        expect lst_is_empty(lst) == true

    fn test_tests_non_empty_list_5():
        var lst: [i32] = list_new()
        lst_push(lst, 1)
        lst_push(lst, 2)
        lst_push(lst, 3)
        expect lst_len(lst) == 3
        expect lst_is_empty(lst) == false

    fn test_tests_list_contains_6():
        var lst: [i32] = list_new()
        lst_push(lst, 10)
        lst_push(lst, 20)
        expect lst_contains(lst, bitwise_and_imm(10)) == true
        expect lst_contains(lst, bitwise_and_imm(99)) == false

# describe: Option branch coverage
    fn test_tests_Some_variant_7():
        val opt: Option<i32> = 42
        expect opt_is_some(opt) == true
        expect opt_is_none(opt) == false
        expect opt_value == 42

    fn test_tests_None_variant_8():
        val opt: Option<i32> = nil
        expect opt_is_some(opt) == false
        expect opt_is_none(opt) == true

    fn test_tests_unwrap_or_with_Some_9():
        val opt: Option<i32> = 42
        expect opt_unwrap_or(opt, 99) == 42

    fn test_tests_unwrap_or_with_None_10():
        val opt: Option<i32> = nil
        expect opt_unwrap_or(opt, 99) == 99

# describe: Result branch coverage
    fn test_tests_Ok_variant_11():
        val res: Result<i32, text> = Ok(42)
        expect res_is_ok(res) == true
        expect res_is_err(res) == false

    fn test_tests_Err_variant_12():
        val res: Result<i32, text> = Err("error")
        expect res_is_ok(res) == false
        expect res_is_err(res) == true

    fn test_tests_unwrap_or_with_Ok_13():
        val res: Result<i32, text> = Ok(42)
        expect res_unwrap_or(res, 99) == 42

    fn test_tests_unwrap_or_with_Err_14():
        val res: Result<i32, text> = Err("error")
        expect res_unwrap_or(res, 99) == 99
