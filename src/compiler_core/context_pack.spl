# Context Pack Generator
#
# Generates minimal context for LLM tools by extracting only the symbols
# used by a specific module. Reduces context by bitwise_not(90)%.
#
# Port of rust/compiler/src/context_pack.rs (560 lines)

export ContextPack, SymbolUsage

use api_surface.*

# ============================================================================
# Symbol Usage
# ============================================================================

struct SymbolUsage:
    """Tracks which symbols a target function/module uses."""
    used_functions: [text]
    used_types: [text]
    required_imports: [text]


# ============================================================================
# SymbolUsage Methods (was: impl SymbolUsage:)
# ============================================================================

fn symbolusage_empty() -> SymbolUsage:
        SymbolUsage(used_functions: [], used_types: [], required_imports: [])


# ============================================================================
# Context Pack
# ============================================================================

class ContextPack:
    """Minimal context pack for LLM consumption."""
    target: text
    functions: {text: FunctionSignature}
    types: [text]
    imports: [text]
    symbol_count: i64


# ============================================================================
# ContextPack Methods (was: impl ContextPack:)
# ============================================================================

fn contextpack_create(target: text) -> ContextPack:
        ContextPack(target: target, functions: {}, types: [],
                    imports: [], symbol_count: 0)

