# SMF Enums - Shared type definitions for SMF format
#
# This module defines the core enums used in the Simple Module Format (SMF):
# - Platform: OS/target platform identifiers
# - Arch: CPU architecture identifiers
# - CompressionType: Compression algorithm identifiers
# - SmfAppType: Application type hints for runtime optimization
#
# Ported from: rust/runtime/src/loader/smf/header.rs
# Pattern: Follow mir_data.spl enum style with round-trip u8 conversion

# ============================================================================
# Platform Enum
# ============================================================================

"""SMF platform identifier (maps to TargetOS)."""
enum Platform:
    Any          # Platform-independent (0)
    Linux        # Linux (1)
    Windows      # Windows (2)
    MacOS        # macOS (3)
    FreeBSD      # FreeBSD (4)
    None_        # Bare metal (5)


# ============================================================================
# Platform Methods (was: impl Platform:)
# ============================================================================

fn platform_from_u8(value: u8) -> Platform:
        match value:
            case 0: Platform.Any
            case 1: Platform.Linux
            case 2: Platform.Windows
            case 3: Platform.MacOS
            case 4: Platform.FreeBSD
            case 5: Platform.None_
            case _: Platform.Any  # Default for unknown values


# ============================================================================
# Arch Enum
# ============================================================================

"""SMF architecture identifier (maps to TargetArch)."""
enum Arch:
    X86_64       # x86-64 (0)
    Aarch64      # ARM64 (1)
    X86          # x86 32-bit (2)
    Arm          # ARM 32-bit (3)
    Riscv64      # RISC-V 64-bit (4)
    Riscv32      # RISC-V 32-bit (5)
    Wasm32       # WebAssembly 32-bit (6)
    Wasm64       # WebAssembly 64-bit (7)


# ============================================================================
# Arch Methods (was: impl Arch:)
# ============================================================================

fn arch_from_u8(value: u8) -> Arch:
        match value:
            case 0: Arch.X86_64
            case 1: Arch.Aarch64
            case 2: Arch.X86
            case 3: Arch.Arm
            case 4: Arch.Riscv64
            case 5: Arch.Riscv32
            case 6: Arch.Wasm32
            case 7: Arch.Wasm64
            case _: Arch.X86_64  # Default for unknown values


# ============================================================================
# CompressionType Enum
# ============================================================================

"""SMF compression type (v1[1]+)."""
enum CompressionType:
    None_        # No compression (0)
    Zstd         # Zstandard compression - high ratio (1)
    Lz4          # LZ4 compression - high speed (2)


# ============================================================================
# CompressionType Methods (was: impl CompressionType:)
# ============================================================================

fn compressiontype_from_u8(value: u8) -> CompressionType:
        match value:
            case 0: CompressionType.None_
            case 1: CompressionType.Zstd
            case 2: CompressionType.Lz4
            case _: CompressionType.None_  # Default for unknown values


# ============================================================================
# SmfAppType Enum
# ============================================================================

"""SMF application type identifier.

Application types provide hints to the runtime for optimal resource
allocation and initialization:
- Cli: Command-line tool (minimal resources)
- Tui: Terminal UI application (terminal mode, buffers)
- Gui: Graphical application (window, GPU context)
- Service: Background service/daemon (IPC, signal handlers)
- Repl: Interactive REPL (history, line editor)
"""
enum SmfAppType:
    Cli          # Command-line tool (0)
    Tui          # Terminal UI application (1)
    Gui          # Graphical application (2)
    Service      # Background service/daemon (3)
    Repl         # Interactive REPL (4)


# ============================================================================
# SmfAppType Methods (was: impl SmfAppType:)
# ============================================================================

fn smfapptype_from_u8(value: u8) -> SmfAppType:
        match value:
            case 0: SmfAppType.Cli
            case 1: SmfAppType.Tui
            case 2: SmfAppType.Gui
            case 3: SmfAppType.Service
            case 4: SmfAppType.Repl
            case _: SmfAppType.Cli  # Default for unknown values

