# Queue Creation and Conversion
#
# Functions for creating queues from arrays and converting back

# Create queue from array
fn queue_from_array(arr):
    var items = []
    for item in arr:
        items.push(item)
    (items: items, )

# Create stack from array
fn stack_from_array(arr):
    var items = []
    for item in arr:
        items.push(item)
    (items: items, )

# Create deque from array
fn deque_from_array(arr):
    var items = []
    for item in arr:
        items.push(item)
    (items: items, )

# Convert queue to array
fn queue_to_array(queue):
    queue.items

# Convert stack to array
fn stack_to_array(stack):
    stack.items

# Convert deque to array
fn deque_to_array(deque):
    deque.items

# Convert priority queue to array
fn pqueue_to_array(pqueue):
    pqueue.items

# Convert circular buffer to array
fn cbuffer_to_array(cbuffer):
    if cbuffer_is_empty(cbuffer):
        return []
    var result = []
    if not cbuffer.full:
        var i = cbuffer.head
        while i < cbuffer.tail:
            result.push(cbuffer.items[i])
            i = i + 1
    else:
        var i = cbuffer.head
        while i < cbuffer.items.len():
            result.push(cbuffer.items[i])
            i = i + 1
        var j = 0
        while j < cbuffer.tail:
            result.push(cbuffer.items[j])
            j = j + 1
    result

# Helper for circular buffer
fn cbuffer_is_empty(cbuffer):
    not cbuffer.full and cbuffer.head == cbuffer.tail

export queue_from_array
export stack_from_array
export deque_from_array
export queue_to_array
export stack_to_array
export deque_to_array
export pqueue_to_array
export cbuffer_to_array
