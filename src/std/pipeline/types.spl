# Pipeline Type Definitions
#
# Core type definitions and structures for pipeline utilities.

# ============================================================================
# Exports
# ============================================================================

export create_pipeline, pipeline_from_functions

# ============================================================================
# Pipeline Structure
# ============================================================================
# Pipeline: { steps: [fn], metadata: {} }
# Step: function that takes data and returns transformed data
# Error: { error: text, data: any } or nil for success

# ============================================================================
# Core Pipeline Creation
# ============================================================================

fn create_pipeline():
    """Create an empty pipeline.

    Returns a pipeline object with empty steps list.

    Example:
        val pipeline = create_pipeline()
    """
    { steps: [], metadata: { created: "pipeline", version: 1 } }

fn pipeline_from_functions(functions):
    """Create a pipeline from a list of functions.

    Args:
        functions: Array of transformation functions

    Example:
        val pipeline = pipeline_from_functions([
            \x: x * 2,
            \x: x + 1
        ])
    """
    {
        steps: functions,
        metadata: { created: "pipeline", version: 1, count: functions.len() }
    }
