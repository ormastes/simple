# URI Component Structure
class UriComponents:
    scheme: text      # http, https, ftp, file, mailto, etc.
    userinfo: text    # username:password (optional)
    host: text        # domain or IP address
    port: text        # port number as text (empty if default)
    path: text        # /path/to/resource
    query: text       # query string without '?'
    fragment: text    # fragment without '#'

    fn to_string() -> text:
        var result = ""

        # Scheme
        if self.scheme != "":
            result = result + self.scheme + ":"

        # Authority (userinfo + host + port)
        var has_authority = self.host != ""
        if has_authority:
            result = result + "//"
            if self.userinfo != "":
                result = result + self.userinfo + "@"
            result = result + self.host
            if self.port != "":
                result = result + ":" + self.port

        # Path
        result = result + self.path

        # Query
        if self.query != "":
            result = result + "?" + self.query

        # Fragment
        if self.fragment != "":
            result = result + "#" + self.fragment

        result

# Query Parameter Structure
class QueryParam:
    key: text
    value: text
