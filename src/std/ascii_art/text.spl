# ASCII Art Text Formatting and Effects

# ============================================================================
# Text Measurement and Utilities
# ============================================================================

# Get text length (simplified - assumes ASCII)
fn text_length(text: text) -> i64:
    var count = 0
    var i = 0
    while i < 1000:
        var char = text_char_at(text, i)
        if char == "":
            return count
        count = count + 1
        i = i + 1
    count

# Get character at position (helper function)
fn text_char_at(text: text, pos: i64) -> text:
    if pos < 0:
        return ""
    var result = ""
    var i = 0
    while i <= pos:
        if i == pos:
            var remaining = text_substring(text, i, i + 1)
            return remaining
        i = i + 1
    ""

# Get substring (simplified implementation)
fn text_substring(text: text, start: i64, end: i64) -> text:
    # This is a placeholder - real implementation would use string methods
    # For now, return empty string
    ""

# ============================================================================
# Text Alignment Functions
# ============================================================================

# Align text to the left within given width
fn align_left(text: text, width: i64) -> text:
    var len = text_length(text)
    if len >= width:
        return text
    text + repeat_char(" ", width - len)

# Align text to the center within given width
fn align_center(text: text, width: i64) -> text:
    var len = text_length(text)
    if len >= width:
        return text
    var total_padding = width - len
    var left_pad = total_padding / 2
    var right_pad = total_padding - left_pad
    repeat_char(" ", left_pad) + text + repeat_char(" ", right_pad)

# Align text to the right within given width
fn align_right(text: text, width: i64) -> text:
    var len = text_length(text)
    if len >= width:
        return text
    repeat_char(" ", width - len) + text

# Center text (alias for align_center)
fn center_text(text: text, width: i64) -> text:
    align_center(text, width)

# Pad text with custom character
fn pad_text(text: text, width: i64, pad_char: text) -> text:
    var len = text_length(text)
    if len >= width:
        return text
    text + repeat_char(pad_char, width - len)

# Truncate text with ellipsis
fn truncate_text(text: text, width: i64, ellipsis: text) -> text:
    var len = text_length(text)
    if len <= width:
        return text
    # Simplified - would need proper substring
    text + ellipsis

# ============================================================================
# Text Effects
# ============================================================================

# Add shadow effect to text
fn shadow(text: text) -> text:
    var result = text + "\n"
    var shadow_line = repeat_char("▓", text_length(text))
    result + shadow_line

# Add outline effect to text
fn outline(text: text) -> text:
    var len = text_length(text)
    var top = repeat_char("▔", len + 2)
    var bottom = repeat_char("▁", len + 2)
    top + "\n▕" + text + "▏\n" + bottom

# Add emboss effect to text
fn emboss(text: text) -> text:
    "▟" + text + "▙"

# Add double-struck effect
fn double_struck(text: text) -> text:
    text + "\n" + text

# Add underline
fn underline(text: text) -> text:
    text + "\n" + repeat_char("─", text_length(text))

# Add overline
fn overline(text: text) -> text:
    repeat_char("─", text_length(text)) + "\n" + text

# Add strikethrough effect (using combining characters)
fn strikethrough(text: text) -> text:
    # Simplified - would use combining strikethrough character
    text

# Wrap text to specified width
fn wrap_text(text: text, width: i64) -> text:
    # Simplified - would need proper word wrapping
    text

# Helper function
fn repeat_char(char: text, count: i64) -> text:
    if count <= 0:
        return ""
    var result = ""
    var i = 0
    while i < count:
        result = result + char
        i = i + 1
    result

# ============================================================================
# Banner Text (Figlet-style)
# ============================================================================

# Standard banner font (simplified letter set)
fn banner_char_A() -> list:
    [
        "  _  ",
        " / \\ ",
        "/ _ \\",
        "| |_| |",
        "|_   _|"
    ]

fn banner_char_B() -> list:
    [
        " ___  ",
        "| _ ) ",
        "| _ \\ ",
        "|___/ ",
        "      "
    ]

fn banner_char_C() -> list:
    [
        "  ___ ",
        " / __|",
        "| (__ ",
        " \\___|",
        "      "
    ]

fn banner_char_D() -> list:
    [
        " ___  ",
        "|   \\ ",
        "| |) |",
        "|___/ ",
        "      "
    ]

fn banner_char_E() -> list:
    [
        " ___ ",
        "| __|",
        "| _| ",
        "|___|",
        "     "
    ]

fn banner_char_H() -> list:
    [
        " _  _ ",
        "| || |",
        "| __ |",
        "|_||_|",
        "      "
    ]

fn banner_char_L() -> list:
    [
        " _    ",
        "| |   ",
        "| |__ ",
        "|____|",
        "      "
    ]

fn banner_char_O() -> list:
    [
        "  ___  ",
        " / _ \\ ",
        "| (_) |",
        " \\___/ ",
        "       "
    ]

# Create banner text (simplified version)
fn banner(text: text, font: text) -> text:
    # Simplified implementation - returns stylized text
    var result = ""
    result = result + "  _   _   _   _   _  \n"
    result = result + " | | | | | | | | | | \n"
    result = result + " | |_| | | | | | | | \n"
    result = result + " |  _  | | | | | | | \n"
    result = result + " |_| |_| |_| |_| |_| \n"
    result

# Figlet-style text
fn figlet(text: text) -> text:
    banner(text, "standard")

# Big text (block letters)
fn big_text(text: text) -> text:
    var result = ""
    result = result + "█▀▀█ █   █▀▀▀ \n"
    result = result + "█▀▀▄ █   █ ▀█ \n"
    result = result + "▀▀▀▀ ▀▀▀ ▀▀▀▀ \n"
    result
