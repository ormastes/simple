# Text Diffing Utilities Module - Facade
# Comprehensive diffing algorithms and utilities for comparing text
# Pure Simple implementation with no external dependencies
#
# This module provides a facade over the following specialized modules:
# - diff.types: Data structures and type constructors
# - diff.lcs: Longest Common Subsequence algorithms
# - diff.myers: Myers O(ND) difference algorithm
# - diff.patch: Patch generation and application
# - diff.unified: Unified diff format
# - diff.context: Context diff format
# - diff.utilities: Helper functions and utilities

import diff.types
import diff.lcs
import diff.myers
import diff.patch
import diff.unified
import diff.context
import diff.utilities

# ============================================================================
# RE-EXPORT TYPE CONSTRUCTORS
# ============================================================================

fn create_change(op: text, content: text, old_line: i64, new_line: i64):
    types.create_change(op, content, old_line, new_line)

fn create_add(content: text, new_line: i64):
    types.create_add(content, new_line)

fn create_delete(content: text, old_line: i64):
    types.create_delete(content, old_line)

fn create_equal(content: text, old_line: i64, new_line: i64):
    types.create_equal(content, old_line, new_line)

fn create_modify(old_content: text, new_content: text, old_line: i64, new_line: i64):
    types.create_modify(old_content, new_content, old_line, new_line)

fn create_hunk(changes: list, old_start: i64, old_count: i64, new_start: i64, new_count: i64):
    types.create_hunk(changes, old_start, old_count, new_start, new_count)

fn create_patch(file_old: text, file_new: text, hunks: list):
    types.create_patch(file_old, file_new, hunks)

fn create_edit(op: text, pos: i64, char: text):
    types.create_edit(op, pos, char)

fn create_diff_stats(additions: i64, deletions: i64, changes: i64, equals: i64):
    types.create_diff_stats(additions, deletions, changes, equals)

fn create_diff_options(ignore_whitespace: i64, ignore_case: i64, algorithm: text, context: i64):
    types.create_diff_options(ignore_whitespace, ignore_case, algorithm, context)

# ============================================================================
# RE-EXPORT LCS FUNCTIONS
# ============================================================================

fn lcs_length(seq1: list, seq2: list) -> i64:
    lcs.lcs_length(seq1, seq2)

fn lcs(seq1: list, seq2: list) -> list:
    lcs.lcs(seq1, seq2)

# ============================================================================
# RE-EXPORT MYERS ALGORITHM
# ============================================================================

fn myers_diff(seq1: list, seq2: list) -> list:
    myers.myers_diff(seq1, seq2)

fn simple_diff(seq1: list, seq2: list) -> list:
    myers.simple_diff(seq1, seq2)

# ============================================================================
# RE-EXPORT PATCH FUNCTIONS
# ============================================================================

fn create_patch_from_diff(changes: list, file1: text, file2: text) -> tuple:
    patch.create_patch_from_diff(changes, file1, file2)

fn apply_patch(text: text, patch_obj: tuple) -> text:
    patch.apply_patch(text, patch_obj)

fn merge_three_way(base: text, left: text, right: text) -> tuple:
    patch.merge_three_way(base, left, right)

fn detect_conflicts(merge_result: tuple) -> list:
    patch.detect_conflicts(merge_result)

fn chunk_diff(changes: list, context_lines: i64) -> list:
    patch.chunk_diff(changes, context_lines)

fn expand_context(hunk: tuple, additional_lines: i64) -> tuple:
    patch.expand_context(hunk, additional_lines)

fn minimize_context(hunk: tuple) -> tuple:
    patch.minimize_context(hunk)

# ============================================================================
# RE-EXPORT FORMAT FUNCTIONS
# ============================================================================

fn format_unified(changes: list, file1: text, file2: text, context_lines: i64) -> text:
    unified.format_unified(changes, file1, file2, context_lines)

fn format_context(changes: list, file1: text, file2: text, context_lines: i64) -> text:
    context.format_context(changes, file1, file2, context_lines)

# ============================================================================
# RE-EXPORT UTILITY FUNCTIONS
# ============================================================================

# Text splitting
fn split_lines(text: text) -> list:
    utilities.split_lines(text)

fn split_words(text: text) -> list:
    utilities.split_words(text)

fn split_chars(text: text) -> list:
    utilities.split_chars(text)

fn join_lines(lines: list) -> text:
    utilities.join_lines(lines)

fn join_with_separator(items: list, sep: text) -> text:
    utilities.join_with_separator(items, sep)

# High-level diff functions
fn diff_lines(text1: text, text2: text) -> list:
    utilities.diff_lines(text1, text2)

fn diff_lines_patience(text1: text, text2: text) -> list:
    utilities.diff_lines_patience(text1, text2)

fn diff_words(text1: text, text2: text) -> list:
    utilities.diff_words(text1, text2)

fn diff_chars(text1: text, text2: text) -> list:
    utilities.diff_chars(text1, text2)

# Edit distance
fn levenshtein_distance(s1: text, s2: text) -> i64:
    utilities.levenshtein_distance(s1, s2)

fn damerau_levenshtein_distance(s1: text, s2: text) -> i64:
    utilities.damerau_levenshtein_distance(s1, s2)

fn hamming_distance(s1: text, s2: text) -> i64:
    utilities.hamming_distance(s1, s2)

# Similarity metrics
fn similarity_ratio(s1: text, s2: text) -> i64:
    utilities.similarity_ratio(s1, s2)

fn quick_ratio(s1: text, s2: text) -> i64:
    utilities.quick_ratio(s1, s2)

# Statistics
fn diff_stats(changes: list) -> tuple:
    utilities.diff_stats(changes)

fn count_additions(changes: list) -> i64:
    utilities.count_additions(changes)

fn count_deletions(changes: list) -> i64:
    utilities.count_deletions(changes)

fn count_changes(changes: list) -> i64:
    utilities.count_changes(changes)

fn count_equals(changes: list) -> i64:
    utilities.count_equals(changes)

# Formatting
fn format_side_by_side(changes: list, width: i64) -> text:
    utilities.format_side_by_side(changes, width)

fn highlight_diff(changes: list, use_color: i64) -> text:
    utilities.highlight_diff(changes, use_color)

fn colorize_addition(text: text) -> text:
    utilities.colorize_addition(text)

fn colorize_deletion(text: text) -> text:
    utilities.colorize_deletion(text)

fn colorize_change(text: text) -> text:
    utilities.colorize_change(text)

# Options
fn diff_with_options(text1: text, text2: text, options: tuple) -> list:
    utilities.diff_with_options(text1, text2, options)

# Text normalization
fn is_binary_text(text: text) -> i64:
    utilities.is_binary_text(text)

fn normalize_line_endings(text: text) -> text:
    utilities.normalize_line_endings(text)

fn trim_trailing_whitespace(text: text) -> text:
    utilities.trim_trailing_whitespace(text)

# Export main functions for public use
