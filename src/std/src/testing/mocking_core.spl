# ============================================================================
# Mock Library - Core Features (Facade)
# ============================================================================
#
# This module serves as a facade for the mock testing framework,
# re-exporting all functionality from specialized submodules.
#
# Architecture (826 lines â†’ 3 focused modules):
# - mock/builder.spl (~300 lines): Mock creation, configuration, policy
# - mock/verification.spl (~350 lines): Matchers, call analysis, assertions
# - mock/spy.spl (~176 lines): Spy utilities, partial mocking
#
# Core mocking functionality including:
# - Call tracking and recording
# - Mock functions and verification
# - Expectations and matchers
# - Call analysis and spies
# - Mock builders and registry
# - Policies and behaviors
# - Fluent API and protocol mocks
#
# Workarounds:
# 1. Nested field mutation requires copy-modify-assign pattern (see record_call)
# 2. Array indexing: Use i64 parameter + direct index (not `as usize`)
#    - Integer literals default to i64
#    - `i64 as usize` cast is NOT supported
#    - Interpreter handles i64 indexing directly
#    Example:
#      fn get_item(index: i64):        # Accept i64 for literals
#          self.items[index]           # Direct index, no cast needed
#
# ============================================================================

# Import submodules
mod mock.builder
mod mock.verification
mod mock.spy

# ============================================================================
# Re-export all public types and functions
# ============================================================================

# From mock/builder.spl
export CallRecord
export MockFunction, Expectation, VerificationResult
export MockBuilder, RegistryEntry, MockRegistry
export create_mock
export MockPolicy, mock_policy_init, mock_policy_is_enabled
export mock_policy_allow_in_layer, mock_policy_disable, mock_policy_reset

# From mock/verification.spl
export Matcher
export CallAnalyzer, ReturnValue, SequentialReturns
export verify_called, verify_called_with
export ConditionalReturn, ConditionalReturns
export CallChain, CallChainTracker
export BehaviorState, BehaviorSequence
export MockSnapshot, MockComposition
export MethodSignature, FluentExpectation, WhenBuilder
export MethodCall, ProtocolMock, AutoMock

# From mock/spy.spl
export Spy
