# Locale Utility Functions
# Provides helper functions for text padding and list formatting.

import locale::types

# ============================================================================
# UTILITY FUNCTIONS
# ============================================================================

fn pad_left(text: text, width: i64, pad_char: text) -> text:
    # Pads text on the left to specified width.
    # Returns: Padded text
    #
    # Example:
    #   pad_left("42", 5, "0")  # "00042"

    var len = text.length()
    if len >= width:
        return text

    var result = text
    var needed = width - len
    var i = 0

    while i < needed:
        result = pad_char + result
        i = i + 1

    result

fn pad_right(text: text, width: i64, pad_char: text) -> text:
    # Pads text on the right to specified width.
    # Returns: Padded text
    #
    # Example:
    #   pad_right("hello", 10, " ")  # "hello     "

    var len = text.length()
    if len >= width:
        return text

    var result = text
    var needed = width - len
    var i = 0

    while i < needed:
        result = result + pad_char
        i = i + 1

    result

fn format_list(items: (text, text, text, text, text), locale: (text, text, text, text)) -> text:
    # Formats a list of items with locale-specific separators.
    # Returns: Formatted list string
    #
    # Example:
    #   format_list(("apple", "banana", "orange", "", ""), locale_en_us())
    #   # "apple, banana, and orange"

    var lang = locale.0

    # Count non-empty items
    var count = 0
    if items.0 != "": count = count + 1
    if items.1 != "": count = count + 1
    if items.2 != "": count = count + 1
    if items.3 != "": count = count + 1
    if items.4 != "": count = count + 1

    if count == 0:
        return ""

    if count == 1:
        return items.0

    if count == 2:
        var sep = " and "
        if lang == "fr": sep = " et "
        if lang == "es": sep = " y "
        if lang == "de": sep = " und "
        return items.0 + sep + items.1

    # 3 or more items
    var result = items.0
    var i = 1

    while i < count - 1:
        result = result + ", "
        if i == 0 and items.0 != "": result = result + items.0
        if i == 1 and items.1 != "": result = result + items.1
        if i == 2 and items.2 != "": result = result + items.2
        if i == 3 and items.3 != "": result = result + items.3
        i = i + 1

    # Add final item with "and"
    var sep = ", and "
    if lang == "fr": sep = ", et "
    if lang == "es": sep = ", y "
    if lang == "de": sep = ", und "

    result = result + sep
    if count == 3: result = result + items.2
    if count == 4: result = result + items.3
    if count == 5: result = result + items.4

    result
