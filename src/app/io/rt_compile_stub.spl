# Minimal interpreter-friendly LLVM IR generator stub
#
# This avoids loading the full compiler pipeline (which the bootstrap
# interpreter struggles to parse). It returns a tiny LLVM IR module
# containing an empty `main` that returns 0. This unblocks the
# bare-metal CLI path enough to exercise the LLVM toolchain.

fn rt_compile_to_llvm_ir(source_file: text, target_triple: text, bare_metal: bool) -> (text, text, i64):
    # Emit a trivial IR module; ignore the input source for now.
    val ir = "; minimal stub generated by rt_compile_stub\\n"
            + "target triple = \\\"" + target_triple + "\\\"\\n\\n"
            + "define i32 @main() nounwind uwtable {\\n"
            + "entry:\\n"
            + "  ret i32 0\\n"
            + "}\\n"
    (ir, "", 0)

export rt_compile_to_llvm_ir
