# File Discovery Utilities
#
# Recursive file finding and filtering for Simple source files.

use app.io.mod.{list_files, path_join}

fn find_spl_files(dir: text) -> [text]:
    """Recursively find all .spl files in directory."""
    var result: [text] = []
    val files = list_files(dir)
    for file in files:
        val full_path = path_join(dir, file)
        if file.ends_with(".spl"):
            result = result.push(full_path)
    result

fn find_spec_files(dir: text) -> [text]:
    """Recursively find all *_spec.spl files."""
    val all_files = find_spl_files(dir)
    var specs: [text] = []
    for file in all_files:
        if file.contains("_spec.spl"):
            specs = specs.push(file)
    specs

export find_spl_files, find_spec_files
