# Feature Port Definitions for Optional I/O Capabilities
#
# Typed port pattern for optional features — structs with fn-fields provide
# type-safe contracts with noop defaults for unavailable features.
# See: doc/design/platform_sffi_optional_features.md

# GPU Compute Port — abstracts CUDA/Vulkan/noop
struct GpuComputePort:
    name: text
    is_available_fn: fn() -> bool
    device_count_fn: fn() -> i64
    device_name_fn: fn(i64) -> text
    alloc_fn: fn(i64) -> i64
    free_fn: fn(i64) -> bool
    sync_fn: fn() -> bool

# Audio Port — abstracts rodio/noop
struct AudioPort:
    name: text
    is_available_fn: fn() -> bool
    init_fn: fn() -> i64
    shutdown_fn: fn(i64) -> bool

# Window Port — abstracts winit/noop
struct WindowPort:
    name: text
    is_available_fn: fn() -> bool

# Platform features summary
struct PlatformFeatures:
    gpu_compute: GpuComputePort
    audio: AudioPort
    window: WindowPort

export GpuComputePort, AudioPort, WindowPort, PlatformFeatures
