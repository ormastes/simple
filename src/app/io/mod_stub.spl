# Shared I/O module for CLI apps - Pure Simple (No FFI)
# Stub implementations for features that require Rust FFI

# --- File operations (STUBS - not available without Rust runtime) ---

fn file_exists(path: text) -> bool:
    print "[STUB] file_exists not available without Rust FFI"
    false

fn file_read(path: text) -> text:
    print "[STUB] file_read not available without Rust FFI"
    ""

fn file_write(path: text, content: text) -> bool:
    print "[STUB] file_write not available without Rust FFI"
    false

fn file_copy(src: text, dst: text) -> bool:
    print "[STUB] file_copy not available without Rust FFI"
    false

fn file_delete(path: text) -> bool:
    print "[STUB] file_delete not available without Rust FFI"
    false

fn file_atomic_write(path: text, content: text) -> bool:
    print "[STUB] file_atomic_write not available without Rust FFI"
    false

# --- Directory operations (STUBS) ---

fn dir_create(path: text, recursive: bool) -> bool:
    print "[STUB] dir_create not available without Rust FFI"
    false

fn dir_create_all(path: text) -> bool:
    print "[STUB] dir_create_all not available without Rust FFI"
    false

fn dir_walk(path: text) -> [text]:
    print "[STUB] dir_walk not available without Rust FFI"
    []

fn dir_remove_all(path: text) -> i64:
    print "[STUB] dir_remove_all not available without Rust FFI"
    -1

fn is_dir(path: text) -> bool:
    print "[STUB] is_dir not available without Rust FFI"
    false

# --- Environment operations (STUBS) ---

fn cwd() -> text:
    print "[STUB] cwd not available without Rust FFI"
    "."

fn home() -> text:
    print "[STUB] home not available without Rust FFI"
    "~"

fn env_get(key: text) -> text:
    print "[STUB] env_get not available without Rust FFI"
    ""

# --- Process execution (STUBS) ---

fn process_run(cmd: text, args: [text]) -> (text, text, i64):
    print "[STUB] process_run not available without Rust FFI"
    ("", "", -1)

fn process_run_timeout(cmd: text, args: [text], timeout_ms: i64) -> (text, text, i32):
    print "[STUB] process_run_timeout not available without Rust FFI"
    ("", "", -1)

# --- CLI delegation (STUBS - these features require Rust FFI) ---

fn cli_run_code(code: str, gc_log: bool, gc_off: bool) -> i64:
    print "Error: cli_run_code requires Rust FFI support"
    print "Use: ./bin/bootstrap/simple yourfile.spl"
    1

fn cli_run_file(path: str, args: [str], gc_log: bool, gc_off: bool) -> i64:
    print "Error: cli_run_file requires Rust FFI support"
    print "Use: ./bin/bootstrap/simple {path}"
    1

fn cli_watch_file(path: str) -> i64:
    print "Error: watch feature requires Rust FFI support"
    1

fn cli_run_repl(gc_log: bool, gc_off: bool) -> i64:
    print "Error: REPL requires Rust FFI support"
    1

fn cli_run_tests(args: [str], gc_log: bool, gc_off: bool) -> i64:
    print "Error: test runner requires Rust FFI support"
    1

fn cli_run_lint(args: [str]) -> i64:
    print "Error: linter requires Rust FFI support"
    1

fn cli_run_fmt(args: [str]) -> i64:
    print "Error: formatter requires Rust FFI support"
    1

fn cli_run_fix(args: [str]) -> i64:
    print "Error: fix requires Rust FFI support"
    1

fn cli_run_verify(args: [str], gc_log: bool, gc_off: bool) -> i64:
    print "Error: verify requires Rust FFI support"
    1

fn cli_run_migrate(args: [str]) -> i64:
    print "Error: migrate requires Rust FFI support"
    1

fn cli_run_mcp(args: [str]) -> i64:
    print "Error: mcp requires Rust FFI support"
    1

fn cli_run_diff(args: [str]) -> i64:
    print "Error: diff requires Rust FFI support"
    1

fn cli_constr(args: [str]) -> i64:
    print "Error: constr requires Rust FFI support"
    1

fn cli_run_query(args: [str]) -> i64:
    print "Error: query requires Rust FFI support"
    1

fn cli_run_spec_coverage(args: [str]) -> i64:
    print "Error: spec_coverage requires Rust FFI support"
    1

fn cli_gen_lean(args: [str]) -> i64:
    print "Error: gen_lean requires Rust FFI support"
    1

fn cli_run_feature_gen(args: [str]) -> i64:
    print "Error: feature_gen requires Rust FFI support"
    1

fn cli_run_task_gen(args: [str]) -> i64:
    print "Error: task_gen requires Rust FFI support"
    1

fn cli_run_spec_gen(args: [str]) -> i64:
    print "Error: spec_gen requires Rust FFI support"
    1

fn cli_run_sspec_docgen(args: [str]) -> i64:
    print "Error: sspec_docgen requires Rust FFI support"
    1

fn cli_run_todo_gen(args: [str]) -> i64:
    cli_run_file("src/app/todo_scan/main.spl", args, false, false)

fn cli_todo_scan(args: [str]) -> i64:
    cli_run_file("src/app/todo_scan/main.spl", args, false, false)

fn cli_run_lex(args: [str]) -> i64:
    print "Error: lex requires Rust FFI support"
    1

fn cli_run_brief(args: [str]) -> i64:
    print "Error: brief requires Rust FFI support"
    1

fn cli_run_ffi_gen(args: [str]) -> i64:
    print "Error: ffi_gen requires Rust FFI support"
    1

fn cli_run_i18n(args: [str]) -> i64:
    print "Error: i18n requires Rust FFI support"
    1

fn cli_handle_web(args: [str]) -> i64:
    print "Error: web requires Rust FFI support"
    1

fn cli_handle_diagram(args: [str]) -> i64:
    print "Error: diagram requires Rust FFI support"
    1

fn cli_handle_run(args: [str], gc_log: bool, gc_off: bool) -> i64:
    print "Error: run requires Rust FFI support"
    print "Use: ./bin/bootstrap/simple yourfile.spl"
    1

fn cli_handle_linkers() -> i64:
    print "Error: linkers command requires Rust FFI support"
    1

fn cli_replay(args: [str]) -> i64:
    print "Error: replay requires Rust FFI support"
    1

fn cli_check(args: [str]) -> i64:
    print "Error: check requires Rust FFI support"
    1

fn cli_compile(args: [str]) -> i64:
    print "Error: compile requires Rust FFI support"
    1

fn cli_info(args: [str]) -> i64:
    print "Error: info requires Rust FFI support"
    1

fn cli_file_exists(path: str) -> bool:
    print "[STUB] cli_file_exists not available without Rust FFI"
    false

fn cli_read_file(path: str) -> str:
    print "[STUB] cli_read_file not available without Rust FFI"
    ""

fn cli_get_args() -> [str]:
    print "[STUB] cli_get_args not available without Rust FFI"
    []

fn cli_exit(code: i64):
    print "[STUB] cli_exit({code}) - cannot exit in stub mode"
    ()

# --- Extended file operations (STUBS) ---

fn file_append(path: text, content: text) -> bool:
    print "[STUB] file_append not available without Rust FFI"
    false

fn file_modified_time(path: text) -> i64:
    print "[STUB] file_modified_time not available without Rust FFI"
    0

fn file_remove(path: text) -> bool:
    print "[STUB] file_remove not available without Rust FFI"
    false

fn file_hash_sha256(path: text) -> text:
    print "[STUB] file_hash_sha256 not available without Rust FFI"
    ""

fn file_size(path: text) -> i64:
    print "[STUB] file_size not available without Rust FFI"
    0

# --- Output (STUBS) ---

fn eprintln(msg: text):
    print "[STDERR] {msg}"

fn process_output(cmd: text, args: [text]) -> text:
    print "[STUB] process_output not available without Rust FFI"
    ""

# --- Context and settlement (STUBS) ---

fn context_generate(path: str, target: str, format: str) -> str:
    print "[STUB] context_generate not available without Rust FFI"
    ""

fn context_stats(path: str, target: str) -> str:
    print "[STUB] context_stats not available without Rust FFI"
    ""

fn settlement_main() -> i64:
    print "[STUB] settlement_main not available without Rust FFI"
    0

# --- Fault detection (STUBS) ---

fn fault_set_stack_overflow_detection(enabled: bool):
    print "[STUB] fault_set_stack_overflow_detection not available"
    ()

fn fault_set_max_recursion_depth(depth: i64):
    print "[STUB] fault_set_max_recursion_depth not available"
    ()

fn fault_set_timeout(secs: i64):
    print "[STUB] fault_set_timeout not available"
    ()

fn fault_set_execution_limit(limit: i64):
    print "[STUB] fault_set_execution_limit not available"
    ()
