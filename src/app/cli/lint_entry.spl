# Lightweight lint/fmt/fix entry point for `simple lint|fmt|fix`
#
# This file loads only the minimal imports needed to run lint/fmt/fix,
# avoiding the overhead of loading the full CLI with all its modules.
#
# Usage:
#   bin/release/simple src/app/cli/lint_entry.spl lint [options] [path]
#   bin/release/simple src/app/cli/lint_entry.spl fmt [options] [path]
#   bin/release/simple src/app/cli/lint_entry.spl fix [options] [path]

use std.cli.cli_util (get_cli_args)
use app.io.mod (cli_run_lint, cli_run_fmt, cli_run_fix)

fn main() -> i64:
    val all_args = get_cli_args()

    # Strip script path from args
    # get_cli_args() returns: [script_path, command, ...args...]
    var filtered_args = []
    var i = 0

    # Skip script path (first arg)
    if all_args.len() > 0:
        i = 1

    # Collect remaining args
    while i < all_args.len():
        filtered_args.push(all_args[i])
        i = i + 1

    if filtered_args.len() == 0:
        print "Usage: simple lint|fmt|fix [options] [path]"
        return 1

    val command = filtered_args[0]

    if command == "lint":
        return cli_run_lint(filtered_args)
    elif command == "fmt":
        return cli_run_fmt(filtered_args)
    elif command == "fix":
        return cli_run_fix(filtered_args)
    else:
        print "Unknown command: {command}"
        return 1
