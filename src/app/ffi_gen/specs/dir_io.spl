# Directory I/O Module - FFI Spec
#
# Directory operations for the Simple runtime.
# Generates build/rust/ffi_gen/src/dir_io.rs
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/dir_io.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn dir_io_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Directory Creation
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_dir_create", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String"),
                 InternParamSpec(name: "recursive", value_type: "bool")],
        return_type: "bool", runtime_fn: "rt_dir_create",
        doc: "Create directory (optionally with parents)"
    ))

    specs.push(InternFnSpec(
        name: "rt_dir_create_all", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "bool", runtime_fn: "rt_dir_create_all",
        doc: "Create directory and all parent directories"
    ))

    # =========================================================================
    # Directory Listing
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_dir_list", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "Value", runtime_fn: "rt_dir_list",
        doc: "List directory entries (non-recursive)"
    ))

    specs.push(InternFnSpec(
        name: "rt_dir_walk", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "Value", runtime_fn: "rt_dir_walk",
        doc: "Walk directory recursively, returning all file paths"
    ))

    # =========================================================================
    # Directory Removal
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_dir_remove", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String"),
                 InternParamSpec(name: "recursive", value_type: "bool")],
        return_type: "bool", runtime_fn: "rt_dir_remove",
        doc: "Remove directory (optionally recursive)"
    ))

    specs.push(InternFnSpec(
        name: "rt_package_remove_dir_all", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "i32", runtime_fn: "rt_package_remove_dir_all",
        doc: "Remove directory recursively, returns 0 on success"
    ))

    # =========================================================================
    # Directory Metadata
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_package_is_dir", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "i32", runtime_fn: "rt_package_is_dir",
        doc: "Check if path is directory (1=yes, 0=no, -1=error)"
    ))

    specs.push(InternFnSpec(
        name: "rt_package_file_size", category: "dir_io",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "i64", runtime_fn: "rt_package_file_size",
        doc: "Get file/directory size in bytes"
    ))

    specs
