# CLI Commands Module - FFI Spec
#
# CLI command delegation for the Simple runtime.
# Generates build/rust/ffi_gen/src/cli.rs
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/cli.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn cli_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Core CLI Commands
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_run_code", category: "cli",
        params: [InternParamSpec(name: "code", value_type: "String"),
                 InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_run_code",
        doc: "Run Simple code directly"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_file", category: "cli",
        params: [InternParamSpec(name: "path", value_type: "String"),
                 InternParamSpec(name: "args", value_type: "Value"),
                 InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_run_file",
        doc: "Run Simple file"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_watch_file", category: "cli",
        params: [InternParamSpec(name: "path", value_type: "String")],
        return_type: "i64", runtime_fn: "rt_cli_watch_file",
        doc: "Watch file for changes"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_repl", category: "cli",
        params: [InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_run_repl",
        doc: "Run REPL"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_handle_run", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value"),
                 InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_handle_run",
        doc: "Handle run command"
    ))

    # =========================================================================
    # Test & Quality Commands
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_run_tests", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value"),
                 InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_run_tests",
        doc: "Run tests"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_lint", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_lint",
        doc: "Run linter"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_fmt", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_fmt",
        doc: "Run formatter"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_fix", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_fix",
        doc: "Run fixer"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_verify", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value"),
                 InternParamSpec(name: "gc_log", value_type: "bool"),
                 InternParamSpec(name: "gc_off", value_type: "bool")],
        return_type: "i64", runtime_fn: "rt_cli_run_verify",
        doc: "Run verifier"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_check", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_check",
        doc: "Run check"
    ))

    # =========================================================================
    # Migration & Tools
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_run_migrate", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_migrate",
        doc: "Run migration"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_mcp", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_mcp",
        doc: "Run MCP server"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_diff", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_diff",
        doc: "Run diff"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_query", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_query",
        doc: "Run query"
    ))

    # =========================================================================
    # Documentation & Generation
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_run_spec_coverage", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_spec_coverage",
        doc: "Run spec coverage"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_gen_lean", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_gen_lean",
        doc: "Generate Lean code"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_feature_gen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_feature_gen",
        doc: "Generate feature docs"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_task_gen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_task_gen",
        doc: "Generate task docs"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_spec_gen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_spec_gen",
        doc: "Generate spec docs"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_sspec_docgen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_sspec_docgen",
        doc: "Generate SSpec docs"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_todo_gen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_todo_gen",
        doc: "Generate TODO docs"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_todo_scan", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_todo_scan",
        doc: "Scan for TODOs"
    ))

    # =========================================================================
    # Analysis & Debug
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_run_lex", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_lex",
        doc: "Run lexer"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_brief", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_brief",
        doc: "Run brief analysis"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_ffi_gen", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_ffi_gen",
        doc: "Run FFI generator"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_i18n", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_i18n",
        doc: "Run i18n tool"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_info", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_info",
        doc: "Show info"
    ))

    # =========================================================================
    # Other Commands
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_cli_handle_web", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_handle_web",
        doc: "Handle web command"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_handle_diagram", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_handle_diagram",
        doc: "Handle diagram command"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_handle_compile", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_handle_compile",
        doc: "Handle compile command"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_handle_linkers", category: "cli",
        params: [],
        return_type: "i64", runtime_fn: "rt_cli_handle_linkers",
        doc: "Show available linkers"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_replay", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_replay",
        doc: "Run replay"
    ))

    specs.push(InternFnSpec(
        name: "rt_cli_run_constr", category: "cli",
        params: [InternParamSpec(name: "args", value_type: "Value")],
        return_type: "i64", runtime_fn: "rt_cli_run_constr",
        doc: "Run constraint solver"
    ))

    # =========================================================================
    # Context
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_context_generate", category: "cli",
        params: [InternParamSpec(name: "path", value_type: "String"),
                 InternParamSpec(name: "target", value_type: "String"),
                 InternParamSpec(name: "format", value_type: "String")],
        return_type: "String", runtime_fn: "rt_context_generate",
        doc: "Generate context pack"
    ))

    specs.push(InternFnSpec(
        name: "rt_context_stats", category: "cli",
        params: [InternParamSpec(name: "path", value_type: "String"),
                 InternParamSpec(name: "target", value_type: "String")],
        return_type: "String", runtime_fn: "rt_context_stats",
        doc: "Get context statistics"
    ))

    # =========================================================================
    # Settlement
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_settlement_main", category: "cli",
        params: [],
        return_type: "i64", runtime_fn: "rt_settlement_main",
        doc: "Run settlement main"
    ))

    specs
