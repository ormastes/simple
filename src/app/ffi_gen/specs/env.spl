# Environment Module - FFI Spec
#
# Environment operations for the Simple runtime.
# Generates build/rust/ffi_gen/src/env.rs
#
# Usage: simple ffi-gen --gen-intern src/app/ffi_gen/specs/env.spl

use app.ffi_gen.intern_codegen (InternFnSpec, InternParamSpec)

fn env_specs() -> [InternFnSpec]:
    var specs: [InternFnSpec] = []

    # =========================================================================
    # Current Directory
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_env_cwd", category: "env",
        params: [],
        return_type: "String", runtime_fn: "rt_env_cwd",
        doc: "Get current working directory"
    ))

    specs.push(InternFnSpec(
        name: "rt_env_home", category: "env",
        params: [],
        return_type: "String", runtime_fn: "rt_env_home",
        doc: "Get home directory"
    ))

    # =========================================================================
    # Environment Variables
    # =========================================================================

    specs.push(InternFnSpec(
        name: "rt_env_get", category: "env",
        params: [InternParamSpec(name: "key", value_type: "String")],
        return_type: "String", runtime_fn: "rt_env_get",
        doc: "Get environment variable value"
    ))

    specs.push(InternFnSpec(
        name: "rt_env_set", category: "env",
        params: [InternParamSpec(name: "key", value_type: "String"),
                 InternParamSpec(name: "value", value_type: "String")],
        return_type: "bool", runtime_fn: "rt_env_set",
        doc: "Set environment variable"
    ))

    specs
