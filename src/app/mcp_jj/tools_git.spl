# tools_git.spl - Git compatibility dispatcher (27 tools across 4 modules)
#
# Categories (delegated to split files):
#   Core (9): status, init, clone, add, commit, log, diff, show, blame       -> tools_git_core.spl
#   Branch (5): branch, checkout, merge, rebase, cherry_pick                  -> tools_git_branch.spl
#   Sync (5): fetch, pull, push, remote, tag                                  -> tools_git_sync.spl
#   Misc (8): reset, clean, stash, revert, bisect, config, worktree, set_wd  -> tools_git_misc.spl

# Import all schema/handler functions from split modules
use tools_git_core.{schema_git_status, handle_git_status, schema_git_init, handle_git_init, schema_git_clone, handle_git_clone, schema_git_add, handle_git_add, schema_git_commit, handle_git_commit, schema_git_log, handle_git_log, schema_git_diff, handle_git_diff, schema_git_show, handle_git_show, schema_git_blame, handle_git_blame}
use tools_git_branch.{schema_git_branch, handle_git_branch, schema_git_checkout, handle_git_checkout, schema_git_merge, handle_git_merge, schema_git_rebase, handle_git_rebase, schema_git_cherry_pick, handle_git_cherry_pick}
use tools_git_sync.{schema_git_fetch, handle_git_fetch, schema_git_pull, handle_git_pull, schema_git_push, handle_git_push, schema_git_remote, handle_git_remote, schema_git_tag, handle_git_tag}
use tools_git_misc.{schema_git_reset, handle_git_reset, schema_git_clean, handle_git_clean, schema_git_stash, handle_git_stash, schema_git_revert, handle_git_revert, schema_git_bisect, handle_git_bisect, schema_git_config, handle_git_config, schema_git_worktree, handle_git_worktree, schema_git_set_working_dir, handle_git_set_working_dir}

# =============================================================================
# COLLECTOR FUNCTION
# =============================================================================

fn get_all_git_tool_schemas() -> [String]:
    var tools: [String] = []
    # Core tools (9)
    tools.push(schema_git_status())
    tools.push(schema_git_init())
    tools.push(schema_git_clone())
    tools.push(schema_git_add())
    tools.push(schema_git_commit())
    tools.push(schema_git_log())
    tools.push(schema_git_diff())
    tools.push(schema_git_show())
    tools.push(schema_git_blame())
    # Branch tools (5)
    tools.push(schema_git_branch())
    tools.push(schema_git_checkout())
    tools.push(schema_git_merge())
    tools.push(schema_git_rebase())
    tools.push(schema_git_cherry_pick())
    # Sync tools (5)
    tools.push(schema_git_fetch())
    tools.push(schema_git_pull())
    tools.push(schema_git_push())
    tools.push(schema_git_remote())
    tools.push(schema_git_tag())
    # Misc tools (8)
    tools.push(schema_git_reset())
    tools.push(schema_git_clean())
    tools.push(schema_git_stash())
    tools.push(schema_git_revert())
    tools.push(schema_git_bisect())
    tools.push(schema_git_config())
    tools.push(schema_git_worktree())
    tools.push(schema_git_set_working_dir())
    tools

# =============================================================================
# DISPATCHER FUNCTION
# =============================================================================

fn handle_git_tool(id: String, tool_name: String, body: String, repo_path: String) -> String:
    # Core tools
    if tool_name == "git_status":
        return handle_git_status(id, body, repo_path)
    elif tool_name == "git_init":
        return handle_git_init(id, body, repo_path)
    elif tool_name == "git_clone":
        return handle_git_clone(id, body, repo_path)
    elif tool_name == "git_add":
        return handle_git_add(id, body, repo_path)
    elif tool_name == "git_commit":
        return handle_git_commit(id, body, repo_path)
    elif tool_name == "git_log":
        return handle_git_log(id, body, repo_path)
    elif tool_name == "git_diff":
        return handle_git_diff(id, body, repo_path)
    elif tool_name == "git_show":
        return handle_git_show(id, body, repo_path)
    elif tool_name == "git_blame":
        return handle_git_blame(id, body, repo_path)
    # Branch tools
    elif tool_name == "git_branch":
        return handle_git_branch(id, body, repo_path)
    elif tool_name == "git_checkout":
        return handle_git_checkout(id, body, repo_path)
    elif tool_name == "git_merge":
        return handle_git_merge(id, body, repo_path)
    elif tool_name == "git_rebase":
        return handle_git_rebase(id, body, repo_path)
    elif tool_name == "git_cherry_pick":
        return handle_git_cherry_pick(id, body, repo_path)
    # Sync tools
    elif tool_name == "git_fetch":
        return handle_git_fetch(id, body, repo_path)
    elif tool_name == "git_pull":
        return handle_git_pull(id, body, repo_path)
    elif tool_name == "git_push":
        return handle_git_push(id, body, repo_path)
    elif tool_name == "git_remote":
        return handle_git_remote(id, body, repo_path)
    elif tool_name == "git_tag":
        return handle_git_tag(id, body, repo_path)
    # Misc tools
    elif tool_name == "git_reset":
        return handle_git_reset(id, body, repo_path)
    elif tool_name == "git_clean":
        return handle_git_clean(id, body, repo_path)
    elif tool_name == "git_stash":
        return handle_git_stash(id, body, repo_path)
    elif tool_name == "git_revert":
        return handle_git_revert(id, body, repo_path)
    elif tool_name == "git_bisect":
        return handle_git_bisect(id, body, repo_path)
    elif tool_name == "git_config":
        return handle_git_config(id, body, repo_path)
    elif tool_name == "git_worktree":
        return handle_git_worktree(id, body, repo_path)
    elif tool_name == "git_set_working_dir":
        return handle_git_set_working_dir(id, body, repo_path)
    else:
        return ""

# =============================================================================
# EXPORTS
# =============================================================================

export get_all_git_tool_schemas, handle_git_tool
