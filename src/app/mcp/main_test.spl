use app.io.mod (file_read, get_args, exit, shell, cwd)
use app.mcp.resources
use app.mcp.prompts
use app.mcp.bugdb_resource

fn get_current_dir() -> text:
    cwd()

fn get_clean_args(all_args: [text]) -> [text]:
    var args = []
    var i = 1
    while i < all_args.len():
        args = args + [all_args[i]]
        i = i + 1
    args

fn start_server(debug_mode: bool):
    val project_root = get_current_dir()
    val resource_mgr = resources.ResourceManager.create(project_root)
    val prompt_mgr = prompts.PromptManager.create(project_root)
    print "Managers created successfully"

fn main():
    val raw_args = get_args()
    val args = get_clean_args(raw_args)
    
    if args.len() < 1:
        print "Usage: simple mcp server"
        exit(1)
    
    val command = args[0]
    
    if command == "server":
        start_server(false)
        exit(0)
    else:
        print "Unknown command: " + command
        exit(1)

main()
