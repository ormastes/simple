# Memory Management
#
# Memory optimization modules for the Simple interpreter.
#
# Key components:
# - refc_binary: Reference-counted binaries for zero-copy sharing
# - message_transfer: Intelligent message passing with size-based strategy
#
# Erlang-inspired optimizations:
# - Small values (< 64 bytes): Deep copied (fast)
# - Large values (>= 64 bytes): Reference counted, shared (zero-copy)

from refc_binary import {
    RefcBinary,
    BinaryRef,
    SharedHeap,
    SharedHeapConfig,
    SharedHeapStats,
    AllocResult,
    CopyStrategy,
    SMALL_BINARY_THRESHOLD,
    MAX_BINARY_SIZE,
    get_shared_heap,
    shared_heap_allocate,
    shared_heap_incref,
    shared_heap_decref,
    copy_strategy
}

from message_transfer import {
    MessageTransfer,
    TransferResult,
    TransferStats,
    ValueWrapper,
    ValueType,
    MailboxMessage,
    send_value,
    receive_value,
    estimate_size
}

# Reference-counted binaries
export RefcBinary, BinaryRef
export SharedHeap, SharedHeapConfig, SharedHeapStats
export AllocResult, CopyStrategy
export SMALL_BINARY_THRESHOLD, MAX_BINARY_SIZE
export get_shared_heap, shared_heap_allocate, shared_heap_incref, shared_heap_decref
export copy_strategy

# Message transfer
export MessageTransfer, TransferResult, TransferStats
export ValueWrapper, ValueType, MailboxMessage
export send_value, receive_value, estimate_size
