# Build System Types
#
# Core types for the Simple build system

# Build profiles
enum BuildProfile:
    Debug          # Fast builds with debug info
    Release        # Optimized builds
    Bootstrap      # Minimal size builds for distribution

# Build result
struct BuildResult:
    success: bool
    exit_code: i64
    stdout: text
    stderr: text
    duration_ms: i64

# Build error
struct BuildError:
    message: text
    exit_code: i64
    stderr: text

# Build configuration
struct BuildConfig:
    profile: BuildProfile
    features: [text]
    workspace_root: text
    target_dir: text
    jobs: i64
    verbose: bool

# Test result
struct TestResult:
    success: bool
    exit_code: i64
    stdout: text
    stderr: text
    tests_run: i64
    tests_passed: i64
    tests_failed: i64

# Test error
struct TestError:
    message: text
    exit_code: i64
    stderr: text

fn profile_to_string(profile: BuildProfile) -> text:
    match profile:
        case BuildProfile.Debug: "debug"
        case BuildProfile.Release: "release"
        case BuildProfile.Bootstrap: "bootstrap"

fn profile_from_string(s: text) -> BuildProfile:
    match s:
        case "debug": BuildProfile.Debug
        case "release": BuildProfile.Release
        case "bootstrap": BuildProfile.Bootstrap
        case _: BuildProfile.Debug  # Default to debug
