# Diagnostics Module
# @tag:api
#
# Unified diagnostic system for the Simple compiler.
#
# Provides error reporting with source locations, labeled spans,
# and helpful messages. Supports multiple output formats (text, JSON)
# and internationalization for error messages.
#
# Public API:
#   - use diagnostics.{Diagnostic, Severity, Span, Label}
#   - use diagnostics.{TextFormatter, JsonFormatter, SimpleFormatter}
#   - use diagnostics.{MessageContext, ContextBuilder}
#   - use diagnostics.{error_i18n, warning_i18n, note_i18n}
#
# Example: Creating and displaying a diagnostic
#
#     use diagnostics.{Diagnostic, Severity, Span, TextFormatter}
#
#     val source = "fn add(x: i64, y: text) -> i64:\n    x + y"
#
#     # Create span for the error location (y parameter)
#     val span = Span(start: 18, end: 22, line: 1, column: 18)
#
#     # Build diagnostic with code, labels, and notes
#     val diag = Diagnostic.error("type mismatch in binary operation")
#         .with_code("E0308")
#         .with_span(span)
#         .with_label(span, "expected i64, found text")
#         .with_note("binary operator `+` requires both operands to have the same type")
#
#     # Format for terminal output with color and source code
#     val formatter = TextFormatter.new()
#     val output = formatter.format(diag, source)
#     print output
#
#     # Output:
#     # error[E0308]: type mismatch in binary operation
#     #  --> file.spl:1:18
#     #   |
#     # 1 | fn add(x: i64, y: text) -> i64:
#     #   |                  ^^^^
#     #   |                  expected i64, found text
#     #   |
#     #   = note: binary operator `+` requires both operands to have the same type
#
# Example: Multiple labels on a diagnostic
#
#     use diagnostics.{Diagnostic, Span}
#
#     val source = "val result = calculate(x, y, z)"
#
#     # Create spans for different parts
#     val call_span = Span(start: 13, end: 31, line: 1, column: 13)
#     val arg1_span = Span(start: 23, end: 24, line: 1, column: 23)
#     val arg2_span = Span(start: 26, end: 27, line: 1, column: 26)
#
#     # Add multiple labels to show relationship
#     val diag = Diagnostic.error("function expects 2 arguments, found 3")
#         .with_span(call_span)
#         .with_label(arg1_span, "argument 1")
#         .with_label(arg2_span, "argument 2")
#         .with_label(Span(start: 29, end: 30, line: 1, column: 29), "unexpected argument 3")
#
# Example: Different severity levels
#
#     use diagnostics.{Diagnostic, Severity}
#
#     # Error (compilation fails)
#     val error = Diagnostic.error("undefined variable 'x'")
#         .with_code("E0425")
#
#     # Warning (compilation continues)
#     val warning = Diagnostic.warning("unused variable 'temp'")
#         .with_code("W0612")
#
#     # Note (informational)
#     val note = Diagnostic.note("consider using '_temp' to suppress warning")
#
#     # Help suggestion
#     val help = Diagnostic.help("add type annotation: val x: i64 = ...")
#
# Example: JSON output for IDE integration
#
#     use diagnostics.{Diagnostic, Span, JsonFormatter}
#
#     val diag = Diagnostic.error("unexpected token")
#         .with_code("E0001")
#         .with_span(Span(start: 10, end: 11, line: 2, column: 5))
#
#     val formatter = JsonFormatter.new()
#     val json = formatter.format(diag, source)
#     # Output: {"severity":"error","code":"E0001","message":"unexpected token",...}
#
# Example: Internationalized error messages
#
#     use diagnostics.{error_i18n, MessageContext, ctx1}
#
#     # Create error with i18n key and parameters
#     val ctx = ctx1("var_name", "x")
#     val diag = error_i18n("errors.undefined_variable", ctx)
#         .with_code("E0425")
#
#     # Message context supports 1-3 parameters
#     val ctx2 = MessageContext.with_params("fn_name", "add", "arg_count", "3")
#     val diag2 = error_i18n("errors.wrong_arg_count", ctx2)

# Re-export core types
export severity.Severity
export span.Span
export label.Label
export diagnostic.Diagnostic

# Re-export formatters
export formatters.TextFormatter
export formatters.JsonFormatter
export formatters.SimpleFormatter

# Re-export i18n context builders
export i18n_context.MessageContext
export i18n_context.ContextBuilder
export i18n_context.ctx1
export i18n_context.ctx2
export i18n_context.ctx3
export i18n_context.error_i18n
export i18n_context.warning_i18n
export i18n_context.note_i18n
export i18n_context.help_i18n
export i18n_context.info_i18n
export i18n_context.severity_name
