# ASCII Art Utility Functions

# ============================================================================
# Basic Utilities
# ============================================================================

# Repeat a character n times
fn repeat_char(char: text, count: i64) -> text:
    if count <= 0:
        return ""
    var result = ""
    var i = 0
    while i < count:
        result = result + char
        i = i + 1
    result

# Get vertical line character
fn v() -> text:
    "│"

# Create a separator line
fn separator(width: i64) -> text:
    repeat_char("─", width)

fn separator_double(width: i64) -> text:
    repeat_char("═", width)

fn separator_heavy(width: i64) -> text:
    repeat_char("━", width)

fn separator_dotted(width: i64) -> text:
    repeat_char("·", width)

fn separator_dashed(width: i64) -> text:
    var result = ""
    var i = 0
    while i < width:
        if i % 2 == 0:
            result = result + "─"
        else:
            result = result + " "
        i = i + 1
    result

# Create a horizontal rule
fn horizontal_rule(width: i64, char: text) -> text:
    repeat_char(char, width)

# Create a vertical rule (returns list of lines)
fn vertical_rule(height: i64, char: text) -> list:
    var lines = []
    var i = 0
    while i < height:
        lines = lines + [char]
        i = i + 1
    lines

# ============================================================================
# Layout and Composition
# ============================================================================

# Join multiple text blocks horizontally (side by side)
fn join_horizontal(blocks: list) -> text:
    # Simplified - would need proper line-by-line joining
    var result = ""
    var i = 0
    while i < 3:
        result = result + "Block1  Block2  Block3\n"
        i = i + 1
    result

# Join multiple text blocks vertically (stack)
fn join_vertical(blocks: list) -> text:
    # Simplified - would concatenate blocks with newlines
    var result = ""
    var i = 0
    while i < 3:
        result = result + "Block" + "\n"
        i = i + 1
    result

# Overlay one ASCII art block on another at position (x, y)
fn overlay(base: text, overlay_text: text, x: i64, y: i64) -> text:
    # Simplified - would need line-by-line overlay
    base

# Add padding around text block
fn add_padding(text: text, top: i64, right: i64, bottom: i64, left: i64) -> text:
    var result = ""
    var i = 0
    while i < top:
        result = result + "\n"
        i = i + 1
    result = result + repeat_char(" ", left) + text + repeat_char(" ", right)
    i = 0
    while i < bottom:
        result = result + "\n"
        i = i + 1
    result

# ============================================================================
# Mathematical Utilities
# ============================================================================

# Calculate percentage
fn percentage(value: i64, max_value: i64) -> i64:
    if max_value == 0:
        return 0
    (value * 100) / max_value

# Clamp value between min and max
fn clamp(value: i64, min_val: i64, max_val: i64) -> i64:
    if value < min_val:
        return min_val
    if value > max_val:
        return max_val
    value

# Map value from one range to another
fn map_range(value: i64, from_min: i64, from_max: i64, to_min: i64, to_max: i64) -> i64:
    var from_range = from_max - from_min
    var to_range = to_max - to_min
    if from_range == 0:
        return to_min
    var normalized = (value - from_min) * to_range
    (normalized / from_range) + to_min

# Check if value is even
fn is_even(n: i64) -> bool:
    (n % 2) == 0

# Check if value is odd
fn is_odd(n: i64) -> bool:
    (n % 2) != 0

# Get minimum of two values
fn min(a: i64, b: i64) -> i64:
    if a < b:
        a
    else:
        b

# Get maximum of two values
fn max(a: i64, b: i64) -> i64:
    if a > b:
        a
    else:
        b

# Absolute value
fn abs(n: i64) -> i64:
    if n < 0:
        0 - n
    else:
        n

# Create empty line
fn empty_line(width: i64) -> text:
    repeat_char(" ", width)

# Create filled line
fn filled_line(width: i64, char: text) -> text:
    repeat_char(char, width)
