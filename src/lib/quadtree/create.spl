# Quadtree Creation and Initialization

from "std/quadtree/types" import bounds_new, node_new_leaf, point_new, node_bounds, node_capacity

# === Quadtree Public API ===

fn quadtree_new(min_x, min_y, max_x, max_y, capacity):
    # Create a new quadtree with given bounds and capacity
    val bounds = bounds_new(min_x, min_y, max_x, max_y)
    node_new_leaf(bounds, capacity)

fn quadtree_clear(tree):
    # Clear all points from quadtree
    val bounds = node_bounds(tree)
    val capacity = node_capacity(tree)
    node_new_leaf(bounds, capacity)

fn quadtree_from_list(points, min_x, min_y, max_x, max_y, capacity):
    # Build quadtree from list of points
    var tree = quadtree_new(min_x, min_y, max_x, max_y, capacity)
    var i = 0
    val count = len(points)
    while i < count:
        val point = points[i]
        tree = node_insert_point(tree, point)
        i = i + 1
    tree
