# HashSet - Pure Simple Implementation
#
# No FFI, no Rust - 100% Pure Simple
# Uses HashMap internally

export HashSet

use collections.hashmap.HashMap

class HashSet:
    """Pure Simple HashSet using HashMap internally.

    Example:
        var set = HashSet.new()
        set.insert("apple")
        set.insert("banana")
        val has_apple = set.contains("apple")  # true
    """
    map: HashMap

    static fn new() -> HashSet:
        """Create new empty HashSet."""
        HashSet(map: HashMap.new())

    me insert(value: text) -> bool:
        """Insert value into set.

        Returns:
            true if newly inserted, false if already present
        """
        val existed = self.map.contains_key(value)
        self.map.insert(value, "")  # Use empty string as value
        not existed

    fn contains(value: text) -> bool:
        """Check if value exists."""
        self.map.contains_key(value)

    me remove(value: text) -> bool:
        """Remove value from set.

        Returns:
            true if value was present
        """
        val result = self.map.remove(value)
        result.?

    me clear():
        """Remove all values."""
        self.map.clear()

    fn len() -> i64:
        """Get number of values."""
        self.map.len()

    fn is_empty() -> bool:
        """Check if empty."""
        self.map.is_empty()

    fn to_vec() -> [text]:
        """Convert to vector."""
        self.map.keys()
