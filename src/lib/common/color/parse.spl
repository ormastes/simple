# Color Parsing and Validation Functions
#
# Purpose: Color format validation
#
# Contains:
# - Hex color validation
# - RGB/HSL/HSV range validation
# - Hex character validation

# ============================================================================
# Validation Functions
# ============================================================================

fn is_valid_hex(hex_str: text) -> bool:
    """Check if string is valid hex color."""
    var cleaned = hex_str
    if cleaned.starts_with("#"):
        cleaned = cleaned.substring(1, cleaned.length())

    val len = cleaned.length()
    if len != 3 and len != 4 and len != 6 and len != 8:
        return false

    # Check all characters are valid hex
    var i = 0
    while i < len:
        val char = cleaned.substring(i, i + 1)
        if not is_hex_char(char):
            return false
        i = i + 1

    true

fn is_valid_rgb(r: i64, g: i64, b: i64) -> bool:
    """Check if RGB values are valid (0-255)."""
    r >= 0 and r <= 255 and g >= 0 and g <= 255 and b >= 0 and b <= 255

fn is_valid_hsl(h: i64, s: i64, l: i64) -> bool:
    """Check if HSL values are valid."""
    h >= 0 and h < 360 and s >= 0 and s <= 100 and l >= 0 and l <= 100

fn is_valid_hsv(h: i64, s: i64, v: i64) -> bool:
    """Check if HSV values are valid."""
    h >= 0 and h < 360 and s >= 0 and s <= 100 and v >= 0 and v <= 100

fn is_hex_char(char: text) -> bool:
    """Check if character is valid hex digit."""
    if char == "0": return true
    if char == "1": return true
    if char == "2": return true
    if char == "3": return true
    if char == "4": return true
    if char == "5": return true
    if char == "6": return true
    if char == "7": return true
    if char == "8": return true
    if char == "9": return true
    if char == "A" or char == "a": return true
    if char == "B" or char == "b": return true
    if char == "C" or char == "c": return true
    if char == "D" or char == "d": return true
    if char == "E" or char == "e": return true
    if char == "F" or char == "f": return true
    false

export is_valid_hex, is_valid_rgb, is_valid_hsl, is_valid_hsv, is_hex_char
