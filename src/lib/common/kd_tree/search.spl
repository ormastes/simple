# K-d Tree Search Operations
# Point containment and exact search

import kd_tree.types

# ============================================================================
# K-d Tree Search
# ============================================================================

fn kdtree_contains_recursive(node, point: List<i64>) -> i64:
    # Recursively search for point in tree
    if node == nil:
        return 0

    val node_point = kdnode_get_point(node)
    val is_equal = point_equal(node_point, point)
    if is_equal == 1:
        return 1

    val dim = kdnode_get_dim(node)
    val pivot = kdnode_get_value(node)
    val coord = point.get(dim)

    if coord < pivot:
        val left = kdnode_get_left(node)
        return kdtree_contains_recursive(left, point)
    else:
        val right = kdnode_get_right(node)
        return kdtree_contains_recursive(right, point)

fn kdtree_contains(node, point: List<i64>) -> i64:
    # Check if tree contains point
    kdtree_contains_recursive(node, point)
