# ANSI Escape Codes
#
# Provides ANSI escape sequence helpers for terminal colors and styling.
# Uses character code conversion since \x1b is not supported by the runtime.

export ansi_esc, ansi_reset, ansi_bold, ansi_dim, ansi_italic, ansi_underline
export ansi_black, ansi_red, ansi_green, ansi_yellow, ansi_blue, ansi_magenta, ansi_cyan, ansi_white, ansi_gray
export ansi_bold_red, ansi_bold_green, ansi_bold_yellow, ansi_bold_blue, ansi_bold_magenta, ansi_bold_cyan

# Get the ANSI escape character (ASCII 27)
fn ansi_esc() -> text:
    val code: u8 = 27
    "{code as char}"

# Reset all formatting
fn ansi_reset() -> text:
    val e = ansi_esc()
    "{e}[0m"

# Text styles
fn ansi_bold() -> text:
    val e = ansi_esc()
    "{e}[1m"

fn ansi_dim() -> text:
    val e = ansi_esc()
    "{e}[2m"

fn ansi_italic() -> text:
    val e = ansi_esc()
    "{e}[3m"

fn ansi_underline() -> text:
    val e = ansi_esc()
    "{e}[4m"

# Standard colors (foreground)
fn ansi_black() -> text:
    val e = ansi_esc()
    "{e}[30m"

fn ansi_red() -> text:
    val e = ansi_esc()
    "{e}[31m"

fn ansi_green() -> text:
    val e = ansi_esc()
    "{e}[32m"

fn ansi_yellow() -> text:
    val e = ansi_esc()
    "{e}[33m"

fn ansi_blue() -> text:
    val e = ansi_esc()
    "{e}[34m"

fn ansi_magenta() -> text:
    val e = ansi_esc()
    "{e}[35m"

fn ansi_cyan() -> text:
    val e = ansi_esc()
    "{e}[36m"

fn ansi_white() -> text:
    val e = ansi_esc()
    "{e}[37m"

fn ansi_gray() -> text:
    val e = ansi_esc()
    "{e}[90m"

# Bold colors
fn ansi_bold_red() -> text:
    val e = ansi_esc()
    "{e}[1;31m"

fn ansi_bold_green() -> text:
    val e = ansi_esc()
    "{e}[1;32m"

fn ansi_bold_yellow() -> text:
    val e = ansi_esc()
    "{e}[1;33m"

fn ansi_bold_blue() -> text:
    val e = ansi_esc()
    "{e}[1;34m"

fn ansi_bold_magenta() -> text:
    val e = ansi_esc()
    "{e}[1;35m"

fn ansi_bold_cyan() -> text:
    val e = ansi_esc()
    "{e}[1;36m"

# Helper to conditionally get color (empty string if disabled)
fn color_if(enabled: bool, color_fn: fn() -> text) -> text:
    if enabled: color_fn() else: ""
