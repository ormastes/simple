# Graph Coloring Algorithms
#
# Purpose: Graph coloring and chromatic number calculation
#
# Contains:
# - Greedy coloring algorithm
# - Chromatic number calculation

# Import types module
mod graph.types

# ============================================================================
# Graph Coloring
# ============================================================================

# Greedy graph coloring algorithm
# Returns map<vertex, color>
fn graph_greedy_coloring(graph: tuple) -> map:
    var num_vertices = graph.2
    var colors = {}

    var i = 0
    while i < num_vertices:
        # Find smallest available color
        var neighbor_colors = {}
        var neighbors = graph_neighbors(graph, i)
        var j = 0
        while j < neighbors.len():
            var neighbor = neighbors.get(j)
            var neighbor_id = neighbor.0
            var neighbor_color = colors.get(neighbor_id)
            if neighbor_color != nil:
                neighbor_colors = neighbor_colors.set(neighbor_color, true)
            j = j + 1

        # Find first available color
        var color = 0
        while neighbor_colors.get(color) != nil:
            color = color + 1

        colors = colors.set(i, color)
        i = i + 1

    colors

# Get chromatic number (number of colors needed)
fn graph_chromatic_number(graph: tuple) -> i64:
    var coloring = graph_greedy_coloring(graph)
    var num_vertices = graph.2
    var max_color = -1

    var i = 0
    while i < num_vertices:
        var color = coloring.get(i)
        if color != nil:
            if color > max_color:
                max_color = color
        i = i + 1

    max_color + 1

export *
