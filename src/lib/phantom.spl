# Phantom Type Markers for Simple
#
# Zero-size structs used as type parameters for compile-time state tracking.
# Usage:
#   struct Connection<State>:
#       fd: i64
#
#   fn connect(c: Connection<Disconnected>) -> Connection<Connected>: ...
#   fn send(c: Connection<Connected>, data: text): ...
#
# The @phantom annotation marks these as zero-size (no data fields needed).

# ============================================================================
# Ownership State Markers
# ============================================================================

struct Owned:
    """Phantom marker: value is uniquely owned."""
    _phantom: i64  # placeholder field (phantom structs need at least one field currently)

struct Borrowed:
    """Phantom marker: value is borrowed (shared reference)."""
    _phantom: i64

# ============================================================================
# Access Mode Markers
# ============================================================================

struct ReadOnly:
    """Phantom marker: value can only be read."""
    _phantom: i64

struct WriteOnly:
    """Phantom marker: value can only be written."""
    _phantom: i64

struct ReadWrite:
    """Phantom marker: value supports both read and write."""
    _phantom: i64

# ============================================================================
# Connection State Markers
# ============================================================================

struct Connected:
    """Phantom marker: connection is established."""
    _phantom: i64

struct Disconnected:
    """Phantom marker: connection is not yet established."""
    _phantom: i64

# ============================================================================
# Validation State Markers
# ============================================================================

struct Validated:
    """Phantom marker: data has been validated."""
    _phantom: i64

struct Unvalidated:
    """Phantom marker: data has NOT been validated yet."""
    _phantom: i64

# ============================================================================
# Builder Pattern Markers
# ============================================================================

struct Configured:
    """Phantom marker: configuration is complete."""
    _phantom: i64

struct Unconfigured:
    """Phantom marker: configuration is incomplete."""
    _phantom: i64

# ============================================================================
# Lock State Markers
# ============================================================================

struct Locked:
    """Phantom marker: resource is locked."""
    _phantom: i64

struct Unlocked:
    """Phantom marker: resource is unlocked."""
    _phantom: i64

# ============================================================================
# Factory Functions (for construction, since direct struct construction
# of non-first structs in imported modules requires factory functions)
# ============================================================================

fn owned() -> Owned:
    Owned(_phantom: 0)

fn borrowed() -> Borrowed:
    Borrowed(_phantom: 0)

fn read_only() -> ReadOnly:
    ReadOnly(_phantom: 0)

fn write_only() -> WriteOnly:
    WriteOnly(_phantom: 0)

fn read_write() -> ReadWrite:
    ReadWrite(_phantom: 0)

fn connected() -> Connected:
    Connected(_phantom: 0)

fn disconnected() -> Disconnected:
    Disconnected(_phantom: 0)

fn validated() -> Validated:
    Validated(_phantom: 0)

fn unvalidated() -> Unvalidated:
    Unvalidated(_phantom: 0)

fn configured() -> Configured:
    Configured(_phantom: 0)

fn unconfigured() -> Unconfigured:
    Unconfigured(_phantom: 0)

fn locked() -> Locked:
    Locked(_phantom: 0)

fn unlocked() -> Unlocked:
    Unlocked(_phantom: 0)

# ============================================================================
# Exports
# ============================================================================

export Owned, Borrowed
export ReadOnly, WriteOnly, ReadWrite
export Connected, Disconnected
export Validated, Unvalidated
export Configured, Unconfigured
export Locked, Unlocked
export owned, borrowed
export read_only, write_only, read_write
export connected, disconnected
export validated, unvalidated
export configured, unconfigured
export locked, unlocked
