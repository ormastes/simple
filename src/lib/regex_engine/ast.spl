# Regular Expression Engine - AST Construction
#
# Abstract Syntax Tree node construction functions.

from .types import RegexAST

# ============================================================================
# AST CONSTRUCTION
# ============================================================================

fn ast_literal(ch: text) -> any:
    """Create AST node for literal character."""
    RegexAST(node_type: "literal", value: ch, children: [], min_count: 0, max_count: 0, lazy: false, negated: false, group_id: -1, group_name: "")

fn ast_dot() -> any:
    """Create AST node for dot (any character)."""
    RegexAST(node_type: "dot", value: "", children: [], min_count: 0, max_count: 0, lazy: false, negated: false, group_id: -1, group_name: "")

fn ast_char_class(definition: text, negated: bool) -> any:
    """Create AST node for character class."""
    RegexAST(node_type: "char_class", value: definition, children: [], min_count: 0, max_count: 0, lazy: false, negated: negated, group_id: -1, group_name: "")

fn ast_concat(children: [any]) -> any:
    """Create AST node for concatenation."""
    RegexAST(node_type: "concat", value: "", children: children, min_count: 0, max_count: 0, lazy: false, negated: false, group_id: -1, group_name: "")

fn ast_alternation(children: [any]) -> any:
    """Create AST node for alternation (|)."""
    RegexAST(node_type: "alternation", value: "", children: children, min_count: 0, max_count: 0, lazy: false, negated: false, group_id: -1, group_name: "")

fn ast_quantifier(child: any, min_count: i64, max_count: i64, lazy: bool) -> any:
    """Create AST node for quantifier (*, +, ?, {n,m})."""
    RegexAST(node_type: "quantifier", value: "", children: [child], min_count: min_count, max_count: max_count, lazy: lazy, negated: false, group_id: -1, group_name: "")

fn ast_group(child: any, group_id: i64, group_name: text) -> any:
    """Create AST node for group (capturing or non-capturing)."""
    RegexAST(node_type: "group", value: "", children: [child], min_count: 0, max_count: 0, lazy: false, negated: false, group_id: group_id, group_name: group_name)

fn ast_anchor(anchor_type: text) -> any:
    """Create AST node for anchor (^, $, \b, \B)."""
    RegexAST(node_type: "anchor", value: anchor_type, children: [], min_count: 0, max_count: 0, lazy: false, negated: false, group_id: -1, group_name: "")

export ast_literal, ast_dot, ast_char_class, ast_concat, ast_alternation
export ast_quantifier, ast_group, ast_anchor
