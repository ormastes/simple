# Async Runtime
#
# Asynchronous programming runtime with futures, executors, and async I/O.
# Provides cooperative multitasking without blocking threads.
#
# Components:
# - Future<T>: Represents an async computation
# - Promise<T>: Write side of a future
# - Task: Schedulable unit of async work
# - Executor: Single-threaded task executor
# - Scheduler: Task scheduling with priorities
# - AsyncIO: Non-blocking I/O operations
#
# Usage:
#   val future = async_compute()
#   val result = await future  # Suspends until ready
#
# Architecture:
# - Cooperative multitasking (no preemption)
# - Poll-based futures (Rust-style)
# - Event loop with wake notifications

# Import and re-export from submodules
use std.async.poll.{Poll}
use std.async.future.{Future}
use std.async.promise.{Promise}
use std.async.task.{Task, TaskState}
use std.async.executor.{Executor}
use std.async.scheduler.{Scheduler}
use std.async.io.{AsyncIO}
use std.async.combinators.{spawn, join, select}

# Re-export all public types and functions
export Poll
export Future
export Promise
export Task
export TaskState
export Executor
export Scheduler
export AsyncIO
export spawn
export join
export select

# ============================================================================
# Two-Tier Runtime System
# ============================================================================
#
# Simple provides two async runtime implementations:
#
# 1. EMBEDDED (src/lib/nogc_async_mut/async_embedded.spl)
#    - Fixed capacity (configurable MAX_TASKS, MAX_FUTURES)
#    - No heap allocation (stack + static only)
#    - Polling-based (no wakers)
#    - Simple cooperative scheduling
#    - Use for: microcontrollers, RTOS, resource-constrained
#
# 2. HOST (src/lib/nogc_async_mut/async_host.spl)
#    - Dynamic capacity (heap-allocated)
#    - Waker-based notification
#    - Work-stealing scheduler
#    - Full cancellation support
#    - Use for: desktop, server, full OS
#
# SHARED INTERFACE (src/lib/nogc_async_mut/async_core.spl)
#    - Common traits: FutureCore, TaskHandleCore, JoinSetCore
#    - Common types: Poll, TaskState, Priority, CancellationToken
#    - Code can target both runtimes using traits
#
# NEW PRIMITIVES (in both runtimes):
#    - JoinSet<T>     - Await group with streaming completion
#    - FuturesUnordered<T> - Stream futures as each completes
#    - TaskHandle.is_finished() - Non-blocking completion check
#
# Usage:
#   # For unified API (selectable at compile time):
#   use std.async_unified.*
#
#   # For embedded specifically:
#   use std.async_embedded.*
#
#   # For host specifically:
#   use std.async_host.*
#
# ============================================================================
