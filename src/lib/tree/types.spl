# Tree Type Definitions
#
# Core type definitions and node construction for binary trees.
# Represents trees using tuples: (value, left, right) for nodes, nil for empty.

# ============================================================================
# Exports
# ============================================================================

export create_node, create_leaf, node_value, node_left, node_right, is_leaf

# ============================================================================
# Node Construction
# ============================================================================

fn create_node(value, left, right):
    """Create a tree node (tuple representation).

    Example:
        create_node(5, nil, nil)  # (5, nil, nil)
    """
    (value, left, right)

fn create_leaf(value):
    """Create a leaf node (no children).

    Example:
        create_leaf(10)  # (10, nil, nil)
    """
    (value, nil, nil)

fn node_value(node):
    """Get value from node.

    Example:
        node_value((5, nil, nil))  # 5
    """
    if not node.?:
        return nil
    val (value, _, _) = node
    value

fn node_left(node):
    """Get left child of node.

    Example:
        node_left((5, left_child, right_child))  # left_child
    """
    if not node.?:
        return nil
    val (_, left, _) = node
    left

fn node_right(node):
    """Get right child of node.

    Example:
        node_right((5, left_child, right_child))  # right_child
    """
    if not node.?:
        return nil
    val (_, _, right) = node
    right

fn is_leaf(node):
    """Check if node is a leaf (has no children).

    Example:
        is_leaf((5, nil, nil))  # true
    """
    if not node.?:
        return false
    val (_, left, right) = node
    not left.? and not right.?
