# Verification Module
# Provides formal verification support for Simple programs using Lean 4.
#
# This module contains:
# - Verification models (memory capabilities, contracts, SC-DRF)
# - Lean code generation
# - Proof obligation management
#
# ## Usage
#
# ```simple
# import verification.models.{RefCapability, ContractExpr}
# import verification.lean.{LeanCodegen, LeanEmitter}
# import verification.proofs.{ProofObligation, ProofChecker}
# ```

# Re-export main components
# Import models submodule for tensor_dimensions support
use models

# NOTE: Other modules commented out to avoid circular import issues
# The submodules import each other, so using `pub use *` causes problems
# Users should import specific submodules directly:
#   import verification.lean.codegen as codegen
#   import verification.models.contracts as contracts
# pub use models.*
# pub use lean.*
# pub use proofs.*

# Module version
const VERSION: text = "0.1.0"

# Check if Lean 4 is available
fn is_lean_available() -> bool:
    use sys.process as process
    match process.run("lean", ["--version"]):
        case Ok(result):
            result.exit_code == 0
        case Err(_):
            false

# Get Lean version string
fn get_lean_version() -> Option<text>:
    use sys.process as process
    match process.run("lean", ["--version"]):
        case Ok(result):
            if result.exit_code == 0:
                Some(result.stdout.trim())
            else:
                None
        case Err(_):
            None
