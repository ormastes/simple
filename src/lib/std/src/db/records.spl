# Database Record Type Definitions
#
# Core record structures for TodoDb, FeatureDb, and TaskDb.
# Matches Rust definitions in src/rust/driver/src/todo_db.rs

# Public exports
export TodoRecord, FeatureRecord, TaskRecord
export TodoDb, FeatureDb, TaskDb

struct TodoRecord:
    id: text
    keyword: text         # "TODO", "FIXME", "HACK", etc.
    area: text           # "parser", "runtime", "codegen", etc.
    priority: text       # "P0", "P1", "P2", "P3"
    description: text
    file: text
    line: i64
    issue: Option<text>  # Optional issue ID
    blocked: [text]      # List of blocking IDs
    status: text         # "open", "in_progress", "blocked", "done"
    valid: bool

struct FeatureRecord:
    id: text
    category: text
    name: text
    description: text
    status: text
    valid: bool

struct TaskRecord:
    id: text
    name: text
    description: text
    priority: text
    status: text
    valid: bool

# Database Container Types

struct TodoDb:
    records: Dict<text, TodoRecord>

struct FeatureDb:
    records: Dict<text, FeatureRecord>

struct TaskDb:
    records: Dict<text, TaskRecord>

impl TodoDb:
    static fn new() -> TodoDb:
        TodoDb(records: {})

impl FeatureDb:
    static fn new() -> FeatureDb:
        FeatureDb(records: {})

impl TaskDb:
    static fn new() -> TaskDb:
        TaskDb(records: {})
