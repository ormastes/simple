# Database Record Type Definitions
#
# Core record structures for TodoDb, FeatureDb, and TaskDb.
# Matches Rust definitions in src/rust/driver/src/todo_db.rs

struct TodoRecord:
    id: text
    keyword: text         # "TODO", "FIXME", "HACK", etc.
    area: text           # "parser", "runtime", "codegen", etc.
    priority: text       # "P0", "P1", "P2", "P3"
    description: text
    file: text
    line: i64
    issue: Option<text>  # Optional issue ID
    blocked: [text]      # List of blocking IDs
    status: text         # "open", "in_progress", "blocked", "done"
    valid: bool

struct FeatureRecord:
    id: text
    category: text
    name: text
    description: text
    status: text
    valid: bool

struct TaskRecord:
    id: text
    name: text
    description: text
    priority: text
    status: text
    valid: bool

# Database Container Types

struct TodoDb:
    records: Dict<text, TodoRecord>

struct FeatureDb:
    records: Dict<text, FeatureRecord>

struct TaskDb:
    records: Dict<text, TaskRecord>

# Constructor functions (static methods not yet supported in interpreter)
fn new_todo_db() -> TodoDb:
    TodoDb(records: {})

fn new_feature_db() -> FeatureDb:
    FeatureDb(records: {})

fn new_task_db() -> TaskDb:
    TaskDb(records: {})

# Public exports
export TodoRecord, FeatureRecord, TaskRecord
export TodoDb, FeatureDb, TaskDb
export new_todo_db, new_feature_db, new_task_db
