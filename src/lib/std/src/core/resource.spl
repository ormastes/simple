# Resource Trait - Unified cleanup interface for system resources
#
# This trait provides a common interface for resources that require explicit
# cleanup, such as file handles, network sockets, database connections, etc.
#
# Resources implementing this trait can be used with:
# - `defer` statements for scope-based cleanup
# - `using`/`with` statements for automatic cleanup
# - `ResourceRegistry` for leak tracking
#
# Example:
#   val file = await File::open("test.txt", OpenMode::Read)?
#   defer file.close()
#   # ... use file ...
#   # close() called automatically when scope exits

# Resource trait - unified interface for closeable resources
trait Resource:
    # Close the resource and release any associated system handles.
    # This method should be idempotent - calling it multiple times should be safe.
    fn close()

    # Check if the resource is still open and usable.
    # Default implementation assumes the resource is always open.
    fn is_open() -> bool:
        true

    # Get a human-readable name for this resource type.
    # Used in error messages and leak reports.
    fn resource_name() -> text:
        "Resource"


# AsyncResource trait - for resources that require async cleanup
trait AsyncResource:
    # Async close for resources that need async cleanup (e.g., network sockets)
    async fn close()

    # Check if the resource is still open
    fn is_open() -> bool:
        true

    # Get a human-readable name for this resource type
    fn resource_name() -> text:
        "AsyncResource"
