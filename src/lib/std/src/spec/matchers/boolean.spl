# Boolean Matchers - be_true, be_false, be_truthy, be_falsy
# Boolean value matchers

use matchers.{Matcher, MatchResult}

# True matcher: expect x to be_true()
class BeTrueMatcher:
    _dummy: bool

impl BeTrueMatcher:
    fn new() -> BeTrueMatcher:
        return BeTrueMatcher { _dummy: false }

impl Matcher for BeTrueMatcher:
    fn matches(actual: bool) -> MatchResult:
        if actual:
            return MatchResult.success()
        else:
            return MatchResult.failure(
                "Expected true but got false"
            )

fn be_true() -> BeTrueMatcher:
    return BeTrueMatcher.new()

# False matcher: expect x to be_false()
class BeFalseMatcher:
    _dummy: bool

impl BeFalseMatcher:
    fn new() -> BeFalseMatcher:
        return BeFalseMatcher { _dummy: false }

impl Matcher for BeFalseMatcher:
    fn matches(actual: bool) -> MatchResult:
        if not actual:
            return MatchResult.success()
        else:
            return MatchResult.failure(
                "Expected false but got true"
            )

fn be_false() -> BeFalseMatcher:
    return BeFalseMatcher.new()

# Truthy matcher: expect x to be_truthy() (for Optional/Result types)
class BeTruthyMatcher:
    _dummy: bool

impl BeTruthyMatcher:
    fn new() -> BeTruthyMatcher:
        return BeTruthyMatcher { _dummy: false }

impl Matcher for BeTruthyMatcher:
    fn matches(actual: Option<Any>) -> MatchResult:
        match actual:
            case Some(_):
                return MatchResult.success()
            case None:
                return MatchResult.failure(
                    "Expected Some(...) but got None"
                )

fn be_truthy() -> BeTruthyMatcher:
    return BeTruthyMatcher.new()

# Falsy matcher: expect x to be_falsy() (for Optional/Result types)
class BeFalsyMatcher:
    _dummy: bool

impl BeFalsyMatcher:
    fn new() -> BeFalsyMatcher:
        return BeFalsyMatcher { _dummy: false }

impl Matcher for BeFalsyMatcher:
    fn matches(actual: Option<Any>) -> MatchResult:
        match actual:
            case None:
                return MatchResult.success()
            case Some(v):
                return MatchResult.failure(
                    "Expected None but got Some({v})"
                )

fn be_falsy() -> BeFalsyMatcher:
    return BeFalsyMatcher.new()

pub use be_true, be_false, be_truthy, be_falsy
pub use BeTrueMatcher, BeFalseMatcher, BeTruthyMatcher, BeFalsyMatcher
