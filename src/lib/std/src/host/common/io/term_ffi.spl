# Common Terminal FFI Declarations
# Shared across all host variants

export native_stdin, native_stdout, native_stderr
export native_is_tty, native_enable_raw_mode, native_disable_raw_mode
export native_get_term_size, native_term_write, native_term_read
export native_term_read_timeout, native_term_flush, native_term_poll
export RawHandle

# Raw handle type (platform-specific file descriptor)
type RawHandle = i64

# Standard I/O handles
extern fn native_stdin() -> RawHandle
extern fn native_stdout() -> RawHandle
extern fn native_stderr() -> RawHandle

# TTY detection
extern fn native_is_tty(handle: RawHandle) -> bool

# Raw mode control
extern fn native_enable_raw_mode(handle: RawHandle) -> i32
extern fn native_disable_raw_mode(handle: RawHandle) -> i32

# Terminal size
extern fn native_get_term_size(handle: RawHandle, rows: *mut u16, cols: *mut u16) -> i32

# Read/Write operations
extern fn native_term_write(handle: RawHandle, buf: *const u8, len: u64) -> i64
extern fn native_term_read(handle: RawHandle, buf: *mut u8, len: u64) -> i64
extern fn native_term_read_timeout(handle: RawHandle, buf: *mut u8, len: u64, timeout_ms: u64) -> i64

# Flush and poll
extern fn native_term_flush(handle: RawHandle) -> i32
extern fn native_term_poll(handle: RawHandle, timeout_ms: u64) -> i32
