# File System API - Async file operations (NoGC Mutable Variant)
#
# Comprehensive file I/O with mmap support and mold-inspired staging.
#
# Features:
# - Memory-mapped file I/O (zero-copy)
# - Async file handles with background loading
# - File staging for parallel processing
# - Context manager support (with...as syntax)
# - Semantic types (FilePath, DirPath, ByteCount)
#
# Quick Start:
#   use host.async_nogc_mut.io.fs as fs
#
#   # Simple mmap (zero-copy read)
#   async with await fs.open_mmap("data.txt"_filepath) as mmap:
#       val content = mmap.as_str()?
#
#   # Full file handle with staging
#   val file = await File::open_read("large.bin"_filepath)?
#   await file.stage_mmap()?

# Import common types and FFI
use host.common.io.fs_types.*
use host.common.io.fs_ffi.*

# Import from submodules
from mmap import {MmapRegion, open_mmap, open_mmap_with, open_mmap_sync, open_mmap_sync_with}
from file import File
from ops import {read, read_text, write, write_text, append, append_text, create_dir, create_dir_all, remove, remove_dir, remove_dir_all, rename, copy, copy_zero, exists, metadata, read_dir, read_sync, read_text_sync, write_sync, write_text_sync, exists_sync, metadata_sync}
from process import {spawn_worker_with_staging, spawn_workers_with_staging, stage}

# Re-export all public APIs (types from common, implementations from local)
export MmapRegion, MmapMode, MmapAdvice
export open_mmap, open_mmap_with, open_mmap_sync, open_mmap_sync_with
export File, StageMode, StagingStatus, StageState
export read, read_text, write, write_text, append, append_text
export create_dir, create_dir_all, remove, remove_dir, remove_dir_all
export rename, copy, copy_zero
export exists, metadata, read_dir, DirEntries
export read_sync, read_text_sync, write_sync, write_text_sync
export exists_sync, metadata_sync
export ProcessHandle, spawn_worker_with_staging, spawn_workers_with_staging, stage
export ContextManager, AsyncContextManager, Exception
