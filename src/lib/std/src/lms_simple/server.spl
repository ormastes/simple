# Minimal LMS Server
# Simplified to use only working Simple syntax

import lms_simple.transport as transport
import lms_simple.error as error

# Server state flags
val STATE_UNINITIALIZED = 0
val STATE_INITIALIZED = 1
val STATE_SHUTTING_DOWN = 2

# Simple server class
pub class LmsServer:
    state: i32

    pub fn new() -> LmsServer:
        transport.log_debug("Creating new LMS server")
        LmsServer(state: STATE_UNINITIALIZED)

    pub fn run(self):
        transport.log_debug("LMS server starting")
        transport.log_debug("Server state: " + self.state.to_string())

        # Simple test loop - just log and exit for now
        if self.state == STATE_UNINITIALIZED:
            transport.log_debug("Server is uninitialized")

        transport.log_debug("LMS server stopped")
