# Simple Libraries Module
#
# Provides shared libraries for the Simple compiler, tools, and applications.
# Includes databases, JSON utilities, testing frameworks, and FFI helpers.
#
# Public API:
#   - Database types (BugDB, TestDB, FeatureDB)
#   - JSON building utilities
#   - QEMU testing infrastructure
#   - Parser utilities
#   - PyTorch FFI wrappers
#   - Pure utility functions
#
# Internal Implementation:
#   - Execution runtime helpers
#   - CUDA/GPU runtime
#   - Hook detectors
#   - Memory utilities
#   - Advanced collections

# ============================================================================
# Public Modules
# ============================================================================

# Database systems (BugDB, TestDB, FeatureDB)
pub mod database

# JSON utilities
pub mod json

# Testing infrastructure
pub mod qemu

# Parser utilities (shared parsing helpers)
pub mod parser

# PyTorch FFI wrappers
pub mod torch

# Pure functional utilities (28 files of utility functions)
pub mod pure

# Advanced collections (persistent data structures)
pub mod collections

# ============================================================================
# Internal Modules (Implementation Details)
# ============================================================================

mod execution      # Runtime execution helpers
mod cuda           # CUDA/GPU runtime
mod hooks          # Hook detection system
mod memory         # Memory utilities

# Actor system (internal - used by async runtime)
mod actor_heap
mod actor_scheduler
mod mailbox
mod message_transfer
mod lazy_val
mod symbol
mod perf

# ============================================================================
# Re-export Common Types
# ============================================================================

# Database types - most commonly imported
pub use .database.bug.{
    BugDatabase, Bug, BugSeverity, BugStatus,
    create_bug_database, load_bug_database,
    parse_severity, parse_status
}

pub use .database.test.{
    TestDatabase, TestRun, TestResult, RunStatus, TestStatus,
    create_test_database, load_test_database
}

pub use .database.feature.{
    FeatureDatabase, Feature, FeatureStatus, FeatureMode,
    create_feature_database, load_feature_database
}

# JSON utilities - heavily used in MCP and tools
pub use .json.builder.{
    JsonBuilder, JsonArrayBuilder, escape_json
}

# QEMU testing - used by test runner
pub use .qemu.{
    QemuArch, QemuConfig, QemuInstance,
    ExitCodeResult, interpret_exit_code,
    is_qemu_available, is_gdb_available,
    find_rv32_gcc, build_rv32_binary
}

# Parser utilities
pub use .parser.parser.{parse, parse_expr}

# PyTorch wrappers
pub use .torch.{
    TorchTensorWrapper, TorchStream,
    torch_available, torch_cuda_available
}
