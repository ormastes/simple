# Test Database Extended - Type Definitions
#
# All struct definitions for TestDatabaseExtended

struct FileRecord:
    file_id: i64
    path_str: i32  # String ID

struct SuiteRecord:
    suite_id: i64
    file_id: i64
    name_str: i32  # String ID

struct TestRecord:
    test_id: i64
    suite_id: i64
    name_str: i32      # String ID
    category_str: i32   # String ID
    status_str: i32     # String ID
    tags_str: i32       # String ID
    description_str: i32  # String ID
    valid: bool

struct CounterRecord:
    test_id: i64
    total_runs: i64
    passed: i64
    failed: i64
    crashed: i64
    timed_out: i64
    flaky_count: i64
    consecutive_passes: i64

struct TimingSummary:
    test_id: i64
    mean: f64
    p50: f64
    p90: f64
    p95: f64
    p99: f64
    iqr: f64
    has_baseline: bool
    baseline_p50: f64
    baseline_updated_at: text
    last_10_runs: text  # JSON array of recent timings

struct TimingRun:
    timing_run_id: i64
    test_id: i64
    duration_ms: f64
    run_id: text
    timestamp: text

struct ChangeEvent:
    change_id: i64
    test_id: i64
    timestamp: text
    event_type: text  # "status_change", "became_flaky", "baseline_update"
    from_status: text
    to_status: text
    description: text

struct RunRecord:
    run_id: text
    start_time: text
    end_time: text
    pid: i64
    hostname: text
    status: text
    test_count: i64
    passed: i64
    failed: i64
    crashed: i64
    timed_out: i64

struct TestInfo:
    test_name: text
    file_path: text
    suite_name: text
    category: text
    status: text
    valid: bool
    mean_duration: f64
    p50_duration: f64
    total_runs: i64
    passed: i64
    failed: i64
    is_flaky: bool

export FileRecord, SuiteRecord, TestRecord, CounterRecord
export TimingSummary, TimingRun, ChangeEvent, RunRecord, TestInfo
