# FFI - AST Operations
# Centralized AST manipulation and registry FFI wrappers

# ============================================================================
# AST Expression Operations
# ============================================================================

extern fn rt_ast_expr_tag(handle: i64) -> text

fn ast_expr_tag(handle: i64) -> text:
    rt_ast_expr_tag(handle)

extern fn rt_ast_expr_free(handle: i64)

fn ast_expr_free(handle: i64):
    rt_ast_expr_free(handle)

# --- Literal values ---

extern fn rt_ast_expr_bool_value(handle: i64) -> bool

fn ast_expr_bool_value(handle: i64) -> bool:
    rt_ast_expr_bool_value(handle)

extern fn rt_ast_expr_int_value(handle: i64) -> i64

fn ast_expr_int_value(handle: i64) -> i64:
    rt_ast_expr_int_value(handle)

extern fn rt_ast_expr_float_value(handle: i64) -> f64

fn ast_expr_float_value(handle: i64) -> f64:
    rt_ast_expr_float_value(handle)

extern fn rt_ast_expr_string_value(handle: i64) -> text

fn ast_expr_string_value(handle: i64) -> text:
    rt_ast_expr_string_value(handle)

# --- Identifier ---

extern fn rt_ast_expr_ident_name(handle: i64) -> text

fn ast_expr_ident_name(handle: i64) -> text:
    rt_ast_expr_ident_name(handle)

# --- Binary operations ---

extern fn rt_ast_expr_binary_left(handle: i64) -> i64

fn ast_expr_binary_left(handle: i64) -> i64:
    rt_ast_expr_binary_left(handle)

extern fn rt_ast_expr_binary_op(handle: i64) -> text

fn ast_expr_binary_op(handle: i64) -> text:
    rt_ast_expr_binary_op(handle)

extern fn rt_ast_expr_binary_right(handle: i64) -> i64

fn ast_expr_binary_right(handle: i64) -> i64:
    rt_ast_expr_binary_right(handle)

# --- Unary operations ---

extern fn rt_ast_expr_unary_op(handle: i64) -> text

fn ast_expr_unary_op(handle: i64) -> text:
    rt_ast_expr_unary_op(handle)

extern fn rt_ast_expr_unary_operand(handle: i64) -> i64

fn ast_expr_unary_operand(handle: i64) -> i64:
    rt_ast_expr_unary_operand(handle)

# --- Field access ---

extern fn rt_ast_expr_field_receiver(handle: i64) -> i64

fn ast_expr_field_receiver(handle: i64) -> i64:
    rt_ast_expr_field_receiver(handle)

extern fn rt_ast_expr_field_name(handle: i64) -> text

fn ast_expr_field_name(handle: i64) -> text:
    rt_ast_expr_field_name(handle)

# --- Method calls ---

extern fn rt_ast_expr_method_receiver(handle: i64) -> i64

fn ast_expr_method_receiver(handle: i64) -> i64:
    rt_ast_expr_method_receiver(handle)

extern fn rt_ast_expr_method_name(handle: i64) -> text

fn ast_expr_method_name(handle: i64) -> text:
    rt_ast_expr_method_name(handle)

extern fn rt_ast_expr_method_arg_count(handle: i64) -> i64

fn ast_expr_method_arg_count(handle: i64) -> i64:
    rt_ast_expr_method_arg_count(handle)

extern fn rt_ast_expr_method_arg(handle: i64, index: i64) -> i64

fn ast_expr_method_arg(handle: i64, index: i64) -> i64:
    rt_ast_expr_method_arg(handle, index)

# --- Function calls ---

extern fn rt_ast_expr_call_callee(handle: i64) -> i64

fn ast_expr_call_callee(handle: i64) -> i64:
    rt_ast_expr_call_callee(handle)

extern fn rt_ast_expr_call_arg_count(handle: i64) -> i64

fn ast_expr_call_arg_count(handle: i64) -> i64:
    rt_ast_expr_call_arg_count(handle)

extern fn rt_ast_expr_call_arg(handle: i64, index: i64) -> i64

fn ast_expr_call_arg(handle: i64, index: i64) -> i64:
    rt_ast_expr_call_arg(handle, index)

# --- Array operations ---

extern fn rt_ast_expr_array_len(handle: i64) -> i64

fn ast_expr_array_len(handle: i64) -> i64:
    rt_ast_expr_array_len(handle)

extern fn rt_ast_expr_array_get(handle: i64, index: i64) -> i64

fn ast_expr_array_get(handle: i64, index: i64) -> i64:
    rt_ast_expr_array_get(handle, index)

# ============================================================================
# AST Argument Operations
# ============================================================================

extern fn rt_ast_arg_name(handle: i64) -> text?

fn ast_arg_name(handle: i64) -> text?:
    rt_ast_arg_name(handle)

extern fn rt_ast_arg_value(handle: i64) -> i64

fn ast_arg_value(handle: i64) -> i64:
    rt_ast_arg_value(handle)

extern fn rt_ast_arg_free(handle: i64)

fn ast_arg_free(handle: i64):
    rt_ast_arg_free(handle)

# ============================================================================
# AST Node Operations
# ============================================================================

extern fn rt_ast_node_free(handle: i64)

fn ast_node_free(handle: i64):
    rt_ast_node_free(handle)

# ============================================================================
# AST Registry
# ============================================================================

extern fn rt_ast_registry_count() -> i64

fn ast_registry_count() -> i64:
    rt_ast_registry_count()

extern fn rt_ast_registry_clear()

fn ast_registry_clear():
    rt_ast_registry_clear()
