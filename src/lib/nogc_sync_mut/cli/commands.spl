# CLI Commands Module
# Subcommand support

# =============================================================================
# Command/Subcommand Support
# =============================================================================

# Create a command with its own parser
fn create_command(name: text, help: text) -> tuple:
    val cmd_parser = create_parser(name, "")
    (name, help, cmd_parser)

# Add a subcommand to a parser
fn add_subcommand(parser: tuple, command: tuple) -> tuple:
    val parser_name = parser[0]
    val version = parser[1]
    val flags = parser[2]
    val options = parser[3]
    val positionals = parser[4]
    val commands = parser[5]
    val description = parser[6]

    val new_commands = commands + [command]
    (parser_name, version, flags, options, positionals, new_commands, description)

# Get command by name
fn get_command(parser: tuple, name: text) -> tuple:
    val commands = parser[5]
    var result = nil
    var i = 0
    while i < len(commands):
        val cmd = commands[i]
        val cmd_name = cmd[0]
        if cmd_name == name:
            result = cmd
            i = len(commands)
        i = i + 1
    result

# Helper function for create_command
fn create_parser(name: text, version: text) -> tuple:
    val flags = []
    val options = []
    val positionals = []
    val commands = []
    val description = ""
    (name, version, flags, options, positionals, commands, description)
