# HTTP Response Handling Functions

import types
import request

fn create_response(status_code: i64, status_text: text, headers: list, body: text) -> (i64, text, list, text):
    (status_code, status_text, headers, body)

fn response_get_status_code(response: (i64, text, list, text)) -> i64:
    response.0

fn response_get_status_text(response: (i64, text, list, text)) -> text:
    response.1

fn response_get_headers(response: (i64, text, list, text)) -> list:
    response.2

fn response_get_body(response: (i64, text, list, text)) -> text:
    response.3

fn response_get_header(response: (i64, text, list, text), name: text) -> text:
    var headers = response_get_headers(response)
    request.get_header(headers, name)

fn response_is_success(response: (i64, text, list, text)) -> bool:
    var code = response_get_status_code(response)
    code >= 200 and code < 300

fn response_is_redirect(response: (i64, text, list, text)) -> bool:
    var code = response_get_status_code(response)
    code >= 300 and code < 400

fn response_is_client_error(response: (i64, text, list, text)) -> bool:
    var code = response_get_status_code(response)
    code >= 400 and code < 500

fn response_is_server_error(response: (i64, text, list, text)) -> bool:
    var code = response_get_status_code(response)
    code >= 500 and code < 600

fn status_code_to_text(code: i64) -> text:
    if code == 200:
        return "OK"
    if code == 201:
        return "Created"
    if code == 400:
        return "Bad Request"
    if code == 404:
        return "Not Found"
    if code == 500:
        return "Internal Server Error"
    "Unknown"
