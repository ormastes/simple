# Cache Type Definitions
#
# Purpose: Cache data structures and helper functions
#
# Contains:
# - Common helper functions for cache implementations
# - Type definitions (via dictionaries)

import string

# ============================================================================
# Helper Functions
# ============================================================================

fn _get_timestamp() -> i64:
    """Get current timestamp (simulated with counter for testing)."""
    # In real implementation, this would return actual system time
    # For now, we use a counter-based approach
    1000000

fn _hash_key(key: text) -> i64:
    """Hash a string key to i64."""
    text_hash(key)

fn _find_key_index(keys, key: text) -> i64:
    """Find index of key in keys array. Returns -1 if not found."""
    var i = 0
    while i < keys.len():
        if keys[i] == key:
            return i
        i = i + 1
    -1

fn _remove_at_index(arr, index: i64):
    """Remove element at index from array. Returns new array."""
    var result = []
    var i = 0
    while i < arr.len():
        if i != index:
            result.push(arr[i])
        i = i + 1
    result

export _get_timestamp, _hash_key, _find_key_index, _remove_at_index
