# Pure Simple AST
# Abstract Syntax Tree definitions

export Expr, Stmt, Pattern, TypeExpr, Module
export BinOp, UnaryOp, Literal

# Binary operators
enum BinOp:
    Add
    Sub
    Mul
    Div
    Mod
    Eq
    NotEq
    Lt
    Gt
    LtEq
    GtEq
    And
    Or

# Unary operators
enum UnaryOp:
    Neg
    Not

# Literals
enum Literal:
    Int(i64)
    Float(text)
    String(text)
    Bool(bool)
    Unit

# Expressions
enum Expr:
    Literal(Literal)
    Identifier(text)
    Binary(BinOp, Expr, Expr)
    Unary(UnaryOp, Expr)
    Call(Expr, [Expr])
    Lambda([text], Expr)
    List([Expr])
    Tuple([Expr])
    Index(Expr, Expr)
    Field(Expr, text)
    If(Expr, Expr, Expr)
    MatchExpr(Expr, [(Pattern, Expr)])
    Block([Stmt])

# Patterns
enum Pattern:
    Wildcard
    Identifier(text)
    Literal(Literal)
    Tuple([Pattern])
    Constructor(text, [Pattern])

# Type expressions
enum TypeExpr:
    Named(text)
    Generic(text, [TypeExpr])
    Function([TypeExpr], TypeExpr)
    Tuple([TypeExpr])

# Statements
enum Stmt:
    Expr(Expr)
    Let(text, TypeExpr?, Expr)
    Assign(text, Expr)
    Return(Expr?)
    While(Expr, [Stmt])
    For(text, Expr, [Stmt])
    Function(text, [text], TypeExpr?, [Stmt])
    Struct(text, [(text, TypeExpr)])
    Enum(text, [(text, [TypeExpr])])

# Module
struct Module:
    statements: [Stmt]
