# Benchmark Types and Constants

# ============================================================================
# Configuration and Constants
# ============================================================================

val BENCHMARK_DEFAULT_WARMUP = 10
val BENCHMARK_DEFAULT_ITERATIONS = 100
val BENCHMARK_DEFAULT_OUTLIER_THRESHOLD = 1.5  # IQR multiplier
val BENCHMARK_REGRESSION_THRESHOLD = 0.05  # 5% threshold
val BENCHMARK_SIGNIFICANCE_THRESHOLD = 0.10  # 10% difference

# ============================================================================
# Suite Creation and Management
# ============================================================================

fn create_benchmark_suite(name: text):
    """Create a new benchmark suite.

    Returns: (name, benchmarks, config)

    Example:
        val suite = create_benchmark_suite("Array Operations")
    """
    val benchmarks = []
    val config = (
        warmup: BENCHMARK_DEFAULT_WARMUP,
        iterations: BENCHMARK_DEFAULT_ITERATIONS,
        remove_outliers: true,
        verbose: false
    )
    (name, benchmarks, config)

fn add_benchmark(suite, bench_name: text, bench_fn):
    """Add a benchmark to the suite.

    Args:
        suite: Benchmark suite tuple
        bench_name: Name of the benchmark
        bench_fn: Function to benchmark (takes no args)

    Example:
        add_benchmark(suite, "Linear search", fn():
            search_linear(data, target)
        )
    """
    val (suite_name, benchmarks, config) = suite
    val (warmup, iterations, remove_outliers, verbose) = config

    val benchmark = (bench_name, bench_fn, warmup, iterations)
    benchmarks.push(benchmark)

fn configure_suite(suite, warmup: i64, iterations: i64, remove_outliers: bool, verbose: bool):
    """Configure suite-wide settings.

    Example:
        configure_suite(suite, 20, 200, true, false)
    """
    val (suite_name, benchmarks, _) = suite
    val new_config = (warmup, iterations, remove_outliers, verbose)
    (suite_name, benchmarks, new_config)

