# Cache Creation Functions
#
# Purpose: Factory functions for creating different cache types
#
# Contains:
# - LRU cache creation
# - FIFO cache creation
# - LFU cache creation
# - TTL cache creation
# - Memoization cache creation

# ============================================================================
# LRU Cache
# ============================================================================

fn cache_lru_new(capacity: i64):
    """Create a new LRU cache with given capacity.

    Returns a cache dictionary with:
    - keys: Array of keys in access order (most recent last)
    - values: Array of values corresponding to keys
    - capacity: Maximum number of entries
    - hits: Number of cache hits
    - misses: Number of cache misses
    """
    {
        'type': 'lru',
        'keys': [],
        'values': [],
        'capacity': capacity,
        'hits': 0,
        'misses': 0
    }

# ============================================================================
# FIFO Cache
# ============================================================================

fn cache_fifo_new(capacity: i64):
    """Create a new FIFO cache with given capacity.

    Returns a cache dictionary with:
    - keys: Array of keys in insertion order
    - values: Array of values corresponding to keys
    - capacity: Maximum number of entries
    - hits: Number of cache hits
    - misses: Number of cache misses
    """
    {
        'type': 'fifo',
        'keys': [],
        'values': [],
        'capacity': capacity,
        'hits': 0,
        'misses': 0
    }

# ============================================================================
# LFU Cache
# ============================================================================

fn cache_lfu_new(capacity: i64):
    """Create a new LFU cache with given capacity.

    Returns a cache dictionary with:
    - keys: Array of keys
    - values: Array of values corresponding to keys
    - frequencies: Array of access frequencies
    - capacity: Maximum number of entries
    - hits: Number of cache hits
    - misses: Number of cache misses
    """
    {
        'type': 'lfu',
        'keys': [],
        'values': [],
        'frequencies': [],
        'capacity': capacity,
        'hits': 0,
        'misses': 0
    }

# ============================================================================
# TTL Cache
# ============================================================================

fn cache_ttl_new(capacity: i64, ttl_seconds: i64):
    """Create a new TTL cache with given capacity and TTL.

    Returns a cache dictionary with:
    - keys: Array of keys
    - values: Array of values corresponding to keys
    - expiry_times: Array of expiry timestamps
    - capacity: Maximum number of entries
    - ttl: Time to live in seconds
    - hits: Number of cache hits
    - misses: Number of cache misses
    """
    {
        'type': 'ttl',
        'keys': [],
        'values': [],
        'expiry_times': [],
        'capacity': capacity,
        'ttl': ttl_seconds,
        'hits': 0,
        'misses': 0
    }

# ============================================================================
# Memoization
# ============================================================================

fn memo_create(capacity: i64):
    """Create a memoization cache using LRU strategy.

    Returns a memoization cache that stores function call results.
    """
    cache_lru_new(capacity)

export cache_lru_new, cache_fifo_new, cache_lfu_new, cache_ttl_new, memo_create
