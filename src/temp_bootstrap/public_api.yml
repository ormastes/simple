# Public API Specification for Simple Language Compiler
# Used by simple_mock_helper for coverage tracking
#
# For Integration Tests: public functions
# For System Tests: class/struct methods

# Public functions for IT coverage tracking
public_functions:
  simple_compiler:
    - CompilerPipeline::new
    - CompilerPipeline::with_gc
    - CompilerPipeline::compile
    - Codegen::new
    - Codegen::compile_module
    - Codegen::get_object_code
    - Lowerer::new
    - Lowerer::lower_module
    - MirLowerer::new
    - MirLowerer::lower_module
    - SmfWriter::new
    - SmfWriter::write
    - SmfWriter::from_object_code
  simple_parser:
    - Lexer::new
    - Lexer::tokenize
    - Parser::new
    - Parser::parse
  simple_loader:
    - ModuleLoader::new
    - ModuleLoader::load
    - ModuleLoader::unload
    - ModuleLoader::reload
    - ModuleLoader::resolve_symbol
    - ModuleRegistry::new
    - ModuleRegistry::load
  simple_driver:
    - Runner::new
    - Runner::run_file
    - Runner::run_source
    - Runner::compile_to_smf
    - Interpreter::new
    - Interpreter::run
    - run_code

# Types for System Test coverage tracking (class/struct methods)
types:
  simple_compiler::CompilerPipeline:
    methods: [new, with_gc, compile]
  simple_compiler::Codegen:
    methods: [new, compile_module, get_object_code]
  simple_compiler::Lowerer:
    methods: [new, lower_module]
  simple_compiler::MirLowerer:
    methods: [new, lower_module]
  simple_compiler::SmfWriter:
    methods: [new, add_string, add_code_section, add_data_section, add_symbol, add_relocation, write, from_object_code]
  simple_compiler::TypeRegistry:
    methods: [new, register, register_named, get, lookup]
  simple_compiler::MirFunction:
    methods: [new, new_vreg, new_block, block, block_mut]
  simple_compiler::MirBlock:
    methods: [new]
  simple_compiler::HirFunction:
    methods: [new]
  simple_compiler::HirModule:
    methods: [new]
  simple_parser::Lexer:
    methods: [new, tokenize, next_token]
  simple_parser::Parser:
    methods: [new, parse]
  simple_parser::Token:
    methods: [new]
  simple_parser::Span:
    methods: [new]
  simple_parser::ParseError:
    methods: [syntax_error, unexpected_token]
  simple_loader::ModuleLoader:
    methods: [new, load, load_with_resolver, unload, reload, resolve_symbol]
  simple_loader::LoadedModule:
    methods: [get_function, entry_point, is_reloadable, source_hash, exports]
  simple_loader::ModuleRegistry:
    methods: [new, load, unload, reload, resolve_symbol]
  simple_loader::SmfHeader:
    methods: [read, is_executable, is_reloadable, has_debug_info]
  simple_loader::SmfSection:
    methods: [name_str, is_executable, is_writable]
  simple_loader::SymbolTable:
    methods: [new, lookup, symbol_name, exports]
  simple_loader::ExecutableMemory:
    methods: [as_ptr, as_mut_ptr, size]
  simple_loader::LinuxAllocator:
    methods: [new]
  simple_driver::Runner:
    methods: [new, with_gc_runtime, new_no_gc, new_with_gc_logging, gc, run_file, compile_to_smf, run_source]
  simple_driver::Interpreter:
    methods: [new, new_no_gc, run, run_with_stdin, run_simple, gc]
