# Source location and span types
# Used for compiler diagnostics, error messages, and IDE integration.

struct SourceLocation:
    """A single point in source code (1-based line and column)."""
    line: i64
    col: i64

    fn to_text() -> text:
        "" + self.line + ":" + self.col

    static fn at(line: i64, col: i64) -> SourceLocation:
        SourceLocation(line: line, col: col)

struct Span:
    """A contiguous range of source code between two locations."""
    start: SourceLocation
    end_loc: SourceLocation

    fn is_single_line() -> bool:
        self.start.line == self.end_loc.line

    fn contains_line(line: i64) -> bool:
        var result = false
        if line >= self.start.line:
            if line <= self.end_loc.line:
                result = true
        result

    fn line_count() -> i64:
        self.end_loc.line - self.start.line + 1

    static fn single_line(line: i64, start_col: i64, end_col: i64) -> Span:
        Span(
            start: SourceLocation(line: line, col: start_col),
            end_loc: SourceLocation(line: line, col: end_col)
        )

    static fn empty() -> Span:
        Span(
            start: SourceLocation(line: 0, col: 0),
            end_loc: SourceLocation(line: 0, col: 0)
        )

export SourceLocation, Span
