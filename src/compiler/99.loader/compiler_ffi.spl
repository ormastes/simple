# Compatibility compiler_ffi surface for interpreter/test runner.

class TypeInfo:
    type_name: text

class CompilerContext:
    alive: bool

fn CompilerContext__create() -> CompilerContext:
    CompilerContext(alive: true)

fn make_int_type(bits: i64, signed: bool) -> TypeInfo:
    if signed:
        return TypeInfo(type_name: "i" + bits.to_string())
    TypeInfo(type_name: "u" + bits.to_string())

fn make_float_type(bits: i64) -> TypeInfo:
    TypeInfo(type_name: "f" + bits.to_string())

fn make_bool_type() -> TypeInfo:
    TypeInfo(type_name: "bool")

fn make_string_type() -> TypeInfo:
    TypeInfo(type_name: "string")

fn make_named_type(name: text) -> TypeInfo:
    TypeInfo(type_name: name)

fn type_to_string(t: TypeInfo) -> text:
    t.type_name

fn type_args_is_empty(args: [TypeInfo]) -> bool:
    args.len() == 0

fn code_len(code: [u8]) -> i64:
    code.len() as i64

fn bytes_len(code: [u8]) -> i64:
    code.len() as i64

export TypeInfo, CompilerContext
export CompilerContext__create
export make_int_type, make_float_type, make_bool_type, make_string_type, make_named_type
export type_to_string, type_args_is_empty
export code_len, bytes_len
