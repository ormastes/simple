# Backend - Compiler Backend Implementations (FACADE)
#
# This is a facade module that re-exports all backend implementations.
# The actual implementation is split into focused modules:
#
# - backend/env.spl: Environment and scoping utilities (shared)
# - backend/interpreter.spl: Tree-walking interpreter backend
# - backend/compiler.spl: Native code generation (Cranelift JIT/AOT)
# - backend/sdn.spl: SDN export backend (data-only, blocks execution)
#
# This module maintains the original public API while delegating
# to specialized modules for better code organization.

use compiler.hir.*
use compiler.mir.*
use compiler.lexer.Span
use backend_types.*

# Re-export environment types and utilities
use backend.env.{EvalContext, Environment, empty_env_scope, HirVisitor}

# Re-export backend implementations
# TODO: Fix parse errors in backend/*.spl (runtime parser bugs)
# Commenting out for now to focus on module resolver
# use backend.interpreter.InterpreterBackendImpl
# use backend.jit_interpreter.{JitInterpreterBackend, JitInterpreterConfig, JitMode}
# use backend.compiler.CompilerBackendImpl
# use backend.sdn.SdnBackendImpl

# ============================================================================
# Backend Factory
# ============================================================================

pub fn create_backend(kind: BackendKind) -> Backend:
    """Create a backend by kind - STUB."""
    # TODO: Backends commented out due to parse errors
    panic("Backends not available")

pub fn get_backend() -> Backend:
    """Get the backend from DI container - STUB."""
    # TODO: Backends commented out due to parse errors
    panic("Backends not available")

# ============================================================================
# Exports
# ============================================================================

export Backend, BackendKind, BackendResult, BackendError, BackendErrorKind
export CompiledUnit, CompiledSymbol, CompiledSymbolKind, Relocation, RelocKind
export SdnValue, SdnValueKind
export Value, EnumPayloadValue, FunctionValue, ClosureValue, ObjectValue
export EvalContext, Environment
export HirVisitor
export create_backend, get_backend
# TODO: Backend implementations commented out due to parse errors
# export InterpreterBackendImpl, JitInterpreterBackend, JitInterpreterConfig, JitMode
# export CompilerBackendImpl, SdnBackendImpl
