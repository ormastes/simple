# MIR â†’ Backend adapter
#
# Provides a stable projection of MIR that backends can consume
# without coupling to MIR internals.
# Design: doc/research/compiler_mdsoc_design.md Section 4.3

struct MirProgram:
    """
    Backend-neutral view of a compiled MIR program.
    Backends consume this view, not MIR internals directly.
    """
    function_count: i64
    extern_fn_names: [text]
    string_literal_count: i64
    target_triple: text

    fn has_functions() -> bool:
        self.function_count > 0

    fn has_extern_fns() -> bool:
        self.extern_fn_names.len() > 0

    static fn empty() -> MirProgram:
        MirProgram(
            function_count: 0,
            extern_fn_names: [],
            string_literal_count: 0,
            target_triple: "interpreter-simple-runtime"
        )

struct MirDebugInfo:
    """Debug information for backends that support DWARF."""
    fn_source_files: [text]
    fn_start_lines: [i64]

export MirProgram, MirDebugInfo
