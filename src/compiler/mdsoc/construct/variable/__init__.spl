# Construct Capsule: variable
#
# Groups all compiler files that handle variable declarations and bindings.
# Tier: core (no dependencies — variables are foundational)
# Dimension: construct (vertical second axis)
# Participation: shared_bind

use compiler.mdsoc.types.*

export variable_capsule_def

fn variable_capsule_def() -> ConstructCapsule:
    """Define the variable construct capsule.

    Variables are foundational (core tier) — they appear in virtually
    every other construct. Let/var bindings, patterns, closures.
    """
    var cap = ConstructCapsule__new("variable", ConstructKind.Variable, ConstructTier.Core)

    cap.exclusive_files = []

    # Shared files — variable handling is pervasive
    val sb_parser_decls = SharedBinding__new("10.frontend/core/parser_decls.spl", "func", 10)
    val sb_ast = SharedBinding__new("10.frontend/core/ast.spl", "func", 10)
    val sb_hir = SharedBinding__new("20.hir/hir_definitions.spl", "func", 20)
    val sb_mir_stmts = SharedBinding__new("50.mir/mir_instructions.spl", "expr", 50)
    val sb_resolve = SharedBinding__new("35.semantics/resolve.spl", "variable", 35)
    val sb_interpreter = SharedBinding__new("70.backend/backend/interpreter.spl", "func", 70)

    cap.shared_bindings = [sb_parser_decls, sb_ast, sb_hir, sb_mir_stmts, sb_resolve, sb_interpreter]

    # Core tier — no dependencies
    cap.depends_on = []

    cap
