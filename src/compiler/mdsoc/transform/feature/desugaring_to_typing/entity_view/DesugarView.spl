# Desugaring â†’ Type Checking adapter
#
# Bridges desugared AST into type checker input.
# Provides typing stage with what it needs from desugaring.

struct DesugarTypingView:
    """
    Provides typing stage with what it needs from desugaring.
    Hides desugar pipeline internals from the type checker.
    """
    desugared_source: text
    injected_fn_names: [text]
    module_name: text

    fn has_injected_fns() -> bool:
        self.injected_fn_names.len() > 0

    static fn from_source(source: text, module: text) -> DesugarTypingView:
        DesugarTypingView(
            desugared_source: source,
            injected_fn_names: [],
            module_name: module
        )


# Desugared static methods for bootstrap interpreter compatibility

fn None__from_source(source: text, module: text) -> DesugarTypingView:
    DesugarTypingView(
        desugared_source: source,
        injected_fn_names: [],
        module_name: module
    )


export DesugarTypingView
