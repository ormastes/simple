# TypedAst â†’ HIR adapter
#
# Bridges the mismatch between the typed AST representation
# and the HIR's explicit-typed, name-resolved nodes.
# Design: doc/research/compiler_mdsoc_design.md Section 4.1

struct TypedAstContext:
    """
    Combined context for HIR lowering.
    Aggregates type inference results with AST for HIR lowering pass.
    Provides the bridge that HIR lowering needs without importing
    AST and type-checker stages directly.
    """
    ast_decl_count: i64
    symbol_count: i64
    inferred_type_count: i64
    module_name: text

    fn has_types() -> bool:
        self.inferred_type_count > 0

    fn has_symbols() -> bool:
        self.symbol_count > 0

    static fn empty() -> TypedAstContext:
        TypedAstContext(
            ast_decl_count: 0,
            symbol_count: 0,
            inferred_type_count: 0,
            module_name: ""
        )


# Desugared static methods for bootstrap interpreter compatibility

fn None__empty() -> TypedAstContext:
    TypedAstContext(
        ast_decl_count: 0,
        symbol_count: 0,
        inferred_type_count: 0,
        module_name: ""
    )


export TypedAstContext
