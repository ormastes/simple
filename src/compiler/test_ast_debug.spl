use compiler.test_common.*

val source = "fn main() -> i64:\n    0\n"
var parser = Parser.new(source)
val ast_module = parser.parse()

for name in ast_module.functions.keys():
    val fn_ = ast_module.functions[name]
    print "Function: {fn_.name}"
    print "  Return type: {fn_.return_type}"
    print "  Params: {fn_.params.len()}"
    print "  Body: {fn_.body}"
    print "  Body.stmts: {fn_.body.stmts.len()}"
    if fn_.body.value.?:
        print "  Body.value: {fn_.body.value.unwrap()}"
        print "  Body.value.kind: {fn_.body.value.unwrap().kind}"
    else:
        print "  Body.value: nil"
