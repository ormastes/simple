# Parsing Stage Ports
#
# Input/output port contracts for the parsing pipeline stage.
# The parser takes a token stream and produces an AST.
#
# Design: doc/research/compiler_mdsoc_design.md Section 2.2

struct ParseError:
    """A parse error with location information."""
    message: text
    line: i64
    col: i64

struct ParserInputPort:
    """Token stream from the lexer."""
    token_tags: [i64]
    token_texts: [text]
    token_lines: [i64]
    token_cols: [i64]
    token_count: i64
    source_text: text

struct ParserOutputPort:
    """Parsed module output (arena indices + errors)."""
    expr_count: i64
    stmt_count: i64
    decl_count: i64
    root_decls: [i64]
    errors: [ParseError]
    error_count: i64

export ParseError, ParserInputPort, ParserOutputPort
