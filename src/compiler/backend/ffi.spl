# FFI Declarations - Shared Runtime FFI Bindings
#
# This module consolidates FFI declarations used across the compiler.
# Interpreter-mode fix: direct extern fn declarations instead of std.ffi.* imports

# ============================================================================
# Extern Function Declarations
# ============================================================================

extern fn rt_env_get(key: text) -> text
extern fn rt_file_read_text(path: text) -> text
extern fn rt_file_read_bytes(path: text) -> [u8]
extern fn rt_file_write_text(path: text, content: text) -> bool
extern fn rt_file_write_bytes(path: text, content: [u8]) -> bool
extern fn rt_file_delete(path: text) -> bool
extern fn rt_file_exists(path: text) -> bool
extern fn rt_file_hash(path: text) -> text
extern fn rt_process_run(cmd: text, args: [text]) -> (text, text, i64)
extern fn rt_shell(cmd: text) -> i64
extern fn rt_exec(cmd: text) -> i32

# ============================================================================
# Wrapper Functions
# ============================================================================

fn env_get(key: text) -> text:
    rt_env_get(key)

fn file_read_text(path: text) -> text:
    rt_file_read_text(path)

fn file_read_bytes(path: text) -> [u8]:
    rt_file_read_bytes(path)

fn file_write_bytes(path: text, content: [u8]) -> bool:
    rt_file_write_bytes(path, content)

fn file_write(path: text, content: text) -> bool:
    rt_file_write_text(path, content)

fn file_delete(path: text) -> bool:
    rt_file_delete(path)

fn file_exists(path: text) -> bool:
    rt_file_exists(path)

fn file_hash(path: text) -> text:
    rt_file_hash(path)

fn shell(cmd: text) -> i64:
    rt_shell(cmd)

fn exec(cmd: text) -> i32:
    rt_exec(cmd)

# ============================================================================
# Type Definitions
# ============================================================================

# Shell execution result
struct ShellResult:
    exit_code: i64
    # # DESUGARED: stdout: text
    has_stdout: bool
    stdout: text
    # # DESUGARED: stderr: text
    has_stderr: bool
    stderr: text

# ============================================================================
# Exports
# ============================================================================

export ShellResult

export env_get
export file_read_text, file_read_bytes, file_write_bytes
export file_delete, file_write, file_exists, file_hash
export shell, exec
