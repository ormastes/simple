# Literal Converter - Shared Literal Conversion for All Backends
#
# Provides shared logic for converting HIR literals to backend values.
# Ensures all backends produce identical values for the same literals.

use compiler.backend_types.*
use compiler.mir_data.*

# ============================================================================
# Literal Converter
# ============================================================================

class LiteralConverter:
    """
    Converts HIR literals to backend values.
    Shared across all backends to ensure consistency.

    All methods are static - this is a utility class.
    """

    static fn convert_int(value: i64, ty: MirType?) -> Value:
        """Convert integer literal to value."""
        value_int(value)

    static fn convert_float(value: f64, ty: MirType?) -> Value:
        """Convert float literal to value."""
        value_float(value)

    static fn convert_string(value: text) -> Value:
        """Convert string literal to value."""
        value_string(value)

    static fn convert_bool(value: bool) -> Value:
        """Convert boolean literal to value."""
        value_bool(value)

    static fn convert_nil() -> Value:
        """Convert nil literal to value."""
        Value.Nil

    static fn convert_array(elements: [Value]) -> Value:
        """Convert array literal to value."""
        # Stub for seed.cpp: value_array(elements) not available
        value_array_new()  # Returns empty array (stub)

    static fn convert_tuple(elements: [Value]) -> Value:
        """Convert tuple literal to value."""
        # Stub for seed.cpp: value_tuple(elements) not available
        value_array_new()  # Use array as fallback (stub)

    static fn convert_dict(pairs: [(Value, Value)]) -> Value:
        """
        Convert dict literal to value.
        Note: If duplicate keys exist, last value wins.
        """
        # Stub for seed.cpp: value_dict(dict) not available
        value_dict_new()  # Returns empty dict (stub)

# ============================================================================
# Export
# ============================================================================

export LiteralConverter
