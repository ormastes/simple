# Common Encoder Utilities
#
# Shared logic for module encoding across all architectures.
# Each architecture-specific encoder delegates to these functions.

use compiler.backend.native.mach_inst.{MachFunction, MachModule, EncodedFunction}

fn encode_module_with(module: MachModule, encode_fn: fn(MachFunction) -> EncodedFunction) -> [EncodedFunction]:
    var results: [EncodedFunction] = []
    for func in module.functions:
        val encoded = encode_fn(func)
        results = results + [encoded]
    results

export encode_module_with
