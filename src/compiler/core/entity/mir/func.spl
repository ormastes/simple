# MIR Entity - CoreMirFunction and supporting types
#
# Extracted from src/core/mir_types.spl
# Seed-compatible MIR function definitions.

# ===== CoreMirVar — SSA-like variable =====

struct CoreMirVar:
    name: text
    type_tag: i64

fn make_core_mir_var(name: text, type_tag: i64) -> CoreMirVar:
    CoreMirVar(name: name, type_tag: type_tag)

# ===== CoreMirFunction — function with basic blocks =====

struct CoreMirFunction:
    name: text
    param_names: [text]
    param_types: [i64]
    ret_type: i64
    bbs: [i64]
    vars: [i64]
    is_extern: i64

fn make_core_mir_function(name: text, param_names: [text], param_types: [i64], ret_type: i64, is_ext: i64) -> CoreMirFunction:
    CoreMirFunction(name: name, param_names: param_names, param_types: param_types, ret_type: ret_type, bbs: [], vars: [], is_extern: is_ext)

# ===== CoreMirStructDef — struct definition in MIR =====

struct CoreMirStructDef:
    name: text
    field_names: [text]
    field_types: [i64]

fn make_core_mir_struct_def(name: text, fields: [text], types: [i64]) -> CoreMirStructDef:
    CoreMirStructDef(name: name, field_names: fields, field_types: types)

export CoreMirVar, make_core_mir_var
export CoreMirFunction, make_core_mir_function
export CoreMirStructDef, make_core_mir_struct_def
