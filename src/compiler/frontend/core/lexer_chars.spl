# Core Simple â€” Lexer Character Classification
#
# Shared character testing functions used by both lexer.spl and lexer_struct.spl.
# Pure functions with no state, compatible with seed compiler.
#
# Design:
# - Pure character classification helpers
# - No generics, no closures, no lambdas
# - Uses text.contains() for character checking

val DIGITS: text = "0123456789"
val HEX_DIGITS: text = "0123456789abcdefABCDEF"
val ALPHA_LOWER: text = "abcdefghijklmnopqrstuvwxyz"
val ALPHA_UPPER: text = "ABCDEFGHIJKLMNOPQRSTUVWXYZ"

fn is_digit(c: text) -> bool:
    """Check if character is digit 0-9.

    Example:
        is_digit("5")  # true
        is_digit("a")  # false
    """
    DIGITS__contains(c)

fn is_hex_digit(c: text) -> bool:
    """Check if character is hex digit 0-9, a-f, A-F.

    Example:
        is_hex_digit("f")  # true
        is_hex_digit("F")  # true
        is_hex_digit("g")  # false
    """
    HEX_DIGITS__contains(c)

fn is_alpha(c: text) -> bool:
    """Check if character is alphabetic a-z, A-Z.

    Example:
        is_alpha("a")  # true
        is_alpha("Z")  # true
        is_alpha("5")  # false
    """
    val in_lower: bool = ALPHA_LOWER__contains(c)
    val in_upper: bool = ALPHA_UPPER__contains(c)
    in_lower or in_upper

fn is_ident_char(c: text) -> bool:
    """Check if character can be in identifier (alpha, digit, or underscore).

    Example:
        is_ident_char("a")  # true
        is_ident_char("_")  # true
        is_ident_char("5")  # true
        is_ident_char("-")  # false
    """
    val alpha: bool = is_alpha(c)
    val digit: bool = is_digit(c)
    val under: bool = c == "_"
    val result: bool = alpha or digit
    result or under

fn is_space(c: text) -> bool:
    """Check if character is whitespace (space or tab, NOT newline).

    Example:
        is_space(" ")   # true
        is_space("\t")  # true
        is_space("\n")  # false
    """
    val is_sp: bool = c == " "
    val is_tab: bool = c == "\t"
    is_sp or is_tab

export is_digit, is_hex_digit, is_alpha, is_ident_char, is_space
export DIGITS, HEX_DIGITS, ALPHA_LOWER, ALPHA_UPPER
