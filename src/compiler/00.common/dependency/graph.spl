# Import Graph - Dependency tracking and graph algorithms
#
# This module provides import graph construction for tracking module dependencies.
# Graph algorithms (cycle detection, topological sort) will be added in later tasks.
#
# Corresponds to Rust: src/rust/dependency_tracker/src/graph.rs

# The kind of import
enum ImportKind:
    UseImport        # Regular `use` import
    CommonUse        # `common use` directory prelude
    ExportUse        # `export use` re-export
    TypeUse          # Type-only import (`use type`) - doesn't create runtime dependency


# ============================================================================
# ImportKind Methods (was: impl ImportKind:)
# ============================================================================

# An edge in the import graph
struct ImportEdge:
    from: text        # The importing module
    to: text          # The imported module
    kind: ImportKind  # The kind of import


# ============================================================================
# ImportEdge Methods (was: impl ImportEdge:)
# ============================================================================

fn importedge_new(from: text, to: text, kind: ImportKind) -> ImportEdge:
        ImportEdge(from: from, to: to, kind: kind)


# Circular dependency error
struct CyclicDependencyError:
    cycle: [text]  # The cycle path (module names)


# ============================================================================
# CyclicDependencyError Methods (was: impl CyclicDependencyError:)
# ============================================================================

fn cyclicdependencyerror_new(cycle: [text]) -> CyclicDependencyError:
        CyclicDependencyError(cycle: cycle)


# An import graph tracking module dependencies
#
# Uses an adjacency list representation:
# - edges: HashMap<text, HashSet<text>> - module -> set of imported modules
# - detailed_edges: [ImportEdge] - all edges with import kind information
struct ImportGraph:
    edges: Dict<text, [text]>     # Adjacency list for cycle detection
    detailed_edges: [ImportEdge]  # All edges with kind info


# ============================================================================
# ImportGraph Methods (was: impl ImportGraph:)
# ============================================================================

fn importgraph_new() -> ImportGraph:
        ImportGraph(edges: {}, detailed_edges: [])


# Public exports
export ImportKind
export ImportEdge
export CyclicDependencyError
export ImportGraph
