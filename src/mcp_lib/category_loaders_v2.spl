# MCP Category Loaders (v2)
#
# Simplified: Just mark categories as loaded
# Actual dispatching happens in bootstrap with direct imports

use mcp_lib.lazy_registry_v2.{mark_category_loaded}

# These variables will be set to true when category is loaded
var FILEIO_LOADED = false
var EDIT_LOADED = false
var VCS_LOADED = false
var DEBUG_LOADED = false
var DEBUG_LOG_LOADED = false

# Load fileio category
fn load_fileio_category():
    FILEIO_LOADED = true
    mark_category_loaded("fileio")

# Load edit category
fn load_edit_category():
    EDIT_LOADED = true
    mark_category_loaded("edit")

# Load vcs category
fn load_vcs_category():
    VCS_LOADED = true
    mark_category_loaded("vcs")

# Load debug category
fn load_debug_category():
    DEBUG_LOADED = true
    mark_category_loaded("debug")

# Load debug_log category
fn load_debug_log_category():
    DEBUG_LOG_LOADED = true
    mark_category_loaded("debug_log")

# Load category by name
fn load_category(category: text):
    if category == "fileio":
        load_fileio_category()
    elif category == "edit":
        load_edit_category()
    elif category == "vcs":
        load_vcs_category()
    elif category == "debug":
        load_debug_category()
    elif category == "debug_log":
        load_debug_log_category()

# Check if category is loaded (module-local check)
fn is_fileio_loaded() -> bool: FILEIO_LOADED
fn is_edit_loaded() -> bool: EDIT_LOADED
fn is_vcs_loaded() -> bool: VCS_LOADED
fn is_debug_loaded() -> bool: DEBUG_LOADED
fn is_debug_log_loaded() -> bool: DEBUG_LOG_LOADED

# Export
export load_category
export load_fileio_category, load_edit_category, load_vcs_category
export load_debug_category, load_debug_log_category
export is_fileio_loaded, is_edit_loaded, is_vcs_loaded
export is_debug_loaded, is_debug_log_loaded
