# Test Phase 5: Self Return Type

class Counter:
    fn new(value: i32) -> Counter:
        return Counter(value: value)

    # Method with self return type (should parse successfully)
    fn increment() -> self:
        return Counter(value: self.value + 1)

    fn double() -> self:
        return Counter(value: self.value * 2)

    fn get_value() -> i32:
        return self.value

print("=== Test 1: Basic self return type ===")
let counter = Counter.new(5)
print("Initial counter value:", counter.get_value())

let counter2 = counter.increment()
print("After increment:", counter2.get_value())

let counter3 = counter2.double()
print("After double:", counter3.get_value())

print("\n=== Test 2: Chaining with functional updates ===")
let count = Counter.new(10)
print("Initial:", count.get_value())
count->increment()->double()
print("After count->increment()->double():", count.get_value())

print("\n=== All self return type tests passed! ===")
