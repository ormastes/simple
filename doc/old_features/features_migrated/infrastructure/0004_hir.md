# Feature #4: HIR

## Overview

| Property | Value |
|----------|-------|
| **Feature ID** | #4 |
| **Feature Name** | HIR |
| **Category** | Infrastructure |
| **Difficulty** | 3 (Medium) |
| **Status** | Complete |
| **Implementation** | Rust |

## Description

High-level IR for type checking and semantic analysis. Performs type inference, mutability checking, and capability verification after AST parsing.

## Specification

[doc/architecture/README.md](../../architecture/README.md)

## Implementation

### Files

| File | Purpose |
|------|---------|
| `src/compiler/src/hir/mod.rs` | HIR module |
| `src/compiler/src/hir/types.rs` | Type system |
| `src/compiler/src/hir/lower.rs` | AST to HIR lowering |

## HIR Phases

| Phase | Purpose |
|-------|---------|
| Type Inference | Determine types from usage |
| Mutability Check | Verify mut/immut semantics |
| Type Narrowing | Refine types in branches |
| Method Resolution | Find impl methods |

## Testing

### Test Files

| Test File | Description |
|-----------|-------------|
| `simple/std_lib/test/features/infrastructure/hir_spec.spl` | BDD spec (15 tests) |

## Dependencies

- Depends on: #3
- Required by: #5

## Notes

HIR preserves source structure while adding type information. Validates semantic correctness before MIR lowering.
