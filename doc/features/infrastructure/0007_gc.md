# Feature #7: GC

## Overview

| Property | Value |
|----------|-------|
| **Feature ID** | #7 |
| **Feature Name** | GC |
| **Category** | Infrastructure |
| **Difficulty** | 5 (Very Hard) |
| **Status** | Complete |
| **Implementation** | Rust |

## Description

Automatic memory management with tracing garbage collection. Handles allocation, collection cycles, and safe deallocation of heap objects.

## Specification

[doc/architecture/README.md](../../architecture/README.md)

## Implementation

### Files

| File | Purpose |
|------|---------|
| `src/runtime/src/memory/gc.rs` | GcRuntime + logging hooks |
| `src/runtime/src/memory/gcless.rs` | GC-less allocator wrapper |
| `src/runtime/src/memory/no_gc.rs` | NoGcAllocator |

## GC Behavior

| Aspect | Description |
|--------|-------------|
| Allocation | Heap objects allocated on demand |
| Collection | Triggered by allocation pressure |
| Roots | Stack, globals, captured variables |
| Safety | No dangling pointers, no use-after-free |

## Allocated Types

| Type | GC Managed |
|------|------------|
| Arrays | Yes |
| Strings | Yes |
| Dicts | Yes |
| Structs | Yes |
| Closures | Yes |

## Testing

### Test Files

| Test File | Description |
|-----------|-------------|
| `simple/std_lib/test/features/infrastructure/gc_spec.spl` | BDD spec (15 tests) |

## Dependencies

- Depends on: #6
- Required by: None

## Notes

Abfall-backed GC with optional logging. Supports GC-less mode for real-time contexts. Collection triggered by allocation pressure.
