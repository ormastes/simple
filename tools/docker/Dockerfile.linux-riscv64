# Linux RISC-V 64 cross-compilation environment with QEMU.
#
# Build:  docker build -t simple-riscv64 -f docker/Dockerfile.linux-riscv64 .
# Usage:  docker run --rm -v $(pwd):/workspace simple-riscv64

FROM ubuntu:24.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update -qq && apt-get install -y -qq --no-install-recommends \
    build-essential cmake \
    gcc-riscv64-linux-gnu g++-riscv64-linux-gnu \
    qemu-user qemu-user-binfmt \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

CMD ["bash", "-c", "cmake -B build/linux-riscv64 seed -DCMAKE_TOOLCHAIN_FILE=seed/cmake/toolchains/linux-riscv64.cmake && cmake --build build/linux-riscv64"]
