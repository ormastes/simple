# Linux ARM64 cross-compilation environment with QEMU.
#
# Build:  docker build -t simple-arm64 -f docker/Dockerfile.linux-arm64 .
# Usage:  docker run --rm -v $(pwd):/workspace simple-arm64

FROM ubuntu:24.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update -qq && apt-get install -y -qq --no-install-recommends \
    build-essential cmake \
    gcc-aarch64-linux-gnu g++-aarch64-linux-gnu \
    qemu-user qemu-user-binfmt \
    && rm -rf /var/lib/apt/lists/*

WORKDIR /workspace

CMD ["bash", "-c", "cmake -B build/linux-arm64 seed -DCMAKE_TOOLCHAIN_FILE=seed/cmake/toolchains/linux-arm64.cmake && cmake --build build/linux-arm64"]
