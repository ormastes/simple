# Tuples Feature Specification
# Feature #26: Tuple type
# Category: Data Structures | Difficulty: 2 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: i32
    name: text
    category: text
    difficulty: i32
    status: text
    impl_type: text
    spec_ref: text
    files: List<text>
    tests: List<text>
    description: text
    code_examples: List<text>
    dependencies: List<i32>
    required_by: List<i32>
    notes: text

# Feature Definition
val FEATURE = FeatureMetadata {
    id: 26,
    name: 'Tuples',
    category: 'Data Structures',
    difficulty: 2,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/data_structures.md',
    files: [
        'src/runtime/src/value/collections.rs',
        'src/compiler/src/interpreter.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_collections_tests.rs'
    ],
    description: 'Fixed-size heterogeneous collections. Supports tuple literals, indexing, destructuring, and use in function returns.',
    code_examples: [],
    dependencies: [1, 2, 10],
    required_by: [12, 90],
    notes: 'Tuples are immutable. Use for returning multiplevalues from functions.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  TUPLES FEATURE SPECIFICATION (#26)')
print('  Category: Data Structures | Difficulty: 2 | Status: Complete')
print('============================================================')
print('')

var passed = 0
var failed = 0

print('describe Tuple creation:')
print('  it creates pair tuple:')

val pair = (1, 2)
if pair[0] == 1 and pair[1] == 2:
    print('    [PASS] pair tuple')
    passed = passed + 1
else:
    print('    [FAIL] pair tuple')
    failed = failed + 1

print('  it creates triple tuple:')

val triple = (1, 2, 3)
if triple[0] == 1 and triple[1] == 2 and triple[2] == 3:
    print('    [PASS] triple tuple')
    passed = passed + 1
else:
    print('    [FAIL] triple tuple')
    failed = failed + 1

print('  it creates mixed-type tuple:')

val mixed = (42, 'hello', true)
if mixed[0] == 42 and mixed[1] == 'hello' and mixed[2] == true:
    print('    [PASS] mixed-type tuple')
    passed = passed + 1
else:
    print('    [FAIL] mixed-type')
    failed = failed + 1

print('')
print('describe Tuple indexing:')
print('  it accesses elements by index:')

val t = (10, 20, 30, 40)
if t[0] == 10 and t[3] == 40:
    print('    [PASS] tuple indexing')
    passed = passed + 1
else:
    print('    [FAIL] indexing')
    failed = failed + 1

print('  it works with computed index:')

val data = (100, 200, 300)
val idx = 1
if data[idx] == 200:
    print('    [PASS] computed index')
    passed = passed + 1
else:
    print('    [FAIL] computed index')
    failed = failed + 1

print('')
print('describe Tuple in functions:')
print('  it returns tuple from function:')

fn get_point():
    return (3, 4)

val point = get_point()
if point[0] == 3 and point[1] == 4:
    print('    [PASS] function returns tuple')
    passed = passed + 1
else:
    print('    [FAIL] function return')
    failed = failed + 1

print('  it passes tuple as argument:')

fn sum_pair(p):
    return p[0] + p[1]

val result = sum_pair((5, 7))
if result == 12:
    print('    [PASS] tuple as argument')
    passed = passed + 1
else:
    print('    [FAIL] tuple argument')
    failed = failed + 1

print('')
print('describe Nested tuples:')
print('  it creates nested tuples:')

val nested = ((1, 2), (3, 4))
if nested[0][0] == 1 and nested[1][1] == 4:
    print('    [PASS] nested tuples')
    passed = passed + 1
else:
    print('    [FAIL] nested')
    failed = failed + 1

print('  it mixes tuples and arrays:')

val combo = ([1, 2], [3, 4])
if combo[0][0] == 1 and combo[1][1] == 4:
    print('    [PASS] tuple of arrays')
    passed = passed + 1
else:
    print('    [FAIL] tuple of arrays')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# Tuples')
print('')
print('**Feature ID:** #26')
print('**Category:** Data Structures')
print('**Difficulty:** Level 2/5')
print('**Status:** Complete')
print('**Implementation:** Rust')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
