# Test file to reproduce parser bugs

# Bug parser_003: ?? return pattern
fn test_null_coalesce_return(s: text) -> Result<i64, text>:
    val value = s.parse_int() ?? return Err("parse failed")
    Ok(value)

# Bug parser_004: ? in for loop
fn test_try_in_loop(items: [text]) -> Result<i64, text>:
    var total = 0
    for item in items:
        val n = item.parse_int()?
        total = total + n
    Ok(total)

fn main():
    print "Testing bugs..."

    # Test parser_003
    val result1 = test_null_coalesce_return("42")
    print "Test 1: {result1}"

    # Test parser_004
    val result2 = test_try_in_loop(["1", "2", "3"])
    print "Test 2: {result2}"
