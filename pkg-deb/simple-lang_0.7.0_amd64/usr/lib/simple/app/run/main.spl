# Simple CLI - run command
# Delegates to Rust runtime via FFI

use std.cli.cli_util (get_cli_args)

use app.io.mod (cli_handle_run)

fn print_help():
    print "Usage: simple run [options] <file>"
    print "Explicitly runs a Simple file"
    print ""
    print "Options:"
    print "  --gc-log    Enable GC logging"
    print "  --gc-off    Disable garbage collection"
    print ""
    print "Run 'simple run --help' for Rust-level help."

fn main() -> i64:
    val all_args = get_cli_args()
    var args: [str] = []
    var gc_log = false
    var gc_off = false

    for arg in all_args:
        if arg == "--gc-log":
            gc_log = true
        else if arg == "--gc-off":
            gc_off = true
        else:
            args = args.push(arg)

    if args.len() > 0 and (args[0] == "--help" or args[0] == "-h"):
        print_help()
        return 0
    cli_handle_run(args, gc_log, gc_off)
