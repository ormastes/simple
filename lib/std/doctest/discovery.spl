/// Doctest Discovery
/// 
/// Discovers doctests from .spl, .md, and .sdt files

use parser::{DoctestExample, parse_spl_file, parse_sdt_file}

/// Discovery configuration
struct DiscoveryConfig:
    /// Paths to search for doctests
    search_paths: List[String]
    /// File patterns to include
    include_patterns: List[String]
    /// File patterns to exclude
    exclude_patterns: List[String]
    
    fn default() -> DiscoveryConfig:
        return DiscoveryConfig(
            search_paths: ["lib/", "src/", "doc/"],
            include_patterns: ["**/*.spl", "**/*.md", "**/test/doctest/**/*.sdt"],
            exclude_patterns: ["**/target/**", "**/build/**"]
        )

/// Discover all doctests in configured paths
fn discover_all(config: DiscoveryConfig = DiscoveryConfig.default()) -> List[DoctestExample]:
    examples = []
    
    # TODO: Walk file tree and find matching files
    # TODO: Parse each file based on extension
    # TODO: Aggregate examples
    
    return examples

/// Discover doctests from a single file
fn discover_file(path: String) -> List[DoctestExample]:
    if path.ends_with(".spl"):
        return parse_spl_file(path)
    elif path.ends_with(".sdt"):
        return parse_sdt_file(path)
    elif path.ends_with(".md"):
        return parse_markdown_file(path)
    else:
        return []

/// Parse doctests from Markdown file
fn parse_markdown_file(path: String) -> List[DoctestExample]:
    # TODO: Extract ```simple-doctest code blocks
    return []
