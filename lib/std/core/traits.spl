# Core Traits - Fundamental type behaviors
# These traits define common operations for types

# Default trait - types with a default value
trait Default:
    fn default() -> Self

# Clone trait - deep copy
trait Clone:
    fn clone(self) -> Self

# Copy trait - bitwise copy (marker trait)
trait Copy: Clone

# Eq trait - equality comparison
trait Eq:
    fn eq(self, other: &Self) -> bool

    fn ne(self, other: &Self) -> bool:
        return not self.eq(other)

# Ord trait - total ordering
trait Ord: Eq:
    fn cmp(self, other: &Self) -> Ordering

    fn lt(self, other: &Self) -> bool:
        return self.cmp(other) == Ordering::Less

    fn le(self, other: &Self) -> bool:
        return self.cmp(other) != Ordering::Greater

    fn gt(self, other: &Self) -> bool:
        return self.cmp(other) == Ordering::Greater

    fn ge(self, other: &Self) -> bool:
        return self.cmp(other) != Ordering::Less

    fn max(self, other: Self) -> Self:
        if self.ge(&other):
            return self
        return other

    fn min(self, other: Self) -> Self:
        if self.le(&other):
            return self
        return other

    fn clamp(self, min: Self, max: Self) -> Self:
        if self.lt(&min):
            return min
        if self.gt(&max):
            return max
        return self

# Ordering enum for comparisons
enum Ordering:
    Less
    Equal
    Greater

impl Ordering:
    fn is_less(self) -> bool:
        return self == Ordering::Less

    fn is_equal(self) -> bool:
        return self == Ordering::Equal

    fn is_greater(self) -> bool:
        return self == Ordering::Greater

    fn reverse(self) -> Ordering:
        match self:
            case Ordering::Less: return Ordering::Greater
            case Ordering::Equal: return Ordering::Equal
            case Ordering::Greater: return Ordering::Less

# Hash trait - for hashable types
trait Hash:
    fn hash(self) -> u64

# Display trait - human-readable string representation
trait Display:
    fn fmt(self) -> str

# Debug trait - debug string representation
trait Debug:
    fn debug_fmt(self) -> str

# From/Into traits - type conversions
trait From[T]:
    fn from(value: T) -> Self

trait Into[T]:
    fn into(self) -> T

# Default implementations
impl Into[T] for Self where Self: From[T]:
    fn into(self) -> T:
        return T::from(self)

# TryFrom/TryInto - fallible conversions
trait TryFrom[T]:
    type Error
    fn try_from(value: T) -> Result[Self, Self::Error]

trait TryInto[T]:
    type Error
    fn try_into(self) -> Result[T, Self::Error]

# Iterator trait
trait Iterator:
    type Item
    fn next(self) -> Option[Self::Item]

    fn count(self) -> u64:
        let mut n: u64 = 0
        while self.next().is_some():
            n = n + 1
        return n

    fn last(self) -> Option[Self::Item]:
        let mut last = None
        loop:
            match self.next():
                case Some(v): last = Some(v)
                case None: break
        return last

    fn nth(self, n: u64) -> Option[Self::Item]:
        for _ in 0..n:
            self.next()
        return self.next()

    fn collect[C: FromIterator[Self::Item]](self) -> C:
        return C::from_iter(self)

# FromIterator trait - create collections from iterators
trait FromIterator[T]:
    fn from_iter[I: Iterator[Item=T]](iter: I) -> Self

# IntoIterator trait - convert to iterator
trait IntoIterator:
    type Item
    type IntoIter: Iterator[Item=Self::Item]
    fn into_iter(self) -> Self::IntoIter

# Add trait - addition operator
trait Add[Rhs = Self]:
    type Output
    fn add(self, rhs: Rhs) -> Self::Output

# Sub trait - subtraction operator
trait Sub[Rhs = Self]:
    type Output
    fn sub(self, rhs: Rhs) -> Self::Output

# Mul trait - multiplication operator
trait Mul[Rhs = Self]:
    type Output
    fn mul(self, rhs: Rhs) -> Self::Output

# Div trait - division operator
trait Div[Rhs = Self]:
    type Output
    fn div(self, rhs: Rhs) -> Self::Output

# Neg trait - negation operator
trait Neg:
    type Output
    fn neg(self) -> Self::Output

# Not trait - logical not operator
trait Not:
    type Output
    fn not(self) -> Self::Output

# Index trait - indexing operator
trait Index[Idx]:
    type Output
    fn index(self, idx: Idx) -> &Self::Output

# IndexMut trait - mutable indexing
trait IndexMut[Idx]: Index[Idx]:
    fn index_mut(self, idx: Idx) -> &mut Self::Output

# Deref trait - dereference
trait Deref:
    type Target
    fn deref(self) -> &Self::Target

# DerefMut trait - mutable dereference
trait DerefMut: Deref:
    fn deref_mut(self) -> &mut Self::Target

# Drop trait - destructor
trait Drop:
    fn drop(self)

# Sized trait - types with known size at compile time (marker)
trait Sized
