# Pure data transformations
# Side-effect free operations

use std.core.option.*
use std.core.result.*

# Maybe/Option utilities
fn map_option[T, U](opt: Option[T], f: fn(T) -> U) -> Option[U]:
    match opt:
        Some(x) => Some(f(x))
        None => None

fn flat_map_option[T, U](opt: Option[T], f: fn(T) -> Option[U]) -> Option[U]:
    match opt:
        Some(x) => f(x)
        None => None

fn unwrap_or[T](opt: Option[T], default: T) -> T:
    match opt:
        Some(x) => x
        None => default

# Result utilities
fn map_result[T, U, E](res: Result[T, E], f: fn(T) -> U) -> Result[U, E]:
    match res:
        Ok(x) => Ok(f(x))
        Err(e) => Err(e)

fn map_err[T, E, F](res: Result[T, E], f: fn(E) -> F) -> Result[T, F]:
    match res:
        Ok(x) => Ok(x)
        Err(e) => Err(f(e))
