# Common I/O Error Types
# Shared across all host variants (async_nogc_mut, async_gc_immut, etc.)

use core.traits.*

# I/O Error type - common across all I/O operations
pub enum IoError:
    NotFound
    PermissionDenied
    AlreadyExists
    InvalidPath
    IsDirectory
    NotDirectory
    DirectoryNotEmpty
    ReadOnly
    FileTooLarge
    OutOfSpace
    Interrupted
    TimedOut
    ConnectionRefused
    ConnectionReset
    BrokenPipe
    WouldBlock
    InvalidData
    UnexpectedEof
    WriteZero
    Other(str)

impl IoError:
    pub fn message(self) -> str:
        match self:
            case NotFound: "file or directory not found"
            case PermissionDenied: "permission denied"
            case AlreadyExists: "file or directory already exists"
            case InvalidPath: "invalid path"
            case IsDirectory: "is a directory"
            case NotDirectory: "not a directory"
            case DirectoryNotEmpty: "directory not empty"
            case ReadOnly: "read-only file system"
            case FileTooLarge: "file too large"
            case OutOfSpace: "out of disk space"
            case Interrupted: "operation interrupted"
            case TimedOut: "operation timed out"
            case ConnectionRefused: "connection refused"
            case ConnectionReset: "connection reset"
            case BrokenPipe: "broken pipe"
            case WouldBlock: "operation would block"
            case InvalidData: "invalid data"
            case UnexpectedEof: "unexpected end of file"
            case WriteZero: "write returned zero bytes"
            case Other(msg): msg

impl Display for IoError:
    fn fmt(self) -> str:
        self.message()

impl Error for IoError
