#!/usr/bin/env simple
# Manual test for file I/O operations

use infra.*

fn main():
    print "=== Testing File I/O Operations ==="

    # Test 1: File existence
    print "\n1. Testing file_exists..."
    val exists = file_exists("/tmp")
    print "  /tmp exists: {exists}"

    # Test 2: Write file
    print "\n2. Testing write_file..."
    val test_path = "/tmp/simple_fileio_test.txt"
    val write_result = write_file(test_path, "Hello from Simple!")

    match write_result:
        Ok(_):
            print "  ✓ File written successfully"
        Err(msg):
            print "  ✗ Error writing file: {msg}"
            return

    # Test 3: Read file
    print "\n3. Testing read_file..."
    val read_result = read_file(test_path)

    match read_result:
        Ok(content):
            print "  ✓ File read successfully"
            print "  Content: {content}"
        Err(msg):
            print "  ✗ Error reading file: {msg}"

    # Test 4: Path operations
    print "\n4. Testing path operations..."
    val path = "/home/user/documents/file.txt"
    print "  basename('{path}'): {basename(path)}"
    print "  dirname('{path}'): {dirname(path)}"
    print "  extension('{path}'): {extension(path)}"

    # Test 5: List directory
    print "\n5. Testing list_dir..."
    val list_result = list_dir("/tmp")

    match list_result:
        Ok(entries):
            print "  ✓ Listed {entries.len()} entries in /tmp"
            print "  First 3 entries: {entries[0]}, {entries[1]}, {entries[2]}"
        Err(msg):
            print "  ✗ Error listing directory: {msg}"

    # Test 6: Remove file
    print "\n6. Testing remove_file..."
    val remove_result = remove_file(test_path)

    match remove_result:
        Ok(_):
            print "  ✓ Test file removed successfully"
        Err(msg):
            print "  ✗ Error removing file: {msg}"

    print "\n=== All tests completed ==="
