[package]
name = "simple-db"
version = "0.1.0"
edition = "2021"
description = "Database abstraction layer for Simple language"

[lints]
workspace = true

[features]
default = ["libsql"]
libsql = ["dep:libsql", "dep:tokio"]
postgres = ["dep:tokio-postgres", "dep:tokio"]
all-drivers = ["libsql", "postgres"]

[dependencies]
# Core
simple-common = { path = "../common" }
tracing = "0.1"
thiserror = "1.0"
lazy_static = "1.5"

# Connection pooling (#831)
parking_lot.workspace = true

# Async runtime (needed for libsql and postgres)
tokio = { version = "1", features = ["rt-multi-thread", "sync", "rt"], optional = true }

# libSQL driver (SQLite-compatible, local + Turso remote)
libsql = { version = "0.6", optional = true }

# PostgreSQL driver
tokio-postgres = { version = "0.7", optional = true }

[dev-dependencies]
tempfile = "3"
