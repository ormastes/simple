# 70_actors.spl - Actor model primitives

fn worker():
    loop:
        let msg = recv()
        match msg:
            case "ping":
                reply("pong")
            case "stop":
                reply("bye")
                return
            case _:
                reply("unknown")

let a = spawn worker()

send(a, "ping")
print "got={recv(a)}"

send(a, "stop")
print "got={recv(a)}"

join(a)
print "joined"

main = 0
