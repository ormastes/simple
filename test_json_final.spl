# JSON test - use standalone functions

use std.json.*

# Test parsing with standalone function
print "Testing JSON parser..."
val result = parse_json("{\"name\": \"Alice\", \"age\": 30}")
match result:
    case Result.Ok(json):
        print "✓ Parsed successfully"
        val serialized = to_json_string(json)
        print "Serialized: {serialized}"
        val pretty = to_json_pretty(json)
        print "Pretty:\n{pretty}"
    case Result.Err(e):
        print "✗ Parse failed"

# Test parse_int
print "\nTesting parse_int..."
val num = parse_int("42")
match num:
    case Option.Some(n):
        print "✓ Parsed 42 as: {n}"
    case Option.None:
        print "✗ Failed to parse"

val bad = parse_int("not a number")
match bad:
    case Option.Some(_):
        print "✗ Should not parse!"
    case Option.None:
        print "✓ Correctly failed to parse 'not a number'"

print "\n=== All tests complete! ==="
