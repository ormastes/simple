#!/usr/bin/env simple
# Debug what's actually exported from lazy_seq

fn main():
    # First, verify the module exports are correct by checking the file
    extern fn rt_file_read_text(path: text) -> text

    val content = rt_file_read_text("src/app/interpreter.lazy/lazy_seq.spl")
    val source = content ?? ""

    # Find export lines
    val lines = source.split("\n")
    print "=== Exports in lazy_seq.spl ==="
    var found_exports = false
    for line in lines:
        if line.starts_with("export "):
            print line
            found_exports = true

    if not found_exports:
        print "NO EXPORTS FOUND!"

    print ""
    print "=== Checking function definitions ==="
    # Check if LazySeq__empty is defined
    var found_def = false
    for line in lines:
        if line.starts_with("fn LazySeq__empty"):
            print "Found: {line}"
            found_def = true
            break

    if not found_def:
        print "LazySeq__empty definition NOT FOUND!"
