# Phase 6: Korean Medical Exam Reasoning (Note.md Phase 5)
# Exam reasoning with weighted loss components

extends: "base.sdn"

training:
  epochs: 5
  learning_rate: 0.0002
  max_length: 1024

reasoning_loss:
  ce_weight: 0.6
  format_weight: 0.2
  confidence_weight: 0.2

subphases:
  a_epochs: 2
  b_epochs: 2
  c_epochs: 3

data:
  korean_text:
    path: "example/medgemma_korean/data/korean_text"
    format: "jsonl"
  translation:
    path: "example/medgemma_korean/data/korean_english_parallel"
    format: "jsonl"
  exam:
    path: "example/medgemma_korean/data/korean_medical_exam"
    format: "jsonl"
    train_split: "train"
    validation_split: "validation"

previous_loras:
  - "example/medgemma_korean/models/phase5/lora_4"

output:
  lora_path: "example/medgemma_korean/models/phase6/lora_5"
  merged_path: "example/medgemma_korean/models/phase6/merged"
  final_path: "example/medgemma_korean/models/final"

validation:
  test_korean_text: true
  test_translation: true
  test_exam_reasoning: true
  test_english_retention: true
  retention_threshold: 0.97
  exam_target_accuracy: 0.90

tags:
  - "phase6"
  - "reasoning"
  - "exam"
  - "final_phase"
