print("Test 1: Import modules")
import scanner
print("scanner imported")
import parser
print("parser imported")
import analyzer
print("analyzer imported")

print("\nTest 2: Scan directory")
let scan_result = scanner.scan_directory("simple/app/depgraph", false)
match scan_result:
    case Err(e):
        print("Scan error: {e}")
    case Ok(scan):
        print("Scan success!")
        print("Directory: {scan.directory}")
        print("SPL files: {scan.spl_files.len()}")
        
        print("\nTest 3: Parse a file")
        let parse_result = parser.parse_file("simple/app/depgraph/scanner.spl")
        match parse_result:
            case Err(e):
                print("Parse error: {e}")
            case Ok(parsed):
                print("Parse success!")
                print("File: {parsed.file_path}")
                print("Imports: {parsed.imports.len()}")
                print("Mod decls: {parsed.mod_decls.len()}")
                
                print("\nTest 4: Analyze directory")
                let analyze_result = analyzer.analyze_directory(scan, "depgraph", "depgraph")
                match analyze_result:
                    case Err(e):
                        print("Analyze error: {e}")
                    case Ok(analysis):
                        print("Analysis success!")
                        print("Directory: {analysis.directory}")
                        print("Child modules: {analysis.child_modules.len()}")

print("Done")
