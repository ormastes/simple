# Basic Async File Loading Example
#
# Demonstrates the simplest async file loading pattern using the unified io.fs API.

use io.fs as fs
use std.io

async fn main():
    # Pattern 1: Async memory-mapped file (most common)
    # Zero-copy file access with automatic cleanup
    async with await fs.open_mmap("data.txt"_filepath) as mmap:
        let content = mmap.as_str()?
        io.println("File contents: {content}")
        io.println("File size: {mmap.len()} bytes")
    # File is automatically unmapped here

    # Pattern 2: Sync loading (blocks until ready)
    with fs.open_mmap_sync("config.json"_filepath) as mmap:
        let config_text = mmap.as_str()?
        io.println("Config: {config_text}")
    # File is automatically unmapped here

    # Pattern 3: Simple read entire file (convenience function)
    let content = await fs.read_text("readme.md"_filepath)?
    io.println("Readme: {content}")
