# Enhanced String Methods Feature Specification
# Feature #203: Comprehensive string manipulation methods
# Category: Stdlib | Difficulty: 2 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List[String]
    tests: List[String]
    description: String
    code_examples: List[String]
    dependencies: List[Int]
    required_by: List[Int]
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 203,
    name: "Enhanced String Methods",
    category: "Stdlib",
    difficulty: 2,
    status: "Complete",
    impl_type: "Rust",
    spec_ref: "simple/improve_request.md",
    files: [
        "src/compiler/src/interpreter_method/string.rs"
    ],
    tests: [
        "src/driver/tests/interpreter_strings_tests.rs"
    ],
    description: "Comprehensive string methods including substring, find, replace, trim, case conversion, split, and more. Over 30 string methods for complete text manipulation.",
    code_examples: [
        "# Substring and slicing",
        "text.substring(0, 5)",
        "text.char_at(0)",
        "",
        "# Search operations",
        "text.find(\"pattern\")",
        "text.contains(\"sub\")",
        "text.starts_with(\"pre\")",
        "",
        "# Whitespace and case",
        "text.trim()",
        "text.to_upper()",
        "text.to_lower()",
        "",
        "# Splitting and joining",
        "text.split(\",\")",
        "text.lines()"
    ],
    dependencies: [25],
    required_by: [200],
    notes: "All methods implemented in Rust interpreter. Supports both aliased method names (trim/strip, find/index_of)."
}

# =====================================================
# BDD Specification Tests
# =====================================================

print("============================================================")
print("  ENHANCED STRING METHODS SPECIFICATION (#203)")
print("  Category: Stdlib | Difficulty: 2 | Status: Complete")
print("============================================================")
print("")

let mut passed = 0
let mut failed = 0

# describe "Substring operations"
print("describe Substring operations:")

# it "extracts substring by indices"
print("  it extracts substring by indices:")
let text = "Hello World"
let sub = text.substring(0, 5)
if sub == "Hello":
    print("    [PASS] substring(0, 5) = 'Hello'")
    passed = passed + 1
else:
    print("    [FAIL] substring extraction")
    failed = failed + 1

# it "gets character at index"
print("  it gets character at index:")
let ch = text.char_at(0)
if ch == "H":
    print("    [PASS] char_at(0) = 'H'")
    passed = passed + 1
else:
    print("    [FAIL] char_at")
    failed = failed + 1

# it "gets list of characters"
print("  it gets list of characters:")
let short = "abc"
let chars = short.chars()
if chars.len() == 3:
    print("    [PASS] chars() returns character list")
    passed = passed + 1
else:
    print("    [FAIL] chars")
    failed = failed + 1

# describe "Search operations"
print("")
print("describe Search operations:")

# it "finds substring position"
print("  it finds substring position:")
let haystack = "Hello World"
let pos = haystack.find("World")
if pos != None:
    print("    [PASS] find('World') returns position")
    passed = passed + 1
else:
    print("    [FAIL] find")
    failed = failed + 1

# it "checks if contains substring"
print("  it checks if contains substring:")
let contains_result = haystack.contains("llo")
if contains_result == true:
    print("    [PASS] contains('llo') = true")
    passed = passed + 1
else:
    print("    [FAIL] contains")
    failed = failed + 1

# it "checks prefix"
print("  it checks prefix:")
let starts = haystack.starts_with("Hello")
if starts == true:
    print("    [PASS] starts_with('Hello') = true")
    passed = passed + 1
else:
    print("    [FAIL] starts_with")
    failed = failed + 1

# it "checks suffix"
print("  it checks suffix:")
let ends = haystack.ends_with("World")
if ends == true:
    print("    [PASS] ends_with('World') = true")
    passed = passed + 1
else:
    print("    [FAIL] ends_with")
    failed = failed + 1

# describe "Whitespace operations"
print("")
print("describe Whitespace operations:")

# it "trims leading and trailing whitespace"
print("  it trims leading and trailing whitespace:")
let padded = "  hello  "
let trimmed = padded.trim()
if trimmed == "hello":
    print("    [PASS] trim() removes whitespace")
    passed = passed + 1
else:
    print("    [FAIL] trim")
    failed = failed + 1

# it "trims start only"
print("  it trims start only:")
let trim_start = padded.trim_start()
if trim_start == "hello  ":
    print("    [PASS] trim_start() removes leading")
    passed = passed + 1
else:
    print("    [FAIL] trim_start")
    failed = failed + 1

# it "trims end only"
print("  it trims end only:")
let trim_end = padded.trim_end()
if trim_end == "  hello":
    print("    [PASS] trim_end() removes trailing")
    passed = passed + 1
else:
    print("    [FAIL] trim_end")
    failed = failed + 1

# describe "Case operations"
print("")
print("describe Case operations:")

# it "converts to uppercase"
print("  it converts to uppercase:")
let lower = "hello"
let upper = lower.to_upper()
if upper == "HELLO":
    print("    [PASS] to_upper() = 'HELLO'")
    passed = passed + 1
else:
    print("    [FAIL] to_upper")
    failed = failed + 1

# it "converts to lowercase"
print("  it converts to lowercase:")
let mixed = "HeLLo"
let lowered = mixed.to_lower()
if lowered == "hello":
    print("    [PASS] to_lower() = 'hello'")
    passed = passed + 1
else:
    print("    [FAIL] to_lower")
    failed = failed + 1

# describe "Split and join"
print("")
print("describe Split and join:")

# it "splits by delimiter"
print("  it splits by delimiter:")
let csv = "a,b,c"
let parts = csv.split(",")
if parts.len() == 3:
    print("    [PASS] split(',') returns 3 parts")
    passed = passed + 1
else:
    print("    [FAIL] split")
    failed = failed + 1

# it "splits by newlines"
print("  it splits by newlines:")
let multiline = "line1\nline2\nline3"
let lines = multiline.lines()
if lines.len() == 3:
    print("    [PASS] lines() returns 3 lines")
    passed = passed + 1
else:
    print("    [FAIL] lines")
    failed = failed + 1

# describe "Replacement"
print("")
print("describe Replacement:")

# it "replaces first occurrence"
print("  it replaces first occurrence:")
let original = "hello hello"
let replaced = original.replace("hello", "hi")
if replaced.starts_with("hi"):
    print("    [PASS] replace replaces occurrence")
    passed = passed + 1
else:
    print("    [FAIL] replace")
    failed = failed + 1

# describe "Additional methods"
print("")
print("describe Additional methods:")

# it "repeats string n times"
print("  it repeats string n times:")
let dash = "-"
let repeated = dash.repeat(5)
if repeated == "-----":
    print("    [PASS] repeat(5) = '-----'")
    passed = passed + 1
else:
    print("    [FAIL] repeat")
    failed = failed + 1

# it "reverses string"
print("  it reverses string:")
let forward = "abc"
let backward = forward.reverse()
if backward == "cba":
    print("    [PASS] reverse() = 'cba'")
    passed = passed + 1
else:
    print("    [FAIL] reverse")
    failed = failed + 1

# it "checks if empty"
print("  it checks if empty:")
let empty = ""
if empty.is_empty() == true:
    print("    [PASS] is_empty() for empty string")
    passed = passed + 1
else:
    print("    [FAIL] is_empty")
    failed = failed + 1

# it "gets string length"
print("  it gets string length:")
let length_test = "hello"
if length_test.len() == 5:
    print("    [PASS] len() = 5")
    passed = passed + 1
else:
    print("    [FAIL] len")
    failed = failed + 1

# it "counts occurrences"
print("  it counts occurrences:")
let count_test = "ababa"
let count = count_test.count("a")
if count == 3:
    print("    [PASS] count('a') = 3")
    passed = passed + 1
else:
    print("    [FAIL] count")
    failed = failed + 1

# =====================================================
# Generated Documentation
# =====================================================

print("")
print("============================================================")
print("  GENERATED DOCUMENTATION")
print("============================================================")
print("")
print("# Enhanced String Methods")
print("")
print("**Feature ID:** #{FEATURE.id}")
print("**Category:** {FEATURE.category}")
print("**Difficulty:** Level {FEATURE.difficulty}/5")
print("**Status:** {FEATURE.status}")
print("**Implementation:** {FEATURE.impl_type}")
print("")
print("## Description")
print("")
print("{FEATURE.description}")
print("")
print("## Implementation Files")
for file in FEATURE.files:
    print("- `{file}`")
print("")
print("## Test Files")
for test in FEATURE.tests:
    print("- `{test}`")
print("")
print("## Code Examples")
print("")
print("```simple")
for example in FEATURE.code_examples:
    print("{example}")
print("```")
print("")
print("## Notes")
print("")
print("{FEATURE.notes}")

# =====================================================
# Test Summary
# =====================================================

print("")
print("============================================================")
print("  TEST SUMMARY")
print("============================================================")
print("Passed: {passed}")
print("Failed: {failed}")
print("Total:  {passed + failed}")

if failed == 0:
    print("")
    print("All tests PASSED!")

print("============================================================")
