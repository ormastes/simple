# Structs Feature Specification
# Feature #14: Struct definitions
# Category: Language | Difficulty: 3 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List[String]
    tests: List[String]
    description: String
    code_examples: List[String]
    dependencies: List[Int]
    required_by: List[Int]
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 14,
    name: 'Structs',
    category: 'Language',
    difficulty: 3,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/data_structures.md',
    files: [
        'src/compiler/src/interpreter.rs',
        'src/parser/src/statements/mod.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_oop_tests.rs'
    ],
    description: 'Struct type for grouping related data. Supports typed fields, struct literals, and field access.',
    code_examples: [],
    dependencies: [1, 2, 10],
    required_by: [11, 16],
    notes: 'Structs are value types. Use struct literal syntax for instantiation.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  STRUCTS FEATURE SPECIFICATION (#14)')
print('  Category: Language | Difficulty: 3 | Status: Complete')
print('============================================================')
print('')

let mut passed = 0
let mut failed = 0

print('describe Struct definition:')
print('  it defines struct with typed fields:')

class Point:
    x: Int
    y: Int

let p = Point { x: 10, y: 20 }
if p.x == 10 and p.y == 20:
    print('    [PASS] struct with fields')
    passed = passed + 1
else:
    print('    [FAIL] struct fields')
    failed = failed + 1

print('  it defines struct with multiple types:')

class User:
    name: String
    age: Int
    active: Bool

let user = User { name: 'Alice', age: 30, active: true }
if user.name == 'Alice' and user.age == 30 and user.active:
    print('    [PASS] mixed type fields')
    passed = passed + 1
else:
    print('    [FAIL] mixed types')
    failed = failed + 1

print('')
print('describe Struct access:')
print('  it reads field values:')

class Vec2:
    x: Float
    y: Float

let v = Vec2 { x: 3.0, y: 4.0 }
if v.x == 3.0 and v.y == 4.0:
    print('    [PASS] field read')
    passed = passed + 1
else:
    print('    [FAIL] field read')
    failed = failed + 1

print('  it supports nested structs:')

class Rectangle:
    origin: Point
    size: Point

let rect = Rectangle {
    origin: Point { x: 0, y: 0 },
    size: Point { x: 100, y: 50 }
}
if rect.origin.x == 0 and rect.size.x == 100:
    print('    [PASS] nested structs')
    passed = passed + 1
else:
    print('    [FAIL] nested')
    failed = failed + 1

print('')
print('describe Struct with collections:')
print('  it supports list fields:')

class Container:
    items: List

let cont = Container { items: [1, 2, 3] }
if cont.items.len() == 3:
    print('    [PASS] list field')
    passed = passed + 1
else:
    print('    [FAIL] list field')
    failed = failed + 1

print('  it supports computed values:')

class Score:
    points: Int

fn double_score(s):
    return s.points * 2

let score = Score { points: 50 }
if double_score(score) == 100:
    print('    [PASS] struct as function arg')
    passed = passed + 1
else:
    print('    [FAIL] function arg')
    failed = failed + 1

print('  it supports struct comparison:')

class Coord:
    x: Int
    y: Int

let c1 = Coord { x: 5, y: 5 }
let c2 = Coord { x: 5, y: 5 }
if c1.x == c2.x and c1.y == c2.y:
    print('    [PASS] struct field comparison')
    passed = passed + 1
else:
    print('    [FAIL] comparison')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# Structs')
print('')
print('**Feature ID:** #14')
print('**Category:** Language')
print('**Difficulty:** Level 3/5')
print('**Status:** Complete')
print('**Implementation:** Rust')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
