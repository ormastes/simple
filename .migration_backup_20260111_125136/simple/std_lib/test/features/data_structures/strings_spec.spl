# Strings Feature Specification
# Feature #25: String operations and methods
# Category: Data Structures | Difficulty: 2 | Status: Complete

# =====================================================
# Feature Metadata
# =====================================================

class FeatureMetadata:
    id: Int
    name: String
    category: String
    difficulty: Int
    status: String
    impl_type: String
    spec_ref: String
    files: List<String>
    tests: List<String>
    description: String
    code_examples: List<String>
    dependencies: List<Int>
    required_by: List<Int>
    notes: String

# Feature Definition
let FEATURE = FeatureMetadata {
    id: 25,
    name: 'Strings',
    category: 'Data Structures',
    difficulty: 2,
    status: 'Complete',
    impl_type: 'Rust',
    spec_ref: 'doc/spec/types.md',
    files: [
        'src/runtime/src/value/collections.rs',
        'src/compiler/src/interpreter.rs'
    ],
    tests: [
        'src/driver/tests/interpreter_strings_tests.rs'
    ],
    description: 'String type with interpolation, concatenation, and built-in methods like len, split, replace, trim, upper, lower.',
    code_examples: [],
    dependencies: [1, 2, 10],
    required_by: [11, 12],
    notes: 'Double-quoted strings support interpolation. Single-quoted strings are raw.'
}

# =====================================================
# BDD Specification Tests
# =====================================================

print('============================================================')
print('  STRINGS FEATURE SPECIFICATION (#25)')
print('  Category: Data Structures | Difficulty: 2 | Status: Complete')
print('============================================================')
print('')

let mut passed = 0
let mut failed = 0

print('describe String literals:')
print('  it creates string literals:')

let s = 'hello'
if s == 'hello':
    print('    [PASS] string literal')
    passed = passed + 1
else:
    print('    [FAIL] string literal')
    failed = failed + 1

print('  it supports string concatenation:')

let a = 'hello'
let b = ' world'
let c = a + b
if c == 'hello world':
    print('    [PASS] string concatenation')
    passed = passed + 1
else:
    print('    [FAIL] concatenation')
    failed = failed + 1

print('  it supports f-string interpolation:')

let name = 'Alice'
let greeting = "Hello, {name}!"
if greeting == 'Hello, Alice!':
    print('    [PASS] f-string interpolation')
    passed = passed + 1
else:
    print('    [FAIL] interpolation')
    failed = failed + 1

print('')
print('describe String methods:')
print('  it returns string length:')

let text = 'hello'
if text.len() == 5:
    print('    [PASS] string len')
    passed = passed + 1
else:
    print('    [FAIL] len')
    failed = failed + 1

print('  it supports replace:')

let original = 'hello world'
let replaced = original.replace('world', 'Simple')
if replaced == 'hello Simple':
    print('    [PASS] string replace')
    passed = passed + 1
else:
    print('    [FAIL] replace')
    failed = failed + 1

print('  it supports split:')

let csv = 'a,b,c'
let parts = csv.split(',')
if parts.len() == 3:
    print('    [PASS] string split')
    passed = passed + 1
else:
    print('    [FAIL] split')
    failed = failed + 1

print('  it supports contains:')

let sentence = 'The quick brown fox'
if sentence.contains('quick'):
    print('    [PASS] string contains')
    passed = passed + 1
else:
    print('    [FAIL] contains')
    failed = failed + 1

print('  it supports starts_with and ends_with:')

let path = '/home/user/file.txt'
if path.starts_with('/home') and path.ends_with('.txt'):
    print('    [PASS] starts_with/ends_with')
    passed = passed + 1
else:
    print('    [FAIL] starts/ends')
    failed = failed + 1

print('')
print('describe String comparison:')
print('  it compares strings for equality:')

let x = 'test'
let y = 'test'
if x == y:
    print('    [PASS] string equality')
    passed = passed + 1
else:
    print('    [FAIL] equality')
    failed = failed + 1

print('  it compares strings for inequality:')

let p = 'abc'
let q = 'xyz'
if p != q:
    print('    [PASS] string inequality')
    passed = passed + 1
else:
    print('    [FAIL] inequality')
    failed = failed + 1

# =====================================================
# Documentation Output
# =====================================================

print('')
print('============================================================')
print('  GENERATED DOCUMENTATION')
print('============================================================')
print('')
print('# Strings')
print('')
print('**Feature ID:** #25')
print('**Category:** Data Structures')
print('**Difficulty:** Level 2/5')
print('**Status:** Complete')
print('**Implementation:** Rust')
print('')
print('## Description')
print('')
print(FEATURE.description)
print('')
print('## Notes')
print('')
print(FEATURE.notes)

# Summary
print('')
print('============================================================')
print('  TEST SUMMARY')
print('============================================================')
print('Passed: {passed}')
print('Failed: {failed}')
print('Total:  {passed + failed}')
if failed == 0:
    print('All tests PASSED!')
print('============================================================')
