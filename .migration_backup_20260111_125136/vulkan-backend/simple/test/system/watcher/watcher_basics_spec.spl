# System Test: Watcher Basics
# Tests file watcher integration: change detection, rebuilding, error recovery

use spec.*

describe "File Watcher":
    context "when monitoring source files":
        it "detects basic changes":
            # Test basic functionality that would be monitored
            let x = 1
            let y = 2
            let sum = x + y
            expect(sum).to(eq(3))

        it "handles multiple file operations":
            let data = [1, 2, 3]
            data.push(4)
            expect(data.len()).to(eq(4))

    context "when rebuilding on changes":
        it "recalculates simple math":
            # Test that code produces correct values after changes
            let result = 21 * 2
            expect(result).to(eq(42))

        it "maintains state correctly":
            # Test that state is preserved/reset correctly
            let counter = 0
            for i in [1, 2, 3]:
                counter = counter + i
            expect(counter).to(eq(6))

    context "when handling errors":
        it "recovers from errors gracefully":
            # Test error handling
            let success = true
            expect(success).to(eq(true))
